

# **OPEN SOURCE PROJEKTY PRO MODELPRICER \- KOMPLETN√ç P≈òEHLED**

## **üìã RYCHL√ù P≈òEHLED (TREE)**

SEKCE 1: Bug Fixes & Reaktivita  
‚îú‚îÄ‚îÄ Zustand / Jotai (state management)  
‚îú‚îÄ‚îÄ @preact/signals-react (reaktivn√≠ ceny)  
‚îî‚îÄ‚îÄ Immer (immutable state)

SEKCE 2: Kontaktn√≠ formul√°≈ô & Objedn√°vky  
‚îú‚îÄ‚îÄ React Hook Form  
‚îú‚îÄ‚îÄ Zod (validace)  
‚îî‚îÄ‚îÄ Resend / Nodemailer (emaily)

SEKCE 3: Podpora v√≠ce form√°t≈Ø soubor≈Ø  
‚îú‚îÄ‚îÄ Three.js (STLLoader, OBJLoader, 3MFLoader)  
‚îú‚îÄ‚îÄ usco-3mf-parser  
‚îú‚îÄ‚îÄ three-mf  
‚îú‚îÄ‚îÄ opencascade.js (STEP/IGES)  
‚îî‚îÄ‚îÄ Online-3D-Viewer

SEKCE 4: Doprava a ƒçasy doruƒçen√≠  
‚îú‚îÄ‚îÄ Karrio (self-hosted shipping API)  
‚îú‚îÄ‚îÄ PurplShip OSS  
‚îî‚îÄ‚îÄ node-shipping-ups/fedex/dhl

SEKCE 5: Mno≈æstevn√≠ slevy  
‚îî‚îÄ‚îÄ Vlastn√≠ implementace (pricing engine)

SEKCE 6: Post-processing  
‚îî‚îÄ‚îÄ Vlastn√≠ implementace

SEKCE 7: Emailov√© notifikace  
‚îú‚îÄ‚îÄ Nodemailer  
‚îú‚îÄ‚îÄ React Email  
‚îú‚îÄ‚îÄ MJML  
‚îú‚îÄ‚îÄ BullMQ (fronty)  
‚îî‚îÄ‚îÄ Resend

SEKCE 8: Printability Check & Mesh anal√Ωza  
‚îú‚îÄ‚îÄ GridSpace Kiri:Moto / Mesh:Tool  
‚îú‚îÄ‚îÄ manifold-3d (WASM)  
‚îú‚îÄ‚îÄ meshoptimizer  
‚îî‚îÄ‚îÄ three-mesh-bvh

SEKCE 9: Express pricing & Upselly  
‚îî‚îÄ‚îÄ Vlastn√≠ implementace

SEKCE 10: Kup√≥ny a promo akce  
‚îú‚îÄ‚îÄ Voucherify (m√° open-source alternativu)  
‚îî‚îÄ‚îÄ Vlastn√≠ implementace

SEKCE 11: Chat a koment√°≈ôe  
‚îú‚îÄ‚îÄ Chatwoot (self-hosted)  
‚îú‚îÄ‚îÄ Socket.io / Ably  
‚îú‚îÄ‚îÄ Liveblocks  
‚îî‚îÄ‚îÄ TipTap (rich text editor)

SEKCE 12: Z√°kaznick√Ω port√°l  
‚îú‚îÄ‚îÄ Auth.js (NextAuth)  
‚îú‚îÄ‚îÄ Lucia Auth  
‚îú‚îÄ‚îÄ Keycloak (enterprise SSO)  
‚îî‚îÄ‚îÄ Supabase Auth

SEKCE 13: Generov√°n√≠ dokument≈Ø  
‚îú‚îÄ‚îÄ React-PDF / @react-pdf/renderer  
‚îú‚îÄ‚îÄ PDFKit  
‚îú‚îÄ‚îÄ Puppeteer/Playwright (HTML‚ÜíPDF)  
‚îú‚îÄ‚îÄ pdf-lib  
‚îî‚îÄ‚îÄ docx (Word generov√°n√≠)

SEKCE 14: Kanban board  
‚îú‚îÄ‚îÄ react-trello (2.2k ‚≠ê)  
‚îú‚îÄ‚îÄ @dnd-kit/core  
‚îú‚îÄ‚îÄ react-beautiful-dnd  
‚îî‚îÄ‚îÄ react-kanban

SEKCE 15: Roz≈°√≠≈ôen√© cenotvorby  
‚îî‚îÄ‚îÄ json-rules-engine

SEKCE 16: Multi-language & Multi-currency  
‚îú‚îÄ‚îÄ next-intl / react-i18next / i18next  
‚îú‚îÄ‚îÄ Lingui  
‚îú‚îÄ‚îÄ dinero.js (currency)  
‚îú‚îÄ‚îÄ currency.js  
‚îî‚îÄ‚îÄ Intl API (nativn√≠)

SEKCE 17: E-commerce pluginy  
‚îú‚îÄ‚îÄ @woocommerce/woocommerce-rest-api  
‚îú‚îÄ‚îÄ @shopify/shopify-api  
‚îî‚îÄ‚îÄ Medusa.js (headless commerce)

SEKCE 18: Pokroƒçil√© funkce  
‚îú‚îÄ‚îÄ Git-like versioning (vlastn√≠)  
‚îú‚îÄ‚îÄ Prisma (ORM)  
‚îî‚îÄ‚îÄ PostgreSQL

SEKCE 19: CRM, Marketing, Analytika  
‚îú‚îÄ‚îÄ Plausible Analytics  
‚îú‚îÄ‚îÄ Matomo  
‚îú‚îÄ‚îÄ Umami  
‚îú‚îÄ‚îÄ Metabase (BI)  
‚îú‚îÄ‚îÄ Apache Superset  
‚îú‚îÄ‚îÄ Cube.js  
‚îú‚îÄ‚îÄ Recharts / Chart.js / Tremor  
‚îú‚îÄ‚îÄ RudderStack (CDP)  
‚îî‚îÄ‚îÄ Meilisearch

SEKCE 20: Public API & Developer Portal  
‚îú‚îÄ‚îÄ Swagger/OpenAPI \+ swagger-ui-express  
‚îú‚îÄ‚îÄ Redoc  
‚îú‚îÄ‚îÄ Stoplight Elements  
‚îú‚îÄ‚îÄ express-rate-limit  
‚îú‚îÄ‚îÄ helmet.js  
‚îî‚îÄ‚îÄ Hono / Fastify

SEKCE 21: Security, Taxes, Enterprise  
‚îú‚îÄ‚îÄ Casbin (RBAC/ABAC)  
‚îú‚îÄ‚îÄ CASL  
‚îú‚îÄ‚îÄ node-tax-calculator  
‚îú‚îÄ‚îÄ Avalara API wrapper  
‚îú‚îÄ‚îÄ argon2 / bcrypt  
‚îú‚îÄ‚îÄ jose (JWT)  
‚îî‚îÄ‚îÄ zxcvbn (password strength)

SEKCE 22: Onboarding & Tutori√°ly  
‚îú‚îÄ‚îÄ Shepherd.js  
‚îú‚îÄ‚îÄ Driver.js  
‚îú‚îÄ‚îÄ react-joyride  
‚îú‚îÄ‚îÄ Intro.js

‚îî‚îÄ‚îÄ Floating UI (tooltips)

---

## **DETAILN√ç ROZPIS PO SEKC√çCH**

---

### **SEKCE 1: BUG FIXES & REAKTIVN√ç CENOTVORBA**

**C√≠l:** Real-time p≈ôepoƒçet ceny p≈ôi zmƒõnƒõ mno≈æstv√≠/barvy bez refresh

| Knihovna | GitHub | Hvƒõzdy | Proƒç pou≈æ√≠t |
| ----- | ----- | ----- | ----- |
| **Zustand** | zustand | 48k+ ‚≠ê | Minimalistick√Ω state management, perfektn√≠ pro reaktivn√≠ ceny |
| **Jotai** | pmndrs/jotai | 18k+ ‚≠ê | Atomic state, skvƒõl√© pro nez√°visl√© stavy jednotliv√Ωch model≈Ø |
| **@preact/signals-react** | preactjs/signals | 4k+ ‚≠ê | Ultra-rychl√© reaktivn√≠ sign√°ly |
| **Immer** | immerjs/immer | 27k+ ‚≠ê | Immutable state updates jednodu≈°e |

**Doporuƒçen√≠:** `Zustand` pro glob√°ln√≠ stav kalkulaƒçky \+ `Jotai` pro per-model stav preset≈Ø

---

### **SEKCE 2: KONTAKTN√ç FORMUL√Å≈ò & DOKONƒåEN√ç OBJEDN√ÅVKY**

| Knihovna | GitHub | Hvƒõzdy | Proƒç pou≈æ√≠t |
| ----- | ----- | ----- | ----- |
| **React Hook Form** | react-hook-form | 41k+ ‚≠ê | Nejlep≈°√≠ form library, minim√°ln√≠ re-rendery |
| **Zod** | colinhacks/zod | 33k+ ‚≠ê | TypeScript-first schema validace |
| **Yup** | jquense/yup | 22k+ ‚≠ê | Alternativa k Zod, v√≠ce mature |
| **Resend** | resend | \- | Modern√≠ email API (m√° i OSS ƒç√°st) |
| **Nodemailer** | nodemailer/nodemailer | 16k+ ‚≠ê | Klasika pro odes√≠l√°n√≠ email≈Ø |

**Doporuƒçen√≠:** `React Hook Form` \+ `Zod` \+ `Nodemailer`

---

### **SEKCE 3: PODPORA V√çCE FORM√ÅT≈Æ 3D SOUBOR≈Æ**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **Three.js** | mrdoob/three.js | 102k+ ‚≠ê |
| **usco-3mf-parser** | usco/3mf-parser | Lightweight 3MF parser pro browser \+ Node |
| **three-mf** | npm | TypeScript-first 3MF parsing |
| **opencascade.js** | ocjs.org | WASM port OpenCASCADE pro STEP/IGES |
| **Online-3D-Viewer** | kovacsv/Online3DViewer | 2k+ ‚≠ê |
| **model-viewer** | google/model-viewer | 6.5k+ ‚≠ê |

**Doporuƒçen√≠:** `Three.js` jako z√°klad \+ `usco-3mf-parser` pro 3MF \+ `opencascade.js` pro STEP

---

### **SEKCE 4: DOPRAVA A ƒåASY DORUƒåEN√ç**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **Karrio** | karrioapi/karrio | 1.2k+ ‚≠ê |
| **PurplShip OSS** | purplship | Open-source multi-carrier API |
| **Vendure** | vendure-ecommerce/vendure | 5.5k+ ‚≠ê |
| **Medusa** | medusajs/medusa | 25k+ ‚≠ê |

**Doporuƒçen√≠:** `Karrio` pro self-hosted shipping rates/labels/tracking

---

### **SEKCE 5: MNO≈ΩSTEVN√ç SLEVY**

**Nen√≠ pot≈ôeba extern√≠ knihovna** \- implementuje se jako souƒç√°st pricing engine.

U≈æiteƒçn√© utility:

| Knihovna | √öƒçel |
| ----- | ----- |
| **decimal.js** | P≈ôesn√° desetinn√° aritmetika |
| **dinero.js** | Pr√°ce s mƒõnami a cenami |

---

### **SEKCE 6: POST-PROCESSING MO≈ΩNOSTI**

**Vlastn√≠ implementace** \- jedn√° se o konfiguraƒçn√≠ data, ne slo≈æitou logiku.

---

### **SEKCE 7: EMAILOV√â NOTIFIKACE**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Nodemailer** | nodemailer/nodemailer | 16k+ ‚≠ê | SMTP sending |
| **React Email** | resend/react-email | 14k+ ‚≠ê | React komponenty pro emaily |
| **MJML** | mjmlio/mjml | 17k+ ‚≠ê | Responsive email framework |
| **BullMQ** | taskforcesh/bullmq | 6k+ ‚≠ê | Redis-based job queue pro email fronty |
| **email-templates** | forwardemail/email-templates | 3.6k+ ‚≠ê | Template rendering |
| **Handlebars** | handlebars-lang/handlebars.js | 18k+ ‚≠ê | Templating engine |

**Doporuƒçen√≠:** `React Email` pro tvorbu ≈°ablon \+ `Nodemailer` \+ `BullMQ` pro fronty

---

### **SEKCE 8: PRINTABILITY CHECK & MESH ANAL√ùZA**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **GridSpace Kiri:Moto** | GridSpace/grid-apps | 2k+ ‚≠ê |
| **Mesh:Tool** | souƒç√°st grid-apps | Mesh repair/editing |
| **manifold-3d** | elalish/manifold | 1k+ ‚≠ê |
| **meshoptimizer** | zeux/meshoptimizer | 5k+ ‚≠ê |
| **three-mesh-bvh** | gkjohnson/three-mesh-bvh | 2.4k+ ‚≠ê |
| **trimesh** (Python) | mikedh/trimesh | 3k+ ‚≠ê |

**Doporuƒçen√≠:** `Kiri:Moto` pro browser-based slicing \+ `manifold-3d` pro mesh validation

---

### **SEKCE 9: EXPRESS PRICING & UPSELLY**

**Vlastn√≠ implementace** na z√°kladƒõ pricing rules engine.

U≈æiteƒçn√©:

| Knihovna | √öƒçel |
| ----- | ----- |
| **json-rules-engine** | Pravidlov√Ω engine pro pricing |

---

### **SEKCE 10: SLEVOV√â KUP√ìNY A PROMO AKCE**

| Knihovna | Popis |
| ----- | ----- |
| **Vlastn√≠ implementace** | Nejƒçastƒõj≈°√≠ volba \- kup√≥nov√Ω syst√©m je relativnƒõ jednoduch√Ω |
| **Medusa Discounts** | Pokud pou≈æ√≠v√°te Medusa, m√° built-in discounts |

Struktura se vƒõt≈°inou dƒõl√° vlastn√≠ v datab√°zi \- nen√≠ vhodn√° obecn√° knihovna.

---

### **SEKCE 11: CHAT A KOMENT√Å≈òE**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Chatwoot** | chatwoot/chatwoot | 21k+ ‚≠ê | Self-hosted customer engagement platform |
| **Socket.io** | socketio/socket.io | 61k+ ‚≠ê | Real-time WebSocket komunikace |
| **Liveblocks** | liveblocks/liveblocks | 3k+ ‚≠ê | Real-time collaboration |
| **TipTap** | ueberdosis/tiptap | 27k+ ‚≠ê | Rich text editor pro koment√°≈ôe |
| **Plate** | udecode/plate | 6k+ ‚≠ê | Headless rich text editor |

**Doporuƒçen√≠:** `Chatwoot` pro z√°kaznick√Ω chat NEBO `Socket.io` \+ vlastn√≠

---

### **SEKCE 12: Z√ÅKAZNICK√ù PORT√ÅL (AUTENTIZACE)**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Auth.js (NextAuth)** | nextauthjs/next-auth | 24k+ ‚≠ê | Kompletn√≠ auth pro Next.js |
| **Lucia** | lucia-auth/lucia | 9k+ ‚≠ê | Lightweight auth library |
| **Keycloak** | keycloak/keycloak | 23k+ ‚≠ê | Enterprise SSO (Java) |
| **Supabase Auth** | supabase | Built-in s Supabase |  |
| **Clerk** | m√° OSS ƒç√°sti | Magic links, social login |  |

**Doporuƒçen√≠:** `Auth.js` pro Next.js nebo `Lucia` pro vlastn√≠ ≈ôe≈°en√≠

---

### **SEKCE 13: AUTOMATICK√â GENEROV√ÅN√ç DOKUMENT≈Æ**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **@react-pdf/renderer** | diegomura/react-pdf | 15k+ ‚≠ê | React komponenty ‚Üí PDF |
| **PDFKit** | foliojs/pdfkit | 9.5k+ ‚≠ê | N√≠zko√∫rov≈àov√© PDF generov√°n√≠ |
| **pdf-lib** | Hopding/pdf-lib | 7k+ ‚≠ê | Vytv√°≈ôen√≠ a editace PDF |
| **Puppeteer** | puppeteer/puppeteer | 89k+ ‚≠ê | HTML ‚Üí PDF via headless Chrome |
| **Playwright** | microsoft/playwright | 67k+ ‚≠ê | Alternativa k Puppeteer |
| **docx** | dolanmiu/docx | 4k+ ‚≠ê | Word dokument generov√°n√≠ |
| **pdfmake** | bpampuch/pdfmake | 12k+ ‚≠ê | Deklarativn√≠ PDF |
| **jsPDF** | parallax/jsPDF | 29k+ ‚≠ê | Client-side PDF |

**Doporuƒçen√≠:** `@react-pdf/renderer` pro faktury \+ `Puppeteer` pro komplexn√≠ layouts

---

### **SEKCE 14: KANBAN BOARD**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **react-trello** | rcdexta/react-trello | 2.2k ‚≠ê | Pluggable Kanban komponenty |
| **@dnd-kit/core** | clauderic/dnd-kit | 13k+ ‚≠ê | Modern√≠ drag & drop |
| **react-beautiful-dnd** | atlassian/react-beautiful-dnd | 33k+ ‚≠ê | Atlassian's DnD (maintenance mode) |
| **react-kanban** | asseinfo/react-kanban | 652 ‚≠ê | Jednoduch√Ω Kanban |
| **Shadcn Kanban** | Georgegriff/react-dnd-kit-tailwind-shadcn-ui | 808 ‚≠ê | DnD-kit \+ Tailwind \+ Shadcn |

**Doporuƒçen√≠:** `@dnd-kit/core` \+ vlastn√≠ komponenty NEBO `react-trello` pro rychl√Ω start

---

### **SEKCE 15: ROZ≈†√ç≈òEN√â METODY CENOTVORBY**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **json-rules-engine** | CacheControl/json-rules-engine | 2.5k+ ‚≠ê |
| **nools** | C2FO/nools | Rules engine (star≈°√≠) |

**Doporuƒçen√≠:** `json-rules-engine` pro komplexn√≠ pricing pravidla

---

### **SEKCE 16: MULTI-LANGUAGE & MULTI-CURRENCY**

**Lokalizace:**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **next-intl** | amannn/next-intl | 2k+ ‚≠ê | Nejlep≈°√≠ pro Next.js App Router |
| **react-i18next** | i18next/react-i18next | 9k+ ‚≠ê | Klasika, velmi flexibiln√≠ |
| **Lingui** | lingui/js-lingui | 4.5k+ ‚≠ê | Modern√≠ i18n s compile-time extrakc√≠ |
| **Format.js (react-intl)** | formatjs/formatjs | 14k+ ‚≠ê | Standardn√≠ ICU message form√°t |

**Multi-currency:**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **dinero.js** | dinerojs/dinero.js | 6.5k+ ‚≠ê |
| **currency.js** | scurker/currency.js | 3k+ ‚≠ê |
| **Intl.NumberFormat** | Nativn√≠ JS | Built-in form√°tov√°n√≠ |

**Doporuƒçen√≠:** `next-intl` \+ `dinero.js`

---

### **SEKCE 17: E-COMMERCE PLUGINY (WOOCOMMERCE, SHOPIFY)**

| Knihovna | npm | Popis |
| ----- | ----- | ----- |
| **@woocommerce/woocommerce-rest-api** | npm | Ofici√°ln√≠ WooCommerce REST API klient |
| **@shopify/shopify-api** | npm | Ofici√°ln√≠ Shopify API library |
| **shopify-buy** | Shopify/js-buy-sdk | Storefront API |
| **Medusa.js** | medusajs/medusa | Headless commerce alternativa |
| **Vendure** | vendure-ecommerce/vendure | GraphQL-first headless commerce |

**Doporuƒçen√≠:** Ofici√°ln√≠ knihovny \+ `Medusa` jako headless alternativa

---

### **SEKCE 18: POKROƒåIL√â FUNKCE (VERSIONING, SUPPLY CHAIN)**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **Prisma** | prisma/prisma | 39k+ ‚≠ê |
| **audit-log** | mindfreakthemon/node-auditlog | Audit logging |
| **event-sourcing** | Vlastn√≠ pattern | Pro versioning |

Vƒõt≈°inou vlastn√≠ implementace.

---

### **SEKCE 19: CRM, MARKETING, ANALYTIKA**

**Analytics (self-hosted):**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Plausible** | plausible/analytics | 20k+ ‚≠ê | Privacy-focused, lightweight |
| **Umami** | umami-software/umami | 22k+ ‚≠ê | Simple, fast analytics |
| **Matomo** | matomo-org/matomo | 19k+ ‚≠ê | Full-featured GA alternativa |
| **PostHog** | PostHog/posthog | 21k+ ‚≠ê | Product analytics \+ feature flags |

**BI/Dashboards:**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Metabase** | metabase/metabase | 38k+ ‚≠ê | Easy BI \+ embedded analytics |
| **Apache Superset** | apache/superset | 63k+ ‚≠ê | Powerful open-source BI |
| **Cube.js** | cube-js/cube | 18k+ ‚≠ê | Headless BI / semantic layer |
| **Redash** | getredash/redash | 26k+ ‚≠ê | Query \+ visualize data |

**Charts:**

| Knihovna | GitHub | Hvƒõzdy |
| ----- | ----- | ----- |
| **Recharts** | recharts/recharts | 24k+ ‚≠ê |
| **Chart.js** | chartjs/Chart.js | 65k+ ‚≠ê |
| **Tremor** | tremorlabs/tremor | 16k+ ‚≠ê |
| **Nivo** | plouc/nivo | 13k+ ‚≠ê |

**CDP/Data Pipeline:**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **RudderStack** | rudderlabs/rudder-server | 4k+ ‚≠ê |
| **Snowplow** | snowplow/snowplow | 7k+ ‚≠ê |

**Doporuƒçen√≠:** `Plausible/Umami` \+ `Metabase` \+ `Recharts/Tremor`

---

### **SEKCE 20: PUBLIC API & DEVELOPER PORTAL**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Swagger/OpenAPI** | swagger-api/swagger-ui | 26k+ ‚≠ê | API dokumentace standard |
| **swagger-jsdoc** | Surnet/swagger-jsdoc | 1.7k ‚≠ê | Generov√°n√≠ z JSDoc |
| **Redoc** | Redocly/redoc | 23k+ ‚≠ê | Kr√°sn√° API dokumentace |
| **Stoplight Elements** | stoplightio/elements | 1.5k ‚≠ê | API docs komponenty |
| **express-rate-limit** | express-rate-limit | 3k+ ‚≠ê | Rate limiting |
| **helmet** | helmetjs/helmet | 10k+ ‚≠ê | Security headers |
| **Hono** | honojs/hono | 20k+ ‚≠ê | Ultra-fast web framework |
| **Fastify** | fastify/fastify | 32k+ ‚≠ê | Fast Node.js framework |

**Doporuƒçen√≠:** `OpenAPI` \+ `Redoc` \+ `express-rate-limit`

---

### **SEKCE 21: SECURITY, TAXES, ENTERPRISE**

**Autorizace (RBAC/ABAC):**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Casbin** | casbin/node-casbin | 2.7k ‚≠ê | Powerful RBAC/ABAC |
| **CASL** | stalniy/casl | 6k+ ‚≠ê | Isomorphic authorization |
| **AccessControl** | onury/accesscontrol | 2k+ ‚≠ê | Role-based access control |

**Security:**

| Knihovna | GitHub | Popis |
| ----- | ----- | ----- |
| **argon2** | ranisalt/node-argon2 | Password hashing |
| **bcrypt** | kelektiv/node.bcrypt.js | Klasick√© password hashing |
| **jose** | panva/jose | JWT/JWE/JWS |
| **zxcvbn** | dropbox/zxcvbn | Password strength |
| **helmet** | helmetjs/helmet | Security headers |
| **csurf** | expressjs/csurf | CSRF protection |

**Taxes:**

| Knihovna | Popis |
| ----- | ----- |
| **Avalara SDK** | Enterprise tax calculation API |
| **TaxJar API** | Sales tax API |
| Vlastn√≠ VAT kalkulace | Pro EU je relativnƒõ jednoduch√© |

**Doporuƒçen√≠:** `CASL` pro autorizaci \+ `argon2` \+ `helmet`

---

### **SEKCE 22: ONBOARDING & TUTORI√ÅLY**

| Knihovna | GitHub | Hvƒõzdy | Popis |
| ----- | ----- | ----- | ----- |
| **Shepherd.js** | shipshapecode/shepherd | 13k+ ‚≠ê | Product tours |
| **Driver.js** | kamranahmedse/driver.js | 22k+ ‚≠ê | Highlight \+ popover |
| **react-joyride** | gilbarbara/react-joyride | 6.5k+ ‚≠ê | React product tours |
| **Intro.js** | usablica/intro.js | 22k+ ‚≠ê | Step-by-step guides |
| **Floating UI** | floating-ui/floating-ui | 30k+ ‚≠ê | Tooltips/popovers positioning |
| **Tippy.js** | atomiks/tippyjs | 12k+ ‚≠ê | Tooltip library |

**Doporuƒçen√≠:** `Driver.js` nebo `react-joyride` \+ `Floating UI`

---

## **üéØ DOPORUƒåEN√ù TECH STACK (SHRNUT√ç)**

### **Core Stack:**

Frontend: React/Next.js \+ TypeScript  
State: Zustand \+ Jotai (per-model state)  
Forms: React Hook Form \+ Zod  
Styling: Tailwind CSS \+ Shadcn/ui

3D: Three.js \+ usco-3mf-parser

### **Backend:**

Runtime: Node.js/Bun  
Framework: Hono nebo Fastify  
ORM: Prisma  
Database: PostgreSQL  
Queue: BullMQ \+ Redis

Auth: Auth.js nebo Lucia

### **Utilities:**

PDF: @react-pdf/renderer  
Email: React Email \+ Nodemailer \+ BullMQ  
i18n: next-intl  
Currency: dinero.js  
Analytics: Plausible/Umami

API Docs: OpenAPI \+ Redoc

### **3D/Mesh specifick√©:**

Viewer: Three.js  
3MF: usco-3mf-parser  
STEP: opencascade.js  
Slicing: Kiri:Moto (GridSpace)  
Mesh validation: manifold-3d

G-code: gcode-preview

---

Tento seznam pokr√Ωv√° v≈°echny 22 sekc√≠ implementaƒçn√≠ho pl√°nu s konkr√©tn√≠mi, dob≈ôe dokumentovan√Ωmi open source projekty, kter√© minimalizuj√≠ pot≈ôebu psan√≠ k√≥du od nuly.

## **SEKCE 1 ‚Äî Opravy bug≈Ø a nefunkƒçn√≠ch prvk≈Ø v kalkulaƒçce**

Tato sekce ≈ôe≈°√≠ okam≈æit√© opravy existuj√≠c√≠ch chyb a nefunkƒçn√≠ch prvk≈Ø v z√°kaznick√© kalkulaƒçce. Jedn√° se o nejni≈æ≈°√≠ prioritu implementace ve smyslu po≈ôad√≠ ‚Äî tyto opravy by mƒõly b√Ωt provedeny jako prvn√≠, proto≈æe ovliv≈àuj√≠ z√°kladn√≠ funkƒçnost produktu.

### **1.1 Automatick√Ω p≈ôepoƒçet ceny p≈ôi zmƒõnƒõ parametr≈Ø**

**AKTU√ÅLN√ç STAV:** Kdy≈æ z√°kazn√≠k zmƒõn√≠ parametr (mno≈æstv√≠, barvu, materi√°l, v√Ωpl≈à, kvalitu vrstvy, preset), cena se nep≈ôepoƒç√≠t√° automaticky. Z√°kazn√≠k mus√≠ ruƒçnƒõ kliknout na tlaƒç√≠tko "Spoƒç√≠tat cenu" nebo "P≈ôepoƒç√≠tat v≈°e". To vede ke zmaten√≠ ‚Äî z√°kazn√≠k vid√≠ starou cenu, kter√° neodpov√≠d√° aktu√°ln√≠ konfiguraci.

**CO JE T≈òEBA UDƒöLAT:**

**Backend:** Endpoint pro p≈ôepoƒçet ceny ji≈æ existuje (pou≈æ√≠v√° se tlaƒç√≠tky "Spoƒç√≠tat cenu" a "P≈ôepoƒç√≠tat v≈°e"). Nen√≠ pot≈ôeba mƒõnit backend logiku, staƒç√≠ frontend √∫prava.

**Frontend ‚Äî Varianta A (Doporuƒçen√° ‚Äî Debounced auto-recalculation):** P≈ôidat event listenery na v≈°echny konfiguraƒçn√≠ prvky v kalkulaƒçce: dropdown materi√°lu, barevn√© buttony, dropdown kvality vrstvy, slider v√Ωplnƒõ, checkbox podpƒõry, pole poƒçet kus≈Ø, dropdown preset, checkboxy dodateƒçn√Ωch slu≈æeb. P≈ôi ka≈æd√© zmƒõnƒõ kter√©hokoliv z tƒõchto prvk≈Ø spustit debounced vol√°n√≠ API pro p≈ôepoƒçet (debounce 500-800ms). Bƒõhem p≈ôepoƒçtu zobrazit loading indik√°tor v sekci "Cena a souhrn" (spinner nebo skeleton). Po dokonƒçen√≠ aktualizovat v≈°echny cenov√© √∫daje: celkovou cenu, rozpad (materi√°l, ƒças, slu≈æby, sleva, markup), rozpis jednotliv√Ωch model≈Ø.

**Frontend ‚Äî Varianta B (Alternativa ‚Äî Invalidace \+ prompt):** P≈ôi zmƒõnƒõ parametru oznaƒçit cenu jako neplatnou ‚Äî ≈°ed√Ω text, p≈ôe≈°krtnut√≠, nebo varovn√Ω badge "Cena neaktu√°ln√≠". Zobrazit v√Ωrazn√© tlaƒç√≠tko "P≈ôepoƒç√≠tat cenu" s animac√≠/pulzem. Po kliknut√≠ p≈ôepoƒç√≠tat a obnovit norm√°ln√≠ zobrazen√≠.

**KDE V K√ìDU:** Widget/kalkulaƒçka frontend komponenta ‚Äî pravdƒõpodobnƒõ soubor ≈ôe≈°√≠c√≠ stav konfigurace modelu. P≈ôidat useEffect/watcher na zmƒõny state parametr≈Ø, kter√Ω triggeruje recalculation funkci.

**D≈ÆLE≈ΩIT√â DETAILY:**

* Debounce je nutn√Ω zejm√©na u slideru v√Ωplnƒõ (u≈æivatel t√°hne \= mnoho zmƒõn) a pole poƒçet kus≈Ø (u≈æivatel p√≠≈°e).  
* P≈ôi p≈ôepoƒçtu jednoho modelu se mus√≠ aktualizovat i celkov√° cena objedn√°vky (souƒçet v≈°ech model≈Ø).  
* Pokud je p≈ôepoƒçet v pr≈Øbƒõhu a u≈æivatel zmƒõn√≠ dal≈°√≠ parametr, p≈ôedchoz√≠ request by mƒõl b√Ωt zru≈°en (abort controller) a spu≈°tƒõn nov√Ω.  
* Stav "prob√≠h√° v√Ωpoƒçet" by mƒõl blokovat tlaƒç√≠tko "P≈ôej√≠t k v√Ωbƒõru tisk√°rny" aby z√°kazn√≠k neodeslal objedn√°vku se starou cenou.

---

### **1.2 Per-model preset slicov√°n√≠ (m√≠sto glob√°ln√≠ho)**

**AKTU√ÅLN√ç STAV:** Dropdown "Preset pro slicov√°n√≠" je nyn√≠ glob√°ln√≠ ‚Äî nach√°z√≠ se v horn√≠ ƒç√°sti konfiguraƒçn√≠ho kroku a plat√≠ pro celou objedn√°vku. Kdy≈æ z√°kazn√≠k nahraje v√≠ce model≈Ø (nap≈ô. cilinder for magnet 12.5mm.stl a small-leg.stl), oba modely sd√≠lej√≠ stejn√Ω preset. To je probl√©m, proto≈æe z√°kazn√≠k m≈Ø≈æe cht√≠t r≈Øzn√© presety pro r≈Øzn√© modely (nap≈ô. rychl√Ω tisk pro jednoduch√Ω d√≠l, kvalitn√≠ tisk pro detailn√≠ d√≠l).

**CO JE T≈òEBA UDƒöLAT:**

**Datov√Ω model:** Roz≈°√≠≈ôit strukturu objedn√°vky/modelu o pole preset\_id na √∫rovni jednotliv√©ho modelu. Aktu√°lnƒõ je preset pravdƒõpodobnƒõ ulo≈æen na √∫rovni objedn√°vky/session. Pot≈ôeba p≈ôesunout na √∫rove≈à ka≈æd√©ho nahran√©ho modelu.

**Backend:** API endpoint pro v√Ωpoƒçet ceny mus√≠ p≈ôij√≠mat preset\_id per model, ne glob√°lnƒõ. Slicovac√≠ pipeline mus√≠ b√Ωt schopen slicovat ka≈æd√Ω model s jeho vlastn√≠m presetem.

**Frontend ‚Äî P≈ôesun dropdownu:** Odstranit glob√°ln√≠ dropdown "Preset pro slicov√°n√≠" z horn√≠ ƒç√°sti konfiguraƒçn√≠ho kroku. M√≠sto toho p≈ôidat v√Ωbƒõr presetu do kontextu ka≈æd√©ho modelu. Mo≈æn√© um√≠stƒõn√≠:

* (a) V panelu 3D prohl√≠≈æeƒçe pod informacemi o modelu (rozmƒõry, objem, povrch, ƒças, materi√°l)  
* (b) V panelu "Nahran√© modely" jako rozbalovac√≠ detail u ka≈æd√©ho modelu  
* (c) P≈ô√≠mo do konfiguraƒçn√≠ sekce, kter√° se mƒõn√≠ podle vybran√©ho modelu. Kdy≈æ u≈æivatel klikne na model v seznamu "Nahran√© modely", zobraz√≠ se jeho konfigurace vƒçetnƒõ presetu.

**DOPORUƒåEN√â ≈òE≈†EN√ç:** Varianta (c) ‚Äî konfigurace se mƒõn√≠ podle vybran√©ho modelu. To znamen√°, ≈æe cel√° sekce Materi√°l a barva, Kvalita tisku, Mno≈æstv√≠ a preset budou reflektovat nastaven√≠ aktu√°lnƒõ vybran√©ho modelu. P≈ôi p≈ôepnut√≠ modelu se hodnoty p≈ôep√≠≈°√≠ na konfiguraci dan√©ho modelu.

**D≈ÆLE≈ΩIT√â DETAILY:**

* V√Ωchoz√≠ preset pro novƒõ nahran√Ω model by mƒõl b√Ωt ten, kter√Ω je nastaven jako "default" v admin panelu (Admin \> Presets).  
* P≈ôi zmƒõnƒõ presetu u jednoho modelu se nesm√≠ zmƒõnit preset ostatn√≠ch model≈Ø.  
* V rozpisu objedn√°vky (prav√Ω panel) by u ka≈æd√©ho modelu mƒõl b√Ωt zobrazen n√°zev pou≈æit√©ho presetu.  
* Pokud z√°kazn√≠k zmƒõn√≠ preset, mus√≠ se p≈ôepoƒç√≠tat cena dan√©ho modelu (napojen√≠ na bod 1.1).

---

### **1.3 Rychl√© p≈ôedvolby ‚Äî p≈ôemƒõna na funkƒçn√≠ tlaƒç√≠tka preset≈Ø**

**AKTU√ÅLN√ç STAV:** V kalkulaƒçce existuj√≠ dvƒõ sekce pro v√Ωbƒõr presetu: (1) dropdown "Preset pro slicov√°n√≠" naho≈ôe (funkƒçn√≠, ale glob√°ln√≠), a (2) sekce "Rychl√© p≈ôedvolby" s t≈ôemi kartami Basic/Middle/Pro (nefunkƒçn√≠ ‚Äî tlaƒç√≠tka nic nedƒõlaj√≠). Pl√°n je nahradit dropdown presetu pr√°vƒõ tƒõmito tlaƒç√≠tky, aby presety byly vizu√°lnƒõ p≈ôehlednƒõj≈°√≠ a rychleji voliteln√©.

**CO JE T≈òEBA UDƒöLAT:**

**Odstranit dropdown "Preset pro slicov√°n√≠":** Cel√Ω box s dropdownem odstranit z UI konfiguraƒçn√≠ho kroku. Ten je nyn√≠ zbyteƒçn√Ω, proto≈æe jeho funkci p≈ôevezmou tlaƒç√≠tka preset≈Ø.

**P≈ôemƒõnit sekci "Rychl√© p≈ôedvolby" na funkƒçn√≠ v√Ωbƒõr presetu:** M√≠sto statick√Ωch karet Basic/Middle/Pro napojit na skuteƒçn√© presety z admin panelu (Admin \> Presets). Ka≈æd√Ω preset, kter√Ω m√° v adminu zapnutou viditelnost ve widgetu, se zobraz√≠ jako karta/tlaƒç√≠tko. Karta zobraz√≠: n√°zev presetu (velk√Ω text), kr√°tk√Ω popis/subtitle (voliteln√Ω, nastaviteln√Ω v adminu). Aktivn√≠/vybran√° karta bude vizu√°lnƒõ odli≈°ena (border, pozad√≠, checkmark). Kliknut√≠ na kartu nastav√≠ dan√Ω preset pro aktu√°lnƒõ vybran√Ω model (napojen√≠ na bod 1.2).

**Admin panel roz≈°√≠≈ôen√≠ (Admin \> Presets):** P≈ôidat pole "popis pro widget" ke ka≈æd√©mu presetu ‚Äî kr√°tk√Ω text zobrazen√Ω pod n√°zvem na kartƒõ (nap≈ô. "Rychl√Ω tisk, n√≠zk√° kvalita"). P≈ôidat pole "po≈ôad√≠ zobrazen√≠" pro ≈ôazen√≠ karet ve widgetu. P≈ôidat pole "ikona" (voliteln√©) ‚Äî mo≈ænost vybrat ikonu pro kartu.

**UM√çSTƒöN√ç V UI:** Sekce presetov√Ωch karet by mƒõla b√Ωt buƒè:

* (a) Na zaƒç√°tku konfigurace ka≈æd√©ho modelu (prvnƒõ preset, pak materi√°l, barva, kvalita)  
* (b) Integrovan√° do per-model konfigurace (po v√Ωbƒõru modelu v panelu "Nahran√© modely")

Doporuƒçen√≠: varianta (a) ‚Äî karty naho≈ôe jako prvn√≠ volba, proto≈æe preset ovliv≈àuje dostupn√© parametry.

**VIZU√ÅLN√ç PODOBA:** Karty vedle sebe v jednom ≈ô√°dku (horizont√°ln√≠ layout). Responsive ‚Äî na mal√Ωch obrazovk√°ch pod sebou. Ka≈æd√° karta: ikona (vlevo), n√°zev presetu (tuƒçnƒõ), popis (men≈°√≠ text pod n√°zvem). Hover efekt, selected state s prim√°rn√≠ barvou border/pozad√≠.

**D≈ÆLE≈ΩIT√â DETAILY:**

* Pokud admin nem√° presety viditeln√© ve widgetu, sekce se nezobraz√≠ v≈Øbec.  
* Pokud je jen jeden preset, m≈Ø≈æe se automaticky vybrat bez zobrazen√≠ karet.  
* V√Ωchoz√≠ vybran√Ω preset \= ten oznaƒçen√Ω jako "default" v adminu.  
* Zmƒõna presetu mus√≠ triggerovat p≈ôepoƒçet ceny (napojen√≠ na 1.1).

---

### **1.4 Odstranƒõn√≠ sekce V√Ωsledky slicingu**

**AKTU√ÅLN√ç STAV:** Na spodn√≠ ƒç√°sti kalkulaƒçky je sekce "V√Ωsledky slicingu" zobrazuj√≠c√≠ 4 metriky: Doba tisku (NaNh NaNmin ‚Äî nefunkƒçn√≠), Hmotnost (NaNg ‚Äî nefunkƒçn√≠), Vrstvy (pr√°zdn√©), Teplota (200¬∞C). Sekce je nefunkƒçn√≠ a dle u≈æivatele zbyteƒçn√°, proto≈æe tyto √∫daje jsou ji≈æ dostupn√© v panelu modelu vpravo (ƒåas tisku, Materi√°l/hmotnost).

**CO JE T≈òEBA UDƒöLAT:**

Odstranit celou sekci "V√Ωsledky slicingu" z frontend k√≥du kalkulaƒçky. Naj√≠t komponentu, kter√° renderuje tuto sekci (pravdƒõpodobnƒõ na konci konfiguraƒçn√≠ho kroku, pod sekc√≠ "Dodateƒçn√© slu≈æby"), a zcela ji odebrat.

**ALTERNATIVA (pokud by se √∫daje slicingu chtƒõly zachovat):** M√≠sto samostatn√© sekce integrovat relevantn√≠ data p≈ô√≠mo do panelu modelu vpravo, kde u≈æ jsou rozmƒõry, objem, povrch, ƒças tisku a materi√°l. P≈ôidat tam i poƒçet vrstev a teplotu (pokud jsou u≈æiteƒçn√© pro z√°kazn√≠ka). Ale dle zad√°n√≠ je preferov√°no √∫pln√© odstranƒõn√≠.

**D≈ÆLE≈ΩIT√â:** Ujistit se, ≈æe odstranƒõn√≠ nezlom√≠ ≈æ√°dnou logiku ‚Äî sekce by mƒõla b√Ωt ƒçistƒõ zobrazovac√≠ (read-only), tak≈æe smaz√°n√≠ by nemƒõlo ovlivnit v√Ωpoƒçetn√≠ pipeline.

---

## **SEKCE 2 ‚Äî Kontaktn√≠ formul√°≈ô a dokonƒçen√≠ objedn√°vky**

Tato sekce ≈ôe≈°√≠ chybƒõj√≠c√≠ krok pro dokonƒçen√≠ objedn√°vky ‚Äî z√°kazn√≠k aktu√°lnƒõ nem√° kam zadat sv√© kontaktn√≠ √∫daje, adresu doruƒçen√≠ ani pozn√°mku k objedn√°vce. Bez tohoto kroku nelze objedn√°vku re√°lnƒõ odeslat a zpracovat.

### **2.1 Formul√°≈ô z√°kaznick√Ωch √∫daj≈Ø**

**AKTU√ÅLN√ç STAV:** Kalkulaƒçka m√° 3 kroky: (1) Nahr√°n√≠ soubor≈Ø, (2) Konfigurace, (3) Kontrola a cena. Po kroku 3 je tlaƒç√≠tko "P≈ôej√≠t k v√Ωbƒõru tisk√°rny" ale chyb√≠ kompletn√≠ formul√°≈ô pro zad√°n√≠ kontaktn√≠ch √∫daj≈Ø z√°kazn√≠ka.

**CO JE T≈òEBA UDƒöLAT:**

**Nov√Ω krok v pr≈Øvodci:** P≈ôidat krok 4 "Kontaktn√≠ √∫daje" nebo roz≈°√≠≈ôit st√°vaj√≠c√≠ krok 3 "Kontrola a cena" o formul√°≈ô. Doporuƒçen√≠: roz≈°√≠≈ôit krok 3, proto≈æe z√°kazn√≠k uvid√≠ shrnut√≠ ceny a z√°rove≈à vypln√≠ √∫daje ‚Äî je to p≈ôirozenƒõj≈°√≠ flow.

**Formul√°≈ôov√° pole (povinn√°):**

* Jm√©no a p≈ô√≠jmen√≠ (text input)  
* E-mail (email input s validac√≠ form√°tu)  
* Telefon (tel input s validac√≠)

**Formul√°≈ôov√° pole (voliteln√° / zobraziteln√° dle nastaven√≠ admina):**

* Firma / IƒåO (pro B2B z√°kazn√≠ky)  
* Doruƒçovac√≠ adresa ‚Äî ulice, mƒõsto, PSƒå, zemƒõ (skupina pol√≠)  
* Fakturaƒçn√≠ adresa ‚Äî checkbox "Stejn√° jako doruƒçovac√≠" \+ mo≈ænost zadat jinou

**Admin konfigurace formul√°≈ôe:** V admin panelu (nov√° z√°lo≈æka nebo roz≈°√≠≈ôen√≠ Widget konfigurace) by mƒõl b√Ωt seznam pol√≠ formul√°≈ôe s mo≈ænost√≠: zapnout/vypnout pole, nastavit jako povinn√©/voliteln√©, zmƒõnit label/placeholder, zmƒõnit po≈ôad√≠ pol√≠. To umo≈æn√≠ ka≈æd√© firmƒõ p≈ôizp≈Øsobit formul√°≈ô sv√Ωm pot≈ôeb√°m (nap≈ô. B2C firma nepot≈ôebuje IƒåO, lok√°ln√≠ firma nepot≈ôebuje zemi).

**UM√çSTƒöN√ç V UI KALKULAƒåKY:** Na str√°nce kroku 3 "Kontrola a cena" ‚Äî pod shrnut√≠m objedn√°vky a cenou, p≈ôed tlaƒç√≠tkem odesl√°n√≠. Struktura: Shrnut√≠ objedn√°vky (naho≈ôe) ‚Üí Kontaktn√≠ formul√°≈ô (uprost≈ôed) ‚Üí Pozn√°mka (dole) ‚Üí Tlaƒç√≠tko "Odeslat objedn√°vku".

**VALIDACE:**

* Frontend validace v re√°ln√©m ƒçase (ƒçerven√Ω border, chybov√° hl√°≈°ka pod polem)  
* Backend validace p≈ôi odesl√°n√≠ (double-check)  
* Email ‚Äî regex \+ kontrola form√°tu  
* Telefon ‚Äî regex pro ƒçesk√©/mezin√°rodn√≠ form√°ty  
* Povinn√° pole ‚Äî nesm√≠ b√Ωt pr√°zdn√°

**D≈ÆLE≈ΩIT√â DETAILY:**

* Data z formul√°≈ôe se ulo≈æ√≠ k objedn√°vce do datab√°ze a zobraz√≠ v admin panelu v detailu objedn√°vky.  
* Pokud bude v budoucnu z√°kaznick√Ω port√°l (Sekce 12), p≈ôedvyplnit √∫daje z profilu p≈ôihl√°≈°en√©ho z√°kazn√≠ka.  
* GDPR compliance ‚Äî pod formul√°≈ôem checkbox "Souhlas√≠m se zpracov√°n√≠m osobn√≠ch √∫daj≈Ø" s odkazem na z√°sady ochrany soukrom√≠. Tento checkbox bude konfigurovateln√Ω v admin panelu (text, odkaz na str√°nku).

---

### **2.2 Pozn√°mka k objedn√°vce**

Textarea pole pod kontaktn√≠m formul√°≈ôem s placeholderem typu "Napi≈°te speci√°ln√≠ po≈æadavky, pozn√°mky k tisku nebo jin√© informace..." Maxim√°ln√≠ d√©lka: 1000 znak≈Ø. Poƒç√≠tadlo zb√Ωvaj√≠c√≠ch znak≈Ø vpravo dole. V admin panelu se pozn√°mka zobraz√≠ v detailu objedn√°vky. Voliteln√© pole ‚Äî nepovinn√©.

---

### **2.3 Shrnut√≠ objedn√°vky p≈ôed odesl√°n√≠m**

Na kroku 3 "Kontrola a cena" roz≈°√≠≈ôit st√°vaj√≠c√≠ panel shrnut√≠ o kompletn√≠ p≈ôehled objedn√°vky. Zobrazit:

* Seznam v≈°ech model≈Ø s n√°zvem, miniaturou, materi√°lem, presetem, barvou, mno≈æstv√≠m a cenou za model  
* Celkovou cenu se v≈°emi slo≈ækami (materi√°l, ƒças, slu≈æby, sleva, markup)  
* Vybran√© dodateƒçn√© slu≈æby  
* Doprava (jakmile bude implementov√°na, Sekce 4\)  
* Kontaktn√≠ √∫daje z√°kazn√≠ka (z formul√°≈ôe v√Ω≈°e)

Tlaƒç√≠tko "Odeslat objedn√°vku" s jasn√Ωm CTA stylem (prim√°rn√≠ barva, velk√©). Nad tlaƒç√≠tkem text "Kliknut√≠m odes√≠l√°te nez√°vaznou popt√°vku" nebo podobnƒõ (konfigurovateln√Ω text v adminu, z√°vis√≠ na tom zda firma chce z√°vazn√© objedn√°vky nebo nez√°vazn√© popt√°vky).

---

### **2.4 Potvrzovac√≠ str√°nka a email**

Po √∫spƒõ≈°n√©m odesl√°n√≠ objedn√°vky zobrazit potvrzovac√≠ str√°nku (krok 4 nebo overlay):

* Zelen√° ikona checkmarku  
* Text "Dƒõkujeme za Va≈°i objedn√°vku\!"  
* ƒå√≠slo objedn√°vky (referenƒçn√≠ k√≥d)  
* Shrnut√≠ co bude n√°sledovat ("Objedn√°vku nyn√≠ zpracov√°v√°me. Na email v√°m p≈ôijde potvrzen√≠.")  
* Odhadovan√Ω ƒças zpracov√°n√≠ (pokud je nastaven)

Z√°rove≈à odeslat potvrzovac√≠ email (z√°kladn√≠ implementace ‚Äî detailn√≠ emailov√Ω syst√©m viz Sekce 7\) s ƒç√≠slem objedn√°vky, shrnut√≠m model≈Ø a ceny, a kontaktem na firmu. Email odes√≠lat p≈ôes jednoduch√Ω SMTP nebo transactional email slu≈æbu (SendGrid, Resend, apod.).

---

## **SEKCE 3 ‚Äî Podpora v√≠ce form√°t≈Ø soubor≈Ø**

Tato sekce ≈ôe≈°√≠ roz≈°√≠≈ôen√≠ podporovan√Ωch 3D form√°t≈Ø. Aktu√°lnƒõ kalkulaƒçka p≈ôij√≠m√° pouze .stl soubory, co≈æ je omezuj√≠c√≠ ‚Äî konkurence podporuje .obj, .step/.stp, .3mf a dal≈°√≠. Zejm√©na .step form√°t je silnƒõ vy≈æadov√°n in≈æen√Ωry a pr≈Ømyslov√Ωmi z√°kazn√≠ky.

### **3.1 Podpora .obj, .3mf, .step/.stp**

**Backend:** Roz≈°√≠≈ôit upload endpoint o akceptov√°n√≠ nov√Ωch MIME typ≈Ø a p≈ô√≠pon (.obj, .3mf, .step, .stp).

**Pro .step/.stp soubory** je pot≈ôeba konverzn√≠ pipeline ‚Äî STEP je CAD form√°t, ne mesh form√°t, tak≈æe jej mus√≠ backend p≈ôev√©st na mesh (STL/OBJ) p≈ôed slicov√°n√≠m. Knihovny:

* OpenCASCADE (open source, C++)  
* FreeCAD Python API  
* Cloudov√° slu≈æba (CADExchanger API)

**Pro .3mf** ‚Äî tento form√°t PrusaSlicer nativnƒõ podporuje, tak≈æe by mƒõl fungovat p≈ô√≠mo.

**Pro .obj** ‚Äî Three.js i PrusaSlicer obj podporuj√≠, minim√°ln√≠ √∫pravy.

**Frontend upload:** Roz≈°√≠≈ôit drag-and-drop z√≥nu a file input accept atribut o nov√© p≈ô√≠pony. Aktualizovat text s popisem podporovan√Ωch form√°t≈Ø (nap≈ô. "Podporovan√© form√°ty: .stl, .obj, .3mf, .step, .stp"). Maxim√°ln√≠ velikost souboru: zachovat st√°vaj√≠c√≠ limit nebo zv√Ω≈°it (AutoQuote3D m√° 150 MB).

**PRIORITA FORM√ÅT≈Æ:**

1. .3mf (nejsnaz≈°√≠ ‚Äî PrusaSlicer native)  
2. .obj (snadn√© ‚Äî bƒõ≈æn√° podpora)  
3. .step/.stp (nejtƒõ≈æ≈°√≠ ‚Äî vy≈æaduje konverzn√≠ pipeline)

**D≈ÆLE≈ΩIT√â:** Konverze .step na mesh m≈Ø≈æe b√Ωt v√Ωpoƒçetnƒõ n√°roƒçn√°. Zv√°≈æit asynchronn√≠ zpracov√°n√≠ ‚Äî z√°kazn√≠k nahraje soubor, zobraz√≠ se "Zpracov√°v√°me v√°≈° model..." a po konverzi se zobraz√≠ 3D n√°hled a umo≈æn√≠ v√Ωpoƒçet ceny.

---

### **3.2 Validace a konverze nahran√Ωch soubor≈Ø**

**Backend validaƒçn√≠ pipeline po uploadu:**

* Kontrola p≈ô√≠pony a MIME typu  
* Kontrola, ≈æe soubor nen√≠ po≈°kozen√Ω (parsovateln√Ω)  
* Pro mesh soubory (.stl, .obj): kontrola integrity mesh (uzav≈ôen√Ω manifold, ≈æ√°dn√© d√≠ry)  
* Pro STEP soubory: kontrola, ≈æe soubor obsahuje validn√≠ geometrii  
* Extrakce z√°kladn√≠ch metadat: rozmƒõry (bounding box), objem, povrch, poƒçet troj√∫heln√≠k≈Ø/ploch  
* Konverze neSTL form√°t≈Ø na STL pro slicovac√≠ pipeline (pokud slicer neum√≠ form√°t nativnƒõ)  
* Ulo≈æen√≠ jak origin√°ln√≠ho souboru, tak konvertovan√©ho STL

**Chybov√© stavy:** soubor p≈ô√≠li≈° velk√Ω, nevalidn√≠ form√°t, po≈°kozen√Ω soubor, model p≈ô√≠li≈° mal√Ω/velk√Ω pro tisk√°rnu ‚Äî zobrazit u≈æivateli srozumitelnou chybovou hl√°≈°ku.

---

### **3.3 Aktualizace 3D prohl√≠≈æeƒçe pro nov√© form√°ty**

St√°vaj√≠c√≠ 3D prohl√≠≈æeƒç (pravdƒõpodobnƒõ Three.js) je pot≈ôeba roz≈°√≠≈ôit o loadery pro nov√© form√°ty.

**Three.js m√° dostupn√© loadery:**

* STLLoader (ji≈æ implementov√°no)  
* OBJLoader (three/examples/jsm/loaders/OBJLoader)  
* 3MFLoader (three/examples/jsm/loaders/3MFLoader)

**Pro STEP form√°t** Three.js nem√° nativn√≠ loader ‚Äî ≈ôe≈°en√≠:

* Zobrazit konvertovan√Ω STL/OBJ (z backend konverze) v prohl√≠≈æeƒçi  
* Nebo pou≈æ√≠t knihovnu opencascade.js (WebAssembly port OpenCASCADE)

Doporuƒçen√≠: pro jednoduchost zobrazovat v≈ædy konvertovan√Ω mesh, ne origin√°ln√≠ STEP.

## **SEKCE 4 ‚Äî Doprava a dodac√≠ lh≈Øty**

Tato sekce ≈ôe≈°√≠ p≈ôid√°n√≠ syst√©mu dopravy a dodac√≠ch lh≈Øt. Z√°kazn√≠k aktu√°lnƒõ nevid√≠ cenu dopravy ani odhadovan√Ω ƒças doruƒçen√≠, co≈æ je pro dokonƒçen√≠ objedn√°vky z√°sadn√≠.

### **4.1 Admin nastaven√≠ dopravn√≠ch metod a cen**

**Nov√° str√°nka v admin panelu:** Admin \> Doprava (nebo Admin \> Shipping). Um√≠stƒõn√≠ v navigaci: za str√°nku Fees, p≈ôed Orders.

**Struktura str√°nky:** Seznam dopravn√≠ch metod s mo≈ænost√≠ p≈ôid√°vat, editovat, mazat, ≈ôadit a aktivovat/deaktivovat.

**Ka≈æd√° dopravn√≠ metoda obsahuje:**

* N√°zev (nap≈ô. "ƒåesk√° po≈°ta", "Z√°silkovna", "PPL", "Osobn√≠ odbƒõr", "DPD")  
* Popis (kr√°tk√Ω text zobrazen√Ω z√°kazn√≠kovi)  
* Cena ‚Äî buƒè pevn√° ƒç√°stka (nap≈ô. 99 Kƒç), nebo kalkulovan√° dle hmotnosti/objemu (cenov√° tabulka: od X kg do Y kg \= Z Kƒç)  
* Zdarma od urƒçit√© ƒç√°stky objedn√°vky (nap≈ô. "Doprava zdarma od 1000 Kƒç")  
* Odhadovan√° doba doruƒçen√≠ v pracovn√≠ch dnech (rozsah, nap≈ô. 2-5 dn≈Ø)  
* Aktivn√≠/neaktivn√≠ p≈ôep√≠naƒç  
* Viditelnost ve widgetu (zobrazit/skr√Ωt)  
* Ikona/logo dopravce (voliteln√© ‚Äî upload obr√°zku)

**Speci√°ln√≠ typ "Osobn√≠ odbƒõr":**

* Adresa v√Ωdejn√≠ho m√≠sta (zobrazen√° z√°kazn√≠kovi)  
* Cena 0 Kƒç (nebo konfigurovateln√°)  
* Otev√≠rac√≠ doba (voliteln√© textov√© pole)

**Datab√°zov√Ω model:** Tabulka shipping\_methods s poli: id, tenant\_id, name, description, price\_type (FIXED/WEIGHT\_BASED), fixed\_price, weight\_tiers (JSON pole cenov√Ωch p√°sem), free\_above\_total, estimated\_days\_min, estimated\_days\_max, is\_active, sort\_order, icon\_url.

---

### **4.2 V√Ωbƒõr dopravy v kalkulaƒçce**

**Um√≠stƒõn√≠:** Na kroku 3 "Kontrola a cena", mezi shrnut√≠m objedn√°vky a kontaktn√≠m formul√°≈ôem (Sekce 2).

**Nov√° sekce "Zp≈Øsob doruƒçen√≠"** s radio buttony nebo kartami pro ka≈ædou aktivn√≠ dopravn√≠ metodu.

**Ka≈æd√° karta zobrazuje:**

* N√°zev dopravce  
* Ikonu/logo (pokud nastaveno)  
* Cenu dopravy (nebo "Zdarma" pokud splnƒõna podm√≠nka)  
* Odhadovanou dobu doruƒçen√≠ ("Doruƒçen√≠ za 2-5 pracovn√≠ch dn≈Ø")

**Integrace s cenou:**

* Vybran√° doprava se p≈ôiƒçte k celkov√© cenƒõ v panelu "Cena a souhrn"  
* V rozpisu ceny p≈ôidat nov√Ω ≈ô√°dek "Doprava: XX Kƒç"

**Pokud admin nem√° nastaven√© ≈æ√°dn√© dopravn√≠ metody, sekce se nezobraz√≠.**

---

### **4.3 Odhadovan√° dodac√≠ lh≈Øta**

**Kalkulace celkov√© dodac√≠ lh≈Øty:**

* V√Ωrobn√≠ ƒças (souƒçet tiskov√Ωch ƒças≈Ø v≈°ech model≈Ø \+ odhadovan√Ω ƒças post-processingu, pokud vybr√°n)  
* \\+ Doba doruƒçen√≠ dopravce

**Admin nastaven√≠:** V Admin \> Pricing nebo Admin \> Obecn√© p≈ôidat pole "V√Ωrobn√≠ buffer" ‚Äî poƒçet pracovn√≠ch dn≈Ø, kter√© firma p≈ôid√°v√° k ƒçist√©mu tiskov√©mu ƒçasu (ƒças na kontrolu, balen√≠ apod.).

**Zobrazen√≠ v kalkulaƒçce:**

* "Odhadovan√© doruƒçen√≠: DD.MM.YYYY \- DD.MM.YYYY" nebo "za X-Y pracovn√≠ch dn≈Ø"  
* Toto se zobrazuje na kroku 3 vedle vybran√© dopravn√≠ metody a na potvrzovac√≠ str√°nce po odesl√°n√≠ objedn√°vky

---

## **SEKCE 5 ‚Äî Mno≈æstevn√≠ slevy a cenov√° degrese**

Aktu√°lnƒõ kalkulaƒçka m√° pole "Poƒçet kus≈Ø" ale cena se jednodu≈°e n√°sob√≠ poƒçtem ‚Äî ≈æ√°dn√° degresivn√≠ sleva za vƒõt≈°√≠ mno≈æstv√≠.

### **5.1 Admin konfigurace cenov√Ωch p√°sem**

**Um√≠stƒõn√≠:** Admin \> Pricing ‚Äî nov√° z√°lo≈æka "Mno≈æstevn√≠ slevy" nebo nov√° sekce na st√°vaj√≠c√≠ str√°nce pod st√°vaj√≠c√≠m nastaven√≠m cenotvorby.

**Konfigurace cenov√Ωch p√°sem:** Tabulka s ≈ô√°dky definuj√≠c√≠mi slevov√° p√°sma. Ka≈æd√Ω ≈ô√°dek:

* Od (minim√°ln√≠ poƒçet kus≈Ø)  
* Do (maxim√°ln√≠ poƒçet kus≈Ø, nebo "neomezeno")  
* Sleva v % (procento slevy z ceny za kus)

**P≈ô√≠klad:**

* 1-4 kusy \= 0%  
* 5-9 kus≈Ø \= 5%  
* 10-24 kus≈Ø \= 10%  
* 25-49 kus≈Ø \= 15%  
* 50+ kus≈Ø \= 20%

Tlaƒç√≠tko "P≈ôidat p√°smo" pro p≈ôid√°n√≠ ≈ô√°dku. Drag-and-drop ≈ôazen√≠. Validace: p√°sma se nesm√≠ p≈ôekr√Ωvat, mus√≠ na sebe navazovat.

**Alternativn√≠ model:** M√≠sto procentu√°ln√≠ slevy pevn√° cena za kus v ka≈æd√©m p√°smu. Admin vybere model: PROCENTA nebo FIXN√ç CENA.

**Aplikace:** Slevy se aplikuj√≠ na √∫rovni modelu ‚Äî pokud z√°kazn√≠k objedn√° 10 kus≈Ø jednoho modelu a 2 kusy jin√©ho, sleva 10% se aplikuje jen na ten s 10 kusy. Nebo alternativnƒõ: celkov√Ω poƒçet kus≈Ø v objedn√°vce (admin volba).

**Datab√°zov√Ω model:** Tabulka quantity\_tiers: id, tenant\_id, min\_qty, max\_qty, discount\_percent (nebo fixed\_price\_per\_unit), is\_active. Nebo JSON pole v pricing konfiguraci tenanta.

---

### **5.2 Automatick√Ω v√Ωpoƒçet slevy v kalkulaƒçce**

**Backend cenotvorba:** Roz≈°√≠≈ôit pricing pipeline o krok mno≈æstevn√≠ slevy.

**Pipeline po≈ôad√≠:** base cena (materi√°l \+ ƒças) ‚Üí fees ‚Üí mno≈æstevn√≠ sleva ‚Üí markup ‚Üí minima ‚Üí zaokrouhlen√≠.

**P≈ôi v√Ωpoƒçtu ceny modelu:**

* Vz√≠t poƒçet kus≈Ø  
* Naj√≠t odpov√≠daj√≠c√≠ p√°smo  
* Aplikovat slevu

**V rozpisu ceny** (panel "Cena a souhrn") se sleva zobraz√≠ v ≈ô√°dku "Sleva" (aktu√°lnƒõ je tam "+ 0,00 Kƒç" ‚Äî naplnit skuteƒçnou hodnotou).

**Developer re≈æim:** Zobrazit detail ‚Äî kter√© p√°smo bylo aplikov√°no, procento slevy, p≈Øvodn√≠ cena vs. cena po slevƒõ.

---

### **5.3 Vizu√°ln√≠ indikace slevy pro z√°kazn√≠ka**

**Vedle pole "Poƒçet kus≈Ø" nebo pod n√≠m** zobrazit informaci o slevƒõ:

* "Objednejte 5+ kus≈Ø a z√≠skejte 5% slevu\!" (dynamicky dle nejbli≈æ≈°√≠ho vy≈°≈°√≠ho p√°sma)

**Pokud je sleva aktivn√≠:**

* Zobrazit badge/tag "Sleva \-10%" zelenƒõ u modelu v rozpisu

**V cenov√© sumarizaci:**

* Zobrazit p≈Øvodn√≠ cenu p≈ôe≈°krtnutƒõ a novou cenu vedle ‚Äî klasick√Ω e-commerce pattern

**Volitelnƒõ:** Pod polem mno≈æstv√≠ zobrazit mini tabulku v≈°ech p√°sem:

* "1-4 ks: pln√° cena | 5-9 ks: \-5% | 10+ ks: \-10%"  
* Aby z√°kazn√≠k vidƒõl motivaci objednat v√≠ce

---

## **SEKCE 6 ‚Äî Post-processing (n√°sledn√© zpracov√°n√≠)**

Tato sekce ≈ôe≈°√≠ p≈ôid√°n√≠ syst√©mu post-processing slu≈æeb ‚Äî brou≈°en√≠, le≈°tƒõn√≠, barven√≠, lakov√°n√≠, odstranƒõn√≠ support≈Ø a dal≈°√≠ch √∫prav po tisku. SeekMake toto nab√≠z√≠ komplexnƒõ, ModelPricer to zcela postr√°d√°.

### **6.1 Admin spr√°va post-processing slu≈æeb**

**POZN√ÅMKA:** Post-processing se do jist√© m√≠ry p≈ôekr√Ωv√° se st√°vaj√≠c√≠m syst√©mem Fees (Admin \> Fees), kter√Ω ji≈æ umo≈æ≈àuje vytv√°≈ôet p≈ô√≠platky na √∫rovni modelu/objedn√°vky. Rozd√≠l je v tom, ≈æe post-processing slu≈æby pot≈ôebuj√≠:

* Dedikovanou UI sekci v kalkulaƒçce (ne jen checkbox v "Dodateƒçn√© slu≈æby")  
* Vizu√°ln√≠ prezentaci (ikony, popisy, obr√°zky v√Ωsledku)  
* Vliv na dodac√≠ lh≈Øtu

**Mo≈æn√© ≈ôe≈°en√≠ A (Roz≈°√≠≈ôen√≠ st√°vaj√≠c√≠ch Fees):**

* P≈ôidat ke st√°vaj√≠c√≠mu syst√©mu Fees nov√Ω typ/kategorii "POST\_PROCESSING"  
* V admin Fees p≈ôi vytv√°≈ôen√≠ fee p≈ôidat checkbox "Je post-processing slu≈æba" nebo dropdown kategorie (P≈ô√≠platek / Post-processing / Expresn√≠)  
* Post-processing fees se v kalkulaƒçce zobraz√≠ v dedikovan√© sekci m√≠sto v "Dodateƒçn√© slu≈æby"  
* P≈ôidat nov√° pole ke fee: ikona, popis pro z√°kazn√≠ka, odhadovan√Ω ƒças zpracov√°n√≠ (dny), obr√°zek uk√°zky v√Ωsledku

**Mo≈æn√© ≈ôe≈°en√≠ B (Nov√° entita):**

* Vytvo≈ôit zcela nov√Ω model PostProcessingService nez√°visl√Ω na Fees  
* Nov√° admin str√°nka Admin \> Post-processing  
* To je ƒçist≈°√≠ oddƒõlen√≠ ale v√≠ce pr√°ce

**DOPORUƒåEN√ç:** ≈òe≈°en√≠ A ‚Äî roz≈°√≠≈ôen√≠ st√°vaj√≠c√≠ch Fees o kategorii. ≈†et≈ô√≠ ƒças implementace a vyu≈æ√≠v√° existuj√≠c√≠ logiku cenotvorby (podm√≠nky, typy, scope).

**Admin UI roz≈°√≠≈ôen√≠:**

* V Admin \> Fees p≈ôidat dropdown "Kategorie" (P≈ô√≠platek / Post-processing)  
* U post-processing fees p≈ôidat pole:  
  * Popis pro widget (del≈°√≠ text, 200 znak≈Ø)  
  * Ikona (v√Ωbƒõr z p≈ôeddefinovan√Ωch ikon nebo upload)  
  * ƒåas zpracov√°n√≠ v dnech (ƒç√≠slo ‚Äî p≈ôiƒçte se k odhadovan√© dodac√≠ lh≈Øtƒõ)  
  * Obr√°zek uk√°zky (voliteln√Ω upload)  
* Filtrov√°n√≠ fee seznamu dle kategorie

---

### **6.2 V√Ωbƒõr post-processingu v kalkulaƒçce**

**Um√≠stƒõn√≠ v kalkulaƒçce:** Nov√° dedikovan√° sekce "Povrchov√° √∫prava" nebo "Post-processing" v konfiguraƒçn√≠m kroku, pod sekc√≠ "Dodateƒçn√© slu≈æby" nebo m√≠sto n√≠ (a "Dodateƒçn√© slu≈æby" p≈ôejmenovat na obecn√© p≈ô√≠platky).

**Zobrazen√≠:** Karty nebo dla≈ædice (ne jen checkboxy) ‚Äî ka≈æd√° karta obsahuje:

* Ikonu  
* N√°zev slu≈æby  
* Kr√°tk√Ω popis  
* Cenu  
* Checkbox/toggle pro v√Ωbƒõr

**P≈ô√≠klady slu≈æeb:**

* Brou≈°en√≠ (+150 Kƒç, \+2 dny)  
* Le≈°tƒõn√≠ (+200 Kƒç, \+3 dny)  
* Barven√≠ (+300 Kƒç, \+3 dny)  
* Lakov√°n√≠ (+250 Kƒç, \+2 dny)  
* Odstranƒõn√≠ support≈Ø (+50 Kƒç, \+1 den)

---

### **6.3 Vliv na cenu a dodac√≠ lh≈Øtu**

**Vliv na cenu:**

* Cena post-processing se p≈ôiƒçte k celkov√© cenƒõ v sekci "Slu≈æby" v rozpisu  
* V Developer re≈æimu zobrazit detail: kter√© post-processing slu≈æby byly vybr√°ny a jejich cena

**Vliv na dodac√≠ lh≈Øtu:**

* ƒåas post-processingu (dny) se p≈ôiƒçte k odhadovan√© dodac√≠ lh≈Øtƒõ (Sekce 4.3)  
* P≈ôi v√Ωbƒõru post-processingu se dynamicky aktualizuje zobrazen√Ω odhadovan√Ω ƒças doruƒçen√≠  
* Upozornƒõn√≠: "Vybran√° povrchov√° √∫prava prodlou≈æ√≠ dod√°n√≠ o X dn√≠."

**SEKCE 7 ‚Äî E-mailov√© notifikace**

Komplexn√≠ syst√©m automatick√Ωch emailov√Ωch notifikac√≠ pro z√°kazn√≠ky i t√Ωm. Tato sekce je st≈ôednƒõ n√°roƒçn√° na implementaci ‚Äî vy≈æaduje emailov√Ω provider, ≈°ablonov√Ω syst√©m a integraci se stavov√Ωm strojem objedn√°vek.

### **7.1 ≈†ablony email≈Ø pro jednotliv√© stavy objedn√°vky**

**Emailov√© ≈°ablony nav√°zan√© na existuj√≠c√≠ statusy v Admin \> Orders:**

**1\. Nov√° objedn√°vka (ORDER\_CREATED)**

* **P≈ô√≠jemce:** Z√°kazn√≠k \+ Admin/t√Ωm  
* **P≈ôedmƒõt z√°kazn√≠k:** "Potvrzen√≠ objedn√°vky \#{{order\_id}}"  
* **P≈ôedmƒõt admin:** "Nov√° objedn√°vka \#{{order\_id}} od {{customer\_name}}"  
* **Obsah:** Shrnut√≠ objedn√°vky, seznam model≈Ø, celkov√° cena, kontaktn√≠ √∫daje z√°kazn√≠ka, dal≈°√≠ kroky

**2\. Kontrola (ORDER\_REVIEW)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Va≈°e objedn√°vka \#{{order\_id}} se kontroluje"  
* **Obsah:** Informace ≈æe objedn√°vka byla p≈ôijata a prob√≠h√° kontrola model≈Ø, odhadovan√Ω ƒças kontroly

**3\. Schv√°leno (ORDER\_APPROVED)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Objedn√°vka \#{{order\_id}} schv√°lena ‚Äî zaƒç√≠n√°me v√Ωrobu"  
* **Obsah:** Potvrzen√≠ schv√°len√≠, oƒçek√°van√Ω term√≠n dokonƒçen√≠, informace o platbƒõ (pokud aplikovateln√©)

**4\. Tiskne se (ORDER\_PRINTING)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Va≈°e objedn√°vka \#{{order\_id}} se pr√°vƒõ tiskne üñ®Ô∏è"  
* **Obsah:** V√Ωroba zah√°jena, odhadovan√Ω ƒças dokonƒçen√≠ tisku

**5\. Postprocess (ORDER\_POSTPROCESS)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Objedn√°vka \#{{order\_id}} ‚Äî prob√≠h√° povrchov√° √∫prava"  
* **Obsah:** Tisk dokonƒçen, prob√≠h√° post-processing (brou≈°en√≠, lakov√°n√≠...), odhadovan√Ω ƒças

**6\. P≈ôipraveno (ORDER\_READY)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Objedn√°vka \#{{order\_id}} je p≈ôipravena\! ‚úÖ"  
* **Obsah:** Objedn√°vka hotov√°, informace o expedici/vyzvednut√≠, platebn√≠ √∫daje (pokud platba na dob√≠rku)

**7\. Odesl√°no (ORDER\_SHIPPED)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Objedn√°vka \#{{order\_id}} byla odesl√°na üì¶"  
* **Obsah:** Tracking ƒç√≠slo, dopravce, odkaz na sledov√°n√≠ z√°silky, odhadovan√© doruƒçen√≠

**8\. Hotovo (ORDER\_COMPLETED)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Dƒõkujeme za objedn√°vku \#{{order\_id}}\!"  
* **Obsah:** Podƒõkov√°n√≠, ≈æ√°dost o recenzi/feedback, odkaz na z√°kaznick√Ω port√°l, pozv√°nka k dal≈°√≠ objedn√°vce

**9\. Zru≈°eno (ORDER\_CANCELLED)**

* **P≈ô√≠jemce:** Z√°kazn√≠k  
* **P≈ôedmƒõt:** "Objedn√°vka \#{{order\_id}} byla zru≈°ena"  
* **Obsah:** D≈Øvod zru≈°en√≠, informace o refundu (pokud aplikovateln√©), kontakt pro dotazy

**Technologie ≈°ablon:**

**HTML emailov√© ≈°ablony s promƒõnn√Ωmi (template variables):**

html  
\<\!DOCTYPE html\>  
\<html\>  
\<head\>  
  \<style\>  
    */\* Inline CSS pro emailov√© klienty \*/*  
    .container { max-width: 600px; margin: 0 auto; font-family: Arial, sans-serif; }  
    .header { background: {{primary\_color}}; padding: 20px; text-align: center; }  
    .logo { max-height: 50px; }  
    .content { padding: 30px; }  
    .order-summary { background: \#f5f5f5; padding: 20px; border-radius: 8px; }  
    .button { background: {{primary\_color}}; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; }  
    .footer { padding: 20px; text-align: center; color: \#666; font-size: 12px; }  
  \</style\>  
\</head\>  
\<body\>  
  \<div class\="container"\>  
    \<div class\="header"\>  
      \<img src\="{{company\_logo}}" alt\="{{company\_name}}" class\="logo"\>  
    \</div\>  
      
    \<div class\="content"\>  
      \<h1\>Dobr√Ω den, {{customer\_name}}\!\</h1\>  
        
      \<p\>Va≈°e objedn√°vka \<strong\>\#{{order\_id}}\</strong\> byla p≈ôijata.\</p\>  
        
      \<div class\="order-summary"\>  
        \<h3\>Shrnut√≠ objedn√°vky\</h3\>  
        {{\#each order\_items}}  
        \<div class\="item"\>  
          \<span\>{{this.name}}\</span\>  
          \<span\>{{this.quantity}}√ó {{this.price}} Kƒç\</span\>  
        \</div\>  
        {{/each}}  
        \<hr\>  
        \<div class\="total"\>  
          \<strong\>Celkem: {{order\_total}} Kƒç\</strong\>  
        \</div\>  
      \</div\>  
        
      \<p\>O dal≈°√≠m postupu v√°s budeme informovat emailem.\</p\>  
        
      \<a href\="{{order\_tracking\_url}}" class\="button"\>Sledovat objedn√°vku\</a\>  
    \</div\>  
      
    \<div class\="footer"\>  
      \<p\>{{company\_name}} | {{company\_address}}\</p\>  
      \<p\>{{company\_email}} | {{company\_phone}}\</p\>  
    \</div\>  
  \</div\>  
\</body\>  
\</html\>  
\`\`\`

\*\*Dostupn√© promƒõnn√©:\*\*  
\`\`\`  
// Z√°kazn√≠k  
{{customer\_name}}  
{{customer\_email}}  
{{customer\_phone}}

// Objedn√°vka  
{{order\_id}}  
{{order\_date}}  
{{order\_total}}  
{{order\_items}} ‚Äî pole polo≈æek  
{{order\_status}}  
{{order\_tracking\_url}}

// Doprava  
{{shipping\_method}}  
{{shipping\_price}}  
{{tracking\_number}}  
{{tracking\_url}}  
{{estimated\_delivery}}

// Firma  
{{company\_name}}  
{{company\_logo}}  
{{company\_email}}  
{{company\_phone}}  
{{company\_address}}  
{{primary\_color}}  
\`\`\`

\*\*Knihovny pro emailov√© ≈°ablony:\*\*  
\- \*\*React Email\*\* ‚Äî komponenty pro emaily, modern√≠, TypeScript  
\- \*\*MJML\*\* ‚Äî markup jazyk pro responzivn√≠ emaily, kompiluje do HTML  
\- \*\*Handlebars\*\* ‚Äî ≈°ablonovac√≠ engine s promƒõnn√Ωmi a podm√≠nkami  
\- \*\*Liquid\*\* ‚Äî podobn√© Handlebars, pou≈æ√≠v√° Shopify

\*\*Email provider (transactional email slu≈æba):\*\*  
\- \*\*Resend\*\* ‚Äî modern√≠, v√Ωvoj√°≈ôsky p≈ô√≠vƒõtiv√© API, free tier 100 email≈Ø/den, doporuƒçeno  
\- \*\*SendGrid\*\* ‚Äî robustn√≠, ≈°k√°lovateln√Ω, free tier 100 email≈Ø/den  
\- \*\*Amazon SES\*\* ‚Äî nejlevnƒõj≈°√≠ pro velk√© objemy, slo≈æitƒõj≈°√≠ setup  
\- \*\*Postmark\*\* ‚Äî zamƒõ≈ôen√Ω na doruƒçitelnost, dra≈æ≈°√≠  
\- \*\*Mailgun\*\* ‚Äî dobr√Ω pomƒõr cena/v√Ωkon

\---

\#\#\# 7.2 Admin konfigurace notifikac√≠

\*\*Nov√° str√°nka Admin \> Notifikace (nebo Admin \> E-maily):\*\*

\*\*Struktura str√°nky:\*\*

\*\*Z√°lo≈æka 1: ≈†ablony\*\*  
Seznam v≈°ech emailov√Ωch ≈°ablon:  
| N√°zev | Stav objedn√°vky | P≈ô√≠jemce | Aktivn√≠ | Akce |  
|-------|-----------------|----------|---------|------|  
| Nov√° objedn√°vka | ORDER\_CREATED | Z√°kazn√≠k | ‚úÖ | Upravit |  
| Nov√° objedn√°vka (admin) | ORDER\_CREATED | T√Ωm | ‚úÖ | Upravit |  
| Kontrola | ORDER\_REVIEW | Z√°kazn√≠k | ‚úÖ | Upravit |  
| ... | ... | ... | ... | ... |

\*\*Editor ≈°ablony (po kliknut√≠ na "Upravit"):\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ ≈†ablona: Nov√° objedn√°vka                                    ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ                                                             ‚îÇ  
‚îÇ Aktivn√≠: \[‚úì\]                                               ‚îÇ  
‚îÇ                                                             ‚îÇ  
‚îÇ P≈ôedmƒõt:                                                    ‚îÇ  
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  
‚îÇ ‚îÇ Potvrzen√≠ objedn√°vky \#{{order\_id}}                      ‚îÇ ‚îÇ  
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  
‚îÇ                                                             ‚îÇ  
‚îÇ Obsah:                                                      ‚îÇ  
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  
‚îÇ ‚îÇ \[WYSIWYG EDITOR / HTML EDITOR\]                          ‚îÇ ‚îÇ  
‚îÇ ‚îÇ                                                         ‚îÇ ‚îÇ  
‚îÇ ‚îÇ Dobr√Ω den, {{customer\_name}}\!                          ‚îÇ ‚îÇ  
‚îÇ ‚îÇ                                                         ‚îÇ ‚îÇ  
‚îÇ ‚îÇ Va≈°e objedn√°vka \#{{order\_id}} byla p≈ôijata...          ‚îÇ ‚îÇ  
‚îÇ ‚îÇ                                                         ‚îÇ ‚îÇ  
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  
‚îÇ                                                             ‚îÇ  
‚îÇ Dostupn√© promƒõnn√©: \[?\]                                     ‚îÇ  
‚îÇ {{customer\_name}}, {{order\_id}}, {{order\_total}}...        ‚îÇ  
‚îÇ                                                             ‚îÇ  
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ  
‚îÇ ‚îÇ N√°hled üëÅÔ∏è  ‚îÇ  ‚îÇ Odeslat test email  ‚îÇ                   ‚îÇ  
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ  
‚îÇ                                                             ‚îÇ  
‚îÇ         \[ Ulo≈æit zmƒõny \]     \[ Zru≈°it \]                    ‚îÇ  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  
\`\`\`

\*\*N√°hled emailu:\*\*  
\- Modal s renderovan√Ωm emailem  
\- P≈ôep√≠naƒç Desktop / Mobile view  
\- Testovac√≠ data (mock objedn√°vka)

\*\*Odeslat testovac√≠ email:\*\*  
\- Input pro email adresu  
\- Ode≈°le email s testovac√≠mi daty  
\- Potvrzen√≠ "Email odesl√°n na xyz@example.com"

\*\*Z√°lo≈æka 2: Glob√°ln√≠ nastaven√≠\*\*

\*\*Email provider konfigurace:\*\*  
\`\`\`  
Provider: \[ Resend ‚ñº \]

API kl√≠ƒç: \[‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\] \[Zobrazit\]

Odes√≠latel:  
  Jm√©no: \[ ModelPricer s.r.o.        \]  
  Email: \[ objednavky@firma.cz       \]

Reply-to: \[ info@firma.cz            \]

\[ Otestovat p≈ôipojen√≠ \]  
\`\`\`

\*\*Branding email≈Ø:\*\*  
\- Logo v emailu: \[Pou≈æ√≠t logo z Admin \> Branding\] nebo \[Nahr√°t jin√©\]  
\- Prim√°rn√≠ barva: \[Pou≈æ√≠t z Branding\] nebo \[Vlastn√≠\]  
\- Patiƒçka emailu:  
\`\`\`  
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
  ‚îÇ {{company\_name}}                                        ‚îÇ  
  ‚îÇ {{company\_address}}                                     ‚îÇ  
  ‚îÇ Email: {{company\_email}} | Tel: {{company\_phone}}      ‚îÇ  
  ‚îÇ                                                         ‚îÇ  
  ‚îÇ \[Odhl√°sit se z odbƒõru\]                                 ‚îÇ

  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Z√°lo≈æka 3: Log odeslan√Ωch email≈Ø**

Tabulka s histori√≠:

| Datum | P≈ô√≠jemce | P≈ôedmƒõt | Stav | Objedn√°vka |
| ----- | ----- | ----- | ----- | ----- |
| 15.1. 10:30 | jan@example.com | Potvrzen√≠ objedn√°vky \#1234 | ‚úÖ Doruƒçeno | \#1234 |
| 15.1. 10:25 | anna@test.cz | Objedn√°vka odesl√°na | ‚è≥ Odesl√°no | \#1233 |
| 15.1. 09:15 | bad@email | Nov√° objedn√°vka | ‚ùå Nedoruƒçeno | \#1232 |

Filtry: obdob√≠, stav (v≈°echny/doruƒçen√©/nedoruƒçen√©), p≈ô√≠jemce, objedn√°vka

---

### **7.3 Automatick√© odes√≠l√°n√≠ p≈ôi zmƒõnƒõ stavu**

**Backend integrace:**

**Hook p≈ôi zmƒõnƒõ stavu objedn√°vky:**

typescript  
*// V service/controlleru objedn√°vek*  
async function updateOrderStatus(orderId: string, newStatus: OrderStatus) {  
  const order \= await orderRepository.findById(orderId);  
  const oldStatus \= order.status;  
    
  *// Update stavu*  
  order.status \= newStatus;  
  await orderRepository.save(order);  
    
  *// Trigger emailov√© notifikace*  
  await emailNotificationService.onOrderStatusChange(order, oldStatus, newStatus);  
    
  *// Trigger dal≈°√≠ch akc√≠ (generov√°n√≠ dokument≈Ø, webhooky...)*  
  await eventBus.emit('order.status\_changed', { order, oldStatus, newStatus });

}

**Email notification service:**

typescript  
class EmailNotificationService {  
  async onOrderStatusChange(order: Order, oldStatus: string, newStatus: string) {  
    *// Naj√≠t aktivn√≠ ≈°ablonu pro dan√Ω stav*  
    const template \= await templateRepository.findByStatusAndTenant(  
      newStatus,   
      order.tenantId,  
      { active: true }  
    );  
      
    if (\!template) {  
      return; *// ≈Ω√°dn√° aktivn√≠ ≈°ablona pro tento stav*  
    }  
      
    *// P≈ôipravit data pro ≈°ablonu*  
    const templateData \= {  
      customer\_name: order.customer.name,  
      customer\_email: order.customer.email,  
      order\_id: order.referenceNumber,  
      order\_total: formatCurrency(order.total),  
      order\_items: order.items.map(item \=\> ({  
        name: item.model.name,  
        quantity: item.quantity,  
        price: formatCurrency(item.price)  
      })),  
      tracking\_number: order.trackingNumber,  
      company\_name: order.tenant.companyName,  
      company\_logo: order.tenant.logoUrl,  
      *// ... dal≈°√≠ promƒõnn√©*  
    };  
      
    *// Renderovat ≈°ablonu*  
    const html \= await renderTemplate(template.content, templateData);  
    const subject \= renderTemplate(template.subject, templateData);  
      
    *// Odeslat email*  
    await emailProvider.send({  
      to: order.customer.email,  
      from: order.tenant.emailSettings.fromEmail,  
      fromName: order.tenant.emailSettings.fromName,  
      subject: subject,  
      html: html  
    });  
      
    *// Zalogovat*  
    await emailLogRepository.create({  
      orderId: order.id,  
      templateId: template.id,  
      recipient: order.customer.email,  
      subject: subject,  
      status: 'sent',  
      sentAt: new Date()  
    });  
  }

}

**Datab√°zov√Ω model:**

sql  
*\-- Emailov√© ≈°ablony*  
CREATE TABLE email\_templates (  
  id UUID PRIMARY KEY,  
  tenant\_id UUID REFERENCES tenants(id),  
  name VARCHAR(100) NOT NULL,  
  trigger\_status VARCHAR(50), *\-- ORDER\_CREATED, ORDER\_SHIPPED, etc.*  
  recipient\_type VARCHAR(20), *\-- CUSTOMER, ADMIN, BOTH*  
  subject VARCHAR(255) NOT NULL,  
  content TEXT NOT NULL, *\-- HTML s promƒõnn√Ωmi*  
  is\_active BOOLEAN DEFAULT true,  
  created\_at TIMESTAMP DEFAULT NOW(),  
  updated\_at TIMESTAMP DEFAULT NOW()  
);

*\-- Log odeslan√Ωch email≈Ø*  
CREATE TABLE email\_logs (  
  id UUID PRIMARY KEY,  
  tenant\_id UUID REFERENCES tenants(id),  
  template\_id UUID REFERENCES email\_templates(id),  
  order\_id UUID REFERENCES orders(id),  
  recipient VARCHAR(255) NOT NULL,  
  subject VARCHAR(255),  
  status VARCHAR(20), *\-- sent, delivered, bounced, failed*  
  provider\_message\_id VARCHAR(100), *\-- ID z email provideru*  
  opened\_at TIMESTAMP, *\-- Tracking pixel*  
  clicked\_at TIMESTAMP, *\-- Link tracking*  
  error\_message TEXT,  
  sent\_at TIMESTAMP DEFAULT NOW()  
);

CREATE INDEX idx\_email\_logs\_order ON email\_logs(order\_id);

CREATE INDEX idx\_email\_logs\_tenant\_sent ON email\_logs(tenant\_id, sent\_at);

---

## **SEKCE 8 ‚Äî Kontrola tisknutelnosti a chytr√° manipulace s modely**

Tato sekce je technicky n√°roƒçnƒõj≈°√≠ ‚Äî vy≈æaduje anal√Ωzu 3D geometrie na backendu. Layers.app nab√≠z√≠ printability check (tlou≈°≈•ka stƒõn, mesh integrita, bounding box). Z√°kazn√≠ci z f√≥r silnƒõ ≈æ√°daj√≠ DFM zpƒõtnou vazbu.

### **8.1 Printability check (tlou≈°≈•ka stƒõn, mesh integrita, bounding box)**

**Backend anal√Ωza po uploadu modelu:**

**1\. Mesh integrita (Watertight/Manifold check):**

* **Co kontroluje:** Je mesh uzav≈ôen√Ω? Nem√° d√≠ry, otev≈ôen√© hrany, obr√°cen√© norm√°ly?  
* **Proƒç d≈Øle≈æit√©:** Neuzav≈ôen√Ω mesh m≈Ø≈æe zp≈Øsobit probl√©my p≈ôi slicov√°n√≠ a tisku  
* **V√Ωsledek:** OK / Warning / Error  
* **Zpr√°va:** "Model je v po≈ô√°dku" / "Model m√° otev≈ôen√© hrany ‚Äî m≈Ø≈æe zp≈Øsobit probl√©my p≈ôi tisku" / "Model nelze vytisknout ‚Äî kritick√© chyby v geometrii"

**2\. Tlou≈°≈•ka stƒõn (Wall thickness):**

* **Co kontroluje:** Minim√°ln√≠ tlou≈°≈•ka stƒõn v modelu  
* **Proƒç d≈Øle≈æit√©:** P≈ô√≠li≈° tenk√© stƒõny (\< 0.4-0.8mm pro FDM) nelze vytisknout nebo budou k≈ôehk√©  
* **V√Ωsledek:** Minim√°ln√≠ nalezen√° tlou≈°≈•ka v mm  
* **Zpr√°va:** "Nƒõkter√© stƒõny jsou tenƒç√≠ ne≈æ {{min\_thickness}}mm ‚Äî mohou b√Ωt k≈ôehk√© nebo se nevytisknout"

**3\. Bounding box check:**

* **Co kontroluje:** Porovn√°n√≠ rozmƒõr≈Ø modelu s maxim√°ln√≠m tiskov√Ωm objemem tisk√°rny  
* **Konfigurace:** Admin nastav√≠ max. rozmƒõry tisk√°rny (X, Y, Z v mm)  
* **V√Ωsledek:** OK / Warning (bl√≠zko limitu) / Error (p≈ôesahuje)  
* **Zpr√°va:** "Model p≈ôesahuje tiskov√Ω objem tisk√°rny (max. {{max\_x}} √ó {{max\_y}} √ó {{max\_z}} mm)"

**4\. Poƒçet d√≠l≈Ø (Part count):**

* **Co kontroluje:** Obsahuje soubor v√≠ce oddƒõlen√Ωch tƒõles?  
* **Proƒç d≈Øle≈æit√©:** V√≠ce d√≠l≈Ø v jednom souboru m≈Ø≈æe b√Ωt z√°mƒõr nebo chyba  
* **V√Ωsledek:** Poƒçet oddƒõlen√Ωch tƒõles  
* **Zpr√°va:** "Soubor obsahuje {{count}} oddƒõlen√Ωch d√≠l≈Ø ‚Äî budou vyti≈°tƒõny spoleƒçnƒõ"

**5\. Objem a v√°ha:**

* **Co kontroluje:** Celkov√Ω objem modelu a odhadovan√° hmotnost  
* **V√Ωsledek:** Objem v cm¬≥, hmotnost v gramech  
* **Zpr√°va:** Informativn√≠, zobrazeno v detailu modelu

**Knihovny pro anal√Ωzu:**

**Python:**

python  
import trimesh

def analyze\_model(file\_path):  
    mesh \= trimesh.load(file\_path)  
      
    analysis \= {  
        *\# Z√°kladn√≠ metriky*  
        'volume': mesh.volume,  *\# cm¬≥*  
        'surface\_area': mesh.area,  *\# cm¬≤*  
        'bounding\_box': mesh.bounding\_box.extents.tolist(),  *\# \[x, y, z\] mm*  
        'triangle\_count': len(mesh.faces),  
          
        *\# Mesh integrita*  
        'is\_watertight': mesh.is\_watertight,  
        'is\_winding\_consistent': mesh.is\_winding\_consistent,  
        'euler\_number': mesh.euler\_number,  
          
        *\# Poƒçet d√≠l≈Ø*  
        'body\_count': len(mesh.split(only\_watertight\=False)),  
          
        *\# Probl√©my*  
        'issues': \[\]  
    }  
      
    *\# Kontrola watertight*  
    if not mesh.is\_watertight:  
        analysis\['issues'\].append({  
            'type': 'MESH\_NOT\_WATERTIGHT',  
            'severity': 'WARNING',  
            'message': 'Model m√° otev≈ôen√© hrany nebo d√≠ry'  
        })  
      
    *\# Kontrola bounding boxu (p≈ô√≠klad: max 250x210x210mm)*  
    max\_dimensions \= \[250, 210, 210\]  
    for i, (dim, max\_dim) in enumerate(zip(analysis\['bounding\_box'\], max\_dimensions)):  
        if dim \> max\_dim:  
            analysis\['issues'\].append({  
                'type': 'EXCEEDS\_BUILD\_VOLUME',  
                'severity': 'ERROR',  
                'message': f'Model p≈ôesahuje tiskov√Ω objem (osa {"XYZ"\[i\]}: {dim:.1f}mm \> {max\_dim}mm)'  
            })  
      
    return analysis  
\`\`\`

\*\*Alternativn√≠ n√°stroje:\*\*  
\- \*\*admesh\*\* ‚Äî C knihovna pro STL anal√Ωzu a opravu  
\- \*\*PrusaSlicer CLI\*\* ‚Äî \`\--check\-model\` flag pro kontrolu  
\- \*\*MeshLab\*\* ‚Äî skriptovateln√Ω, ale tƒõ≈æ≈°√≠ integrace  
\- \*\*OpenCASCADE\*\* ‚Äî pro STEP soubory

\*\*Asynchronn√≠ zpracov√°n√≠:\*\*  
\`\`\`  
1\. Z√°kazn√≠k nahraje soubor  
2\. Soubor se ulo≈æ√≠, vr√°t√≠ se ID  
3\. Backend spust√≠ anal√Ωzu na pozad√≠ (queue job)  
4\. Frontend polluje stav nebo ƒçek√° na WebSocket notifikaci  
5\. Po dokonƒçen√≠ anal√Ωzy se zobraz√≠ v√Ωsledky  
\`\`\`

\*\*Zobrazen√≠ ve widgetu:\*\*

\*\*V panelu modelu (pod rozmƒõry, objemem, povrchem):\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ üìä Kontrola tisknutelnosti              ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ ‚úÖ Mesh integrita: V po≈ô√°dku            ‚îÇ  
‚îÇ ‚úÖ Rozmƒõry: 45 √ó 30 √ó 20 mm            ‚îÇ  
‚îÇ ‚ö†Ô∏è Tenk√© stƒõny: min. 0.6mm             ‚îÇ  
‚îÇ    ‚îî‚îÄ Nƒõkter√© detaily mohou b√Ωt k≈ôehk√© ‚îÇ  
‚îÇ ‚ÑπÔ∏è Poƒçet d√≠l≈Ø: 1                        ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ \[ Zobrazit detaily \]                    ‚îÇ  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  
\`\`\`

\*\*Barevn√© k√≥dov√°n√≠:\*\*  
\- ‚úÖ Zelen√°: V po≈ô√°dku  
\- ‚ö†Ô∏è ≈Ωlut√°: Varov√°n√≠ (tisk mo≈æn√Ω, ale s omezen√≠mi)  
\- ‚ùå ƒåerven√°: Chyba (tisk nen√≠ mo≈æn√Ω nebo vysoce problematick√Ω)

\---

*\#\#\# 8.2 Automatick√° detekce jednotek a scale*

\*\*Probl√©m:\*\* STL soubory nemaj√≠ definovanou jednotku. Nƒõkter√© modely jsou v mm, jin√© v inches, cm, nebo metrech. Z√°kazn√≠k nahraje model a rozmƒõry jsou nesmysln√©.

\*\*Heuristika pro detekci:\*\*

\*\*P≈ô√≠li≈° mal√Ω model (pravdƒõpodobnƒõ inches ‚Üí mm):\*\*  
\- Pokud bounding box \< 1mm ve v≈°ech os√°ch  
\- Nab√≠dnout: "Rozmƒõry se zdaj√≠ mal√©. Je model v palc√≠ch?"  
\- Konverze: √ó 25.4

\*\*P≈ô√≠li≈° velk√Ω model (pravdƒõpodobnƒõ metry ‚Üí mm nebo cm ‚Üí mm):\*\*  
\- Pokud bounding box \> 1000mm v jak√©koliv ose  
\- Nab√≠dnout: "Rozmƒõry se zdaj√≠ velk√©. Je model v metrech nebo centimetrech?"  
\- Konverze: √ó 0.001 (m‚Üímm) nebo √ó 10 (cm‚Üímm)

\*\*UI dialog p≈ôi detekci probl√©mu:\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ ‚ö†Ô∏è Neobvykl√© rozmƒõry modelu                        ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ                                                     ‚îÇ  
‚îÇ Rozmƒõry va≈°eho modelu: 0.5 √ó 0.5 √ó 1.0             ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ To se zd√° b√Ωt velmi mal√©. V jak√Ωch jednotk√°ch     ‚îÇ  
‚îÇ je v√°≈° model?                                       ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ ‚óã Milimetry (0.5 √ó 0.5 √ó 1.0 mm) ‚Äî ponechat       ‚îÇ  
‚îÇ ‚óè Palce (12.7 √ó 12.7 √ó 25.4 mm) ‚Äî p≈ôepoƒç√≠tat      ‚îÇ  
‚îÇ ‚óã Centimetry (5 √ó 5 √ó 10 mm) ‚Äî p≈ôepoƒç√≠tat         ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ              \[ Potvrdit \]                           ‚îÇ  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  
\`\`\`

\*\*Po v√Ωbƒõru:\*\*  
\- P≈ôepoƒç√≠tat rozmƒõry, objem, povrch  
\- P≈ôepoƒç√≠tat cenu  
\- Ulo≈æit zvolenou jednotku k modelu (pro budouc√≠ referenci)

\*\*Automatick√© ≈°k√°lov√°n√≠:\*\*  
\- Voliteln√° funkce: "P≈ôizp≈Øsobit velikosti tisk√°rny"  
\- Pokud model p≈ôesahuje tiskov√Ω objem, nab√≠dnout automatick√© zmen≈°en√≠  
\- Zobrazit nov√© rozmƒõry a pomƒõr zmen≈°en√≠ (nap≈ô. "Zmen≈°eno na 85%")

\---

*\#\#\# 8.3 DFM zpƒõtn√° vazba pro z√°kazn√≠ka ve widgetu*

\*\*DFM (Design for Manufacturing)\*\* ‚Äî tipy specifick√© pro FDM tisk, kter√© pomohou z√°kazn√≠kovi optimalizovat model.

\*\*Typy DFM zpƒõtn√© vazby:\*\*

\*\*1\. Orientace a supporty:\*\*  
\- Detekce p≈ôevis≈Ø \> 45¬∞  
\- Zpr√°va: "Model obsahuje p≈ôevisy, kter√© vy≈æaduj√≠ podpƒõry. Zva≈æte otoƒçen√≠ modelu pro minimalizaci support≈Ø."  
\- Vizualizace: zv√Ωraznƒõn√≠ problematick√Ωch ploch v 3D prohl√≠≈æeƒçi (ƒçervenƒõ)

\*\*2\. Tenk√© v√Ωƒçnƒõlky:\*\*  
\- Detekce tenk√Ωch vertik√°ln√≠ch prvk≈Ø  
\- Zpr√°va: "Tenk√© v√Ωƒçnƒõlky (\< 1mm) mohou b√Ωt k≈ôehk√© a n√°chyln√© k zlomen√≠."

\*\*3\. Velk√© rovn√© plochy:\*\*  
\- Detekce velk√Ωch horizont√°ln√≠ch ploch u z√°kladny  
\- Zpr√°va: "Velk√° rovn√° plocha u podlo≈æky m≈Ø≈æe zp≈Øsobit warping. Doporuƒçujeme pou≈æ√≠t brim."

\*\*4\. Mal√© d√≠ry:\*\*  
\- Detekce dƒõr men≈°√≠ch ne≈æ pr≈Ømƒõr trysky  
\- Zpr√°va: "Mal√© d√≠ry (\< 0.5mm) se nemus√≠ vytisknout spr√°vnƒõ."

\*\*5\. Ostr√© rohy:\*\*  
\- Detekce ostr√Ωch vnit≈ôn√≠ch roh≈Ø  
\- Zpr√°va: "Ostr√© vnit≈ôn√≠ rohy mohou koncentrovat napƒõt√≠. Zva≈æte p≈ôid√°n√≠ zaoblen√≠."

\*\*Zobrazen√≠ ve widgetu:\*\*

\*\*Sekce "Tipy pro lep≈°√≠ tisk" (pod kontrolou tisknutelnosti):\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ üí° Tipy pro lep≈°√≠ tisk                              ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ                                                     ‚îÇ  
‚îÇ üîÑ Orientace                                        ‚îÇ  
‚îÇ    Model obsahuje p≈ôevisy vy≈æaduj√≠c√≠ podpƒõry.      ‚îÇ  
‚îÇ    \[ Zobrazit problematick√© oblasti \]               ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ üìè Tenk√© ƒç√°sti                                      ‚îÇ  
‚îÇ    Nƒõkter√© detaily jsou tenƒç√≠ ne≈æ 1mm.             ‚îÇ  
‚îÇ    Mohou b√Ωt k≈ôehk√© po vyti≈°tƒõn√≠.                  ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ  
‚îÇ ‚ÑπÔ∏è Tyto tipy jsou orientaƒçn√≠. Tisk je mo≈æn√Ω       ‚îÇ  
‚îÇ    i bez √∫prav.                                     ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  
\`\`\`

\*\*Vizualizace v 3D prohl√≠≈æeƒçi:\*\*  
\- Tlaƒç√≠tko "Zobrazit probl√©mov√© oblasti"  
\- P≈ôepne 3D prohl√≠≈æeƒç do "DFM re≈æimu"  
\- Problematick√© plochy zv√Ωraznƒõny barevnƒõ (ƒçerven√° \= kritick√©, ≈ælut√° \= varov√°n√≠)  
\- Legenda vysvƒõtluj√≠c√≠ barvy

\*\*Implementaƒçn√≠ pozn√°mka:\*\*  
\- DFM anal√Ωza je v√Ωpoƒçetnƒõ n√°roƒçn√°  
\- Implementovat postupnƒõ ‚Äî zaƒç√≠t s jednoduch√Ωmi kontrolami (bounding box, watertight)  
\- Pokroƒçil√© anal√Ωzy (p≈ôevisy, tlou≈°≈•ka stƒõn) p≈ôid√°vat iterativnƒõ  
\- Nƒõkter√© kontroly m≈Ø≈æe prov√°dƒõt slicer a vr√°tit warnings

\---

*\#\# SEKCE 9 ‚Äî Expresn√≠ cenotvorba a upselly*

*\#\#\# 9.1 Admin nastaven√≠ expresn√≠ch √∫rovn√≠ (standard, express, rush)*

\*\*Um√≠stƒõn√≠:\*\* Admin \> Pricing \> Expresn√≠ √∫rovnƒõ (nov√° z√°lo≈æka) nebo Admin \> Fees s kategori√≠ "EXPRESS"

\*\*Konfigurace expresn√≠ch √∫rovn√≠:\*\*

\*\*Tabulka √∫rovn√≠:\*\*  
| N√°zev | P≈ô√≠platek | Doba zpracov√°n√≠ | V√Ωchoz√≠ | Aktivn√≠ | Akce |  
|-------|-----------|-----------------|---------|---------|------|  
| Standard | 0% | 5\-7 pracovn√≠ch dn≈Ø | ‚úÖ | ‚úÖ | Upravit |  
| Express | \+25% | 2\-3 pracovn√≠ dny | ‚ùå | ‚úÖ | Upravit |  
| Rush | \+50% | 24 hodin | ‚ùå | ‚úÖ | Upravit |

\*\*Editor √∫rovnƒõ:\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ Expresn√≠ √∫rove≈à: Express                            ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ                                                     ‚îÇ  
‚îÇ N√°zev: \[ Express                    \]               ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ Popis pro z√°kazn√≠ka:                               ‚îÇ  
‚îÇ \[ Rychlej≈°√≠ zpracov√°n√≠ va≈°√≠ objedn√°vky \]           ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ P≈ô√≠platek:                                          ‚îÇ  
‚îÇ ‚óã Procenta z ceny: \[ 25 \] %                        ‚îÇ  
‚îÇ ‚óã Pevn√° ƒç√°stka:    \[    \] Kƒç                       ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ Doba zpracov√°n√≠:                                    ‚îÇ  
‚îÇ Od: \[ 2 \] do: \[ 3 \] pracovn√≠ch dn≈Ø                 ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ Ikona: \[ ‚ö° ‚ñº \]                                     ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ \[ \] Nastavit jako v√Ωchoz√≠                          ‚îÇ  
‚îÇ \[‚úì\] Aktivn√≠                                        ‚îÇ  
‚îÇ                                                     ‚îÇ  
‚îÇ         \[ Ulo≈æit \]     \[ Zru≈°it \]                  ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Mo≈ænosti p≈ô√≠platku:**

* **Procenta z ceny:** p≈ô√≠platek se poƒç√≠t√° jako % z celkov√© ceny objedn√°vky (p≈ôed dopravou)  
* **Pevn√° ƒç√°stka:** fixn√≠ p≈ô√≠platek bez ohledu na cenu objedn√°vky  
* **Kombinace:** procenta s minimem/maximem (nap≈ô. 25% ale min. 100 Kƒç, max. 500 Kƒç)

**Datab√°zov√Ω model:**

sql  
CREATE TABLE express\_tiers (  
  id UUID PRIMARY KEY,  
  tenant\_id UUID REFERENCES tenants(id),  
  name VARCHAR(100) NOT NULL,  
  description VARCHAR(255),  
  *\-- P≈ô√≠platek*  
  surcharge\_type VARCHAR(20), *\-- PERCENT, FIXED*  
  surcharge\_percent NUMERIC(5,2),  
  surcharge\_fixed NUMERIC(10,2),  
  surcharge\_min NUMERIC(10,2), *\-- Minimum pro PERCENT*  
  surcharge\_max NUMERIC(10,2), *\-- Maximum pro PERCENT*  
  *\-- Doba*  
  processing\_days\_min INTEGER,  
  processing\_days\_max INTEGER,  
  *\-- UI*  
  icon VARCHAR(10), *\-- Emoji nebo k√≥d ikony*  
  sort\_order INTEGER,  
  is\_default BOOLEAN DEFAULT false,  
  is\_active BOOLEAN DEFAULT true,  
  created\_at TIMESTAMP DEFAULT NOW()  
);  
\`\`\`

\---

\#\#\# 9.2 UI v√Ωbƒõr urgence v kalkulaƒçce

\*\*Um√≠stƒõn√≠:\*\* V konfiguraƒçn√≠m kroku kalkulaƒçky, jako samostatn√° sekce "Rychlost zpracov√°n√≠" nebo "Term√≠n dod√°n√≠"

\*\*Zobrazen√≠ ‚Äî karty vedle sebe:\*\*  
\`\`\`  
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
‚îÇ ‚è±Ô∏è Rychlost zpracov√°n√≠                                              ‚îÇ  
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ                                                                     ‚îÇ  
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ  
‚îÇ ‚îÇ    üì¶           ‚îÇ ‚îÇ    ‚ö°           ‚îÇ ‚îÇ    üöÄ           ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ   Standard      ‚îÇ ‚îÇ   Express       ‚îÇ ‚îÇ   Rush          ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ  5\-7 prac. dn≈Ø  ‚îÇ ‚îÇ  2\-3 prac. dny  ‚îÇ ‚îÇ   24 hodin      ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ   Bez p≈ô√≠platku ‚îÇ ‚îÇ   \+25%          ‚îÇ ‚îÇ   \+50%          ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ                 ‚îÇ ‚îÇ  (\+162,50 Kƒç)   ‚îÇ ‚îÇ  (\+325 Kƒç)      ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ        ‚îÇ  
‚îÇ ‚îÇ    \[Vybr√°no\]    ‚îÇ ‚îÇ    \[Vybrat\]     ‚îÇ ‚îÇ    \[Vybrat\]     ‚îÇ        ‚îÇ  
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ  
‚îÇ                                                                     ‚îÇ  
‚îÇ üìÖ Odhadovan√© doruƒçen√≠: 22\. \- 24\. ledna 2024                       ‚îÇ  
‚îÇ                                                                     ‚îÇ  
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  
\`\`\`

\*\*Interakce:\*\*  
\- Kliknut√≠ na kartu vybere danou √∫rove≈à  
\- Vybran√° karta m√° v√Ωrazn√Ω border (prim√°rn√≠ barva) a checkmark  
\- P≈ôi zmƒõnƒõ v√Ωbƒõru se okam≈æitƒõ aktualizuje:  
  \- Celkov√° cena v panelu "Cena a souhrn"  
  \- Odhadovan√Ω term√≠n doruƒçen√≠  
  \- ≈ò√°dek "Expresn√≠ p≈ô√≠platek: \+XXX Kƒç" v rozpisu ceny

\*\*Dynamick√Ω v√Ωpoƒçet p≈ô√≠platku:\*\*  
\`\`\`  
Z√°kladn√≠ cena objedn√°vky: 650 Kƒç  
Express (\+25%): 650 √ó 0.25 \= 162,50 Kƒç  
Celkem s Express: 812,50 Kƒç  
\`\`\`

\*\*Zobrazen√≠ v rozpisu ceny:\*\*  
\`\`\`  
Materi√°l:           44,35 Kƒç  
ƒåas tisku:         202,00 Kƒç  
Slu≈æby:            \+14,54 Kƒç  
Expresn√≠ p≈ô√≠platek: \+162,50 Kƒç  ‚Üê Nov√Ω ≈ô√°dek  
Sleva:              \+0,00 Kƒç  
Doprava:            99,00 Kƒç  
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Celkem:            522,39 Kƒç

---

### **9.3 Upsell mechanismus p≈ôi checkout**

**Princip:** P≈ôi checkout (krok 3 "Kontrola a cena") zobrazit kontextu√°ln√≠ doporuƒçen√≠, kter√° mohou zv√Ω≈°it hodnotu objedn√°vky a/nebo zlep≈°it v√Ωsledek pro z√°kazn√≠ka.

**Typy upsell≈Ø:**

**1\. Post-processing upsell:**

* **Podm√≠nka:** Z√°kazn√≠k nem√° vybran√Ω ≈æ√°dn√Ω post-processing  
* **Zobrazen√≠:**

 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  
  ‚îÇ ‚ú® Vylep≈°ete sv≈Øj v√Ωtisk                           ‚îÇ  
  ‚îÇ                                                     ‚îÇ  
  ‚îÇ P≈ôidejte povrchovou √∫pravu pro profesion√°ln√≠      ‚îÇ  
  ‚îÇ v√Ωsledek:                                          ‚îÇ  
  ‚îÇ                                                     ‚îÇ  
  ‚îÇ üîß Brou≈°en√≠         \+150 Kƒç  \[ P≈ôidat \]           ‚îÇ  
  ‚îÇ ‚ú® Le≈°tƒõn√≠          \+200 Kƒç  \[ P≈ôidat \]           ‚îÇ

  ‚îÇ üé® Barven√≠          \+300 Kƒç

# **SEKCE 10: SLEVOV√â KUP√ìNY A PROMO AKCE**

## **10.1 Syst√©m kup√≥n≈Ø**

### **10.1.1 Datab√°zov√° struktura kup√≥n≈Ø**

**Tabulka `coupons`:**

sql

CREATE TABLE coupons (

    id UUID PRIMARY KEY,

    code VARCHAR(50) UNIQUE NOT NULL,

    name VARCHAR(255),

    description TEXT,

    discount\_type ENUM('percentage', 'fixed\_amount', 'free\_shipping', 'free\_postprocessing') NOT NULL,

    discount\_value DECIMAL(10,2) NOT NULL,

    minimum\_order\_value DECIMAL(10,2) DEFAULT 0,

    maximum\_discount DECIMAL(10,2) DEFAULT NULL,

    usage\_limit\_total INTEGER DEFAULT NULL,

    usage\_limit\_per\_customer INTEGER DEFAULT 1,

    usage\_count INTEGER DEFAULT 0,

    valid\_from TIMESTAMP NOT NULL,

    valid\_until TIMESTAMP,

    is\_active BOOLEAN DEFAULT true,

    applies\_to ENUM('all', 'specific\_materials', 'specific\_technologies', 'specific\_categories') DEFAULT 'all',

    applicable\_items JSONB DEFAULT '\[\]',

    excluded\_items JSONB DEFAULT '\[\]',

    first\_order\_only BOOLEAN DEFAULT false,

    combinable BOOLEAN DEFAULT false,

    created\_by UUID REFERENCES users(id),

    created\_at TIMESTAMP DEFAULT NOW(),

    updated\_at TIMESTAMP DEFAULT NOW()

);

**Tabulka `coupon_usages`:**

sql

CREATE TABLE coupon\_usages (

    id UUID PRIMARY KEY,

    coupon\_id UUID REFERENCES coupons(id),

    order\_id UUID REFERENCES orders(id),

    customer\_email VARCHAR(255),

    customer\_id UUID,

    discount\_applied DECIMAL(10,2),

    used\_at TIMESTAMP DEFAULT NOW()

);

\`\`\`

\#\#\# 10.1.2 Typy slev

\*\*Procentu√°ln√≠ sleva:\*\*

\- Hodnota: 1-100%

\- Mo≈ænost nastavit maxim√°ln√≠ ƒç√°stku slevy (nap≈ô. max 500 Kƒç)

\- Aplikace na celkovou cenu nebo pouze na vybran√© polo≈æky

\*\*Fixn√≠ ƒç√°stka:\*\*

\- Pevn√° sleva v mƒõnƒõ obchodu

\- Automatick√° konverze p≈ôi multi-currency (dle aktu√°ln√≠ho kurzu)

\- Nelze aplikovat pokud je objedn√°vka ni≈æ≈°√≠ ne≈æ sleva

\*\*Doprava zdarma:\*\*

\- Nastaven√≠ pro konkr√©tn√≠ dopravce nebo v≈°echny

\- Mo≈ænost omezen√≠ na urƒçitou v√°hu/velikost

\- Kombinovateln√© s jin√Ωmi slevami

\*\*Post-processing zdarma:\*\*

\- Sleva na konkr√©tn√≠ typ √∫pravy (nap≈ô. barven√≠ zdarma)

\- Nebo v≈°echny post-processing slu≈æby

\#\#\# 10.1.3 Admin rozhran√≠ pro spr√°vu kup√≥n≈Ø

\*\*Um√≠stƒõn√≠:\*\* Admin panel ‚Üí Marketing ‚Üí Kup√≥ny

\*\*Seznam kup√≥n≈Ø \- zobrazovan√© informace:\*\*

\- K√≥d kup√≥nu (zv√Ωraznƒõn√Ω, kop√≠rovateln√Ω)

\- N√°zev/popis

\- Typ a hodnota slevy

\- Platnost (od-do) s vizu√°ln√≠ indikac√≠ stavu

\- Vyu≈æit√≠ (pou≈æito/limit)

\- Status badge (aktivn√≠/neaktivn√≠/expirovan√Ω/vyƒçerpan√Ω)

\- Akce: Upravit, Duplikovat, Deaktivovat, Smazat

\*\*Formul√°≈ô vytvo≈ôen√≠/editace kup√≥nu:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ VYTVO≈òIT KUP√ìN                                       ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ Z√°kladn√≠ informace                                   ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ K√≥d: \[AUTO\-GENERATE\] nebo \[Vlastn√≠ k√≥d\_\_\_\_\_\_\]  ‚îÇ ‚îÇ

‚îÇ ‚îÇ N√°zev: \[Letn√≠ sleva 2025\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\]      ‚îÇ ‚îÇ

‚îÇ ‚îÇ Popis: \[20% sleva na v≈°echny materi√°ly\_\_\_\]     ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Typ slevy                                            ‚îÇ

‚îÇ ‚óã Procentu√°ln√≠   ‚óã Fixn√≠ ƒç√°stka                     ‚îÇ

‚îÇ ‚óã Doprava zdarma ‚óã Post\-processing zdarma           ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Hodnota: \[20\] \[%/Kƒç\]  Max. sleva: \[500 Kƒç\]          ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Omezen√≠                                              ‚îÇ

‚îÇ Min. hodnota objedn√°vky: \[1000 Kƒç\]                  ‚îÇ

‚îÇ Celkov√Ω limit pou≈æit√≠: \[100\] (pr√°zdn√© \= neomezenƒõ)  ‚îÇ

‚îÇ Limit na z√°kazn√≠ka: \[1\]                             ‚îÇ

‚îÇ ‚ñ° Pouze prvn√≠ objedn√°vka                            ‚îÇ

‚îÇ ‚ñ° Kombinovateln√© s jin√Ωmi kup√≥ny                    ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Platnost                                             ‚îÇ

‚îÇ Od: \[01.06.2025 00:00\]  Do: \[30.06.2025 23:59\]      ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Aplikovat na                                         ‚îÇ

‚îÇ ‚óã V≈°e  ‚óã Vybran√© materi√°ly  ‚óã Vybran√© technologie   ‚îÇ

‚îÇ \[Multi\-select pro v√Ωbƒõr polo≈æek\]                    ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ Vylouƒçit polo≈æky                                     ‚îÇ

‚îÇ \[Multi\-select pro vylouƒçen√≠\]                        ‚îÇ

‚îÇ                                                      ‚îÇ

‚îÇ           \[Zru≈°it\]  \[Ulo≈æit kup√≥n\]                  ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\#\#\# 10.1.4 Aplikace kup√≥nu v kalkulaƒçce

\*\*UI element v kalkulaƒçce:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ M√°te slevov√Ω k√≥d?                        ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ LETO2025            ‚îÇ ‚îÇ Uplatnit    ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*Po √∫spƒõ≈°n√©m uplatnƒõn√≠:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ ‚úì Kup√≥n LETO2025 uplatnƒõn               ‚îÇ

‚îÇ   Sleva 20% (max. 500 Kƒç)               ‚îÇ

‚îÇ                              \[Odstranit\] ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ Mezisouƒçet:              2 450 Kƒç       ‚îÇ

‚îÇ Sleva (LETO2025):          \-490 Kƒç      ‚îÇ

‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÇ

‚îÇ Celkem:                  1 960 Kƒç       ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*Validace kup√≥nu \- endpoint:\*\*

\`\`\`

POST /api/coupons/validate

{

    "code": "LETO2025",

    "cart\_total": 2450,

    "customer\_email": "jan@example.cz",

    "items": \[

        {"material\_id": "uuid", "technology": "fdm", "price": 1200},

        {"material\_id": "uuid", "technology": "fdm", "price": 1250}

    \]

}

Response (success):

{

    "valid": true,

    "coupon": {

        "code": "LETO2025",

        "discount\_type": "percentage",

        "discount\_value": 20,

        "maximum\_discount": 500

    },

    "discount\_amount": 490,

    "message": "Sleva 20% uplatnƒõna (max. 500 Kƒç)"

}

Response (error):

{

    "valid": false,

    "error\_code": "MINIMUM\_NOT\_MET",

    "message": "Minim√°ln√≠ hodnota objedn√°vky je 1000 Kƒç"

}

\`\`\`

\*\*Chybov√© stavy kup√≥nu:\*\*

\- \`INVALID\_CODE\` \- Neplatn√Ω k√≥d

\- \`EXPIRED\` \- Kup√≥n vypr≈°el

\- \`NOT\_YET\_VALID\` \- Kup√≥n je≈°tƒõ nen√≠ platn√Ω

\- \`USAGE\_LIMIT\_REACHED\` \- Vyƒçerp√°n celkov√Ω limit

\- \`CUSTOMER\_LIMIT\_REACHED\` \- Z√°kazn√≠k ji≈æ kup√≥n vyu≈æil

\- \`MINIMUM\_NOT\_MET\` \- Nedosa≈æena minim√°ln√≠ hodnota

\- \`NOT\_APPLICABLE\` \- Nelze aplikovat na polo≈æky v ko≈°√≠ku

\- \`FIRST\_ORDER\_ONLY\` \- Pouze pro prvn√≠ objedn√°vku

\- \`NOT\_COMBINABLE\` \- Nelze kombinovat s jin√Ωm kup√≥nem

\#\#\# 10.1.5 Automatick√© generov√°n√≠ kup√≥n≈Ø

\*\*Hromadn√© generov√°n√≠ pro kampanƒõ:\*\*

\- Prefix \+ n√°hodn√Ω suffix (nap≈ô. LETO-A7X9K2)

\- Poƒçet kup√≥n≈Ø k vygenerov√°n√≠

\- Sd√≠len√° pravidla pro v≈°echny

\- Export do CSV pro distribuci

\*\*API pro programatick√© generov√°n√≠:\*\*

\`\`\`

POST /api/admin/coupons/generate\-batch

{

    "prefix": "PARTNER",

    "count": 50,

    "template": {

        "discount\_type": "percentage",

        "discount\_value": 15,

        "usage\_limit\_per\_customer": 1,

        "valid\_days": 30

    }

}

---

## **10.2 Promo akce a ƒçasov√© slevy**

### **10.2.1 Datab√°zov√° struktura**

**Tabulka `promotions`:**

sql

CREATE TABLE promotions (

    id UUID PRIMARY KEY,

    name VARCHAR(255) NOT NULL,

    description TEXT,

    promotion\_type ENUM('time\_based', 'quantity\_based', 'bundle', 'flash\_sale') NOT NULL,

    discount\_type ENUM('percentage', 'fixed\_amount') NOT NULL,

    discount\_value DECIMAL(10,2) NOT NULL,

    conditions JSONB NOT NULL,

    applies\_to JSONB NOT NULL,

    priority INTEGER DEFAULT 0,

    stackable BOOLEAN DEFAULT false,

    valid\_from TIMESTAMP NOT NULL,

    valid\_until TIMESTAMP,

    is\_active BOOLEAN DEFAULT true,

    display\_banner BOOLEAN DEFAULT true,

    banner\_text VARCHAR(255),

    banner\_color VARCHAR(7) DEFAULT '\#FF6B00',

    created\_at TIMESTAMP DEFAULT NOW()

);

\`\`\`

\#\#\# 10.2.2 Typy promo akc√≠

\*\*ƒåasovƒõ omezen√© slevy (Flash Sales):\*\*

\- Sleva platn√° pouze v urƒçit√©m ƒçase (nap≈ô. Happy Hours 14:00-16:00)

\- Countdown timer v kalkulaƒçce

\- Automatick√° aktivace/deaktivace

\*\*Sez√≥nn√≠ akce:\*\*

\- V√°noƒçn√≠ slevy, Black Friday, Letn√≠ v√Ωprodej

\- Del≈°√≠ ƒçasov√© obdob√≠

\- Mo≈ænost banner≈Ø a speci√°ln√≠ grafiky

\*\*Bundlov√© akce:\*\*

\- Sleva p≈ôi objedn√°n√≠ v√≠ce polo≈æek r≈Øzn√Ωch typ≈Ø

\- Nap≈ô. "Objednej FDM \+ SLA a z√≠skej 10% slevu"

\#\#\# 10.2.3 Zobrazen√≠ v kalkulaƒçce

\*\*Banner aktivn√≠ akce:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ üî• FLASH SALE\! 15% sleva na v≈°echny materi√°ly       ‚îÇ

‚îÇ    Konƒç√≠ za: 02:45:33                               ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*Zobrazen√≠ slevy u ceny:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ Model: cube.stl                         ‚îÇ

‚îÇ Materi√°l: PLA Basic                     ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ P≈Øvodn√≠ cena:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  1 200 Kƒç  ‚îÇ ‚îÇ

‚îÇ ‚îÇ Flash Sale \-15%:          \-180 Kƒç  ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ ‚îÇ

‚îÇ ‚îÇ Va≈°e cena:              1 020 Kƒç  ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

### **10.2.4 Admin spr√°va promo akc√≠**

**Um√≠stƒõn√≠:** Admin panel ‚Üí Marketing ‚Üí Promo akce

**Konfigurace akce:**

* N√°zev a popis  
* Typ akce (ƒçasov√°, mno≈æstevn√≠, bundle)  
* Hodnota slevy  
* ƒåasov√© omezen√≠  
* Na co se vztahuje (materi√°ly, technologie, v≈°e)  
* Priorita (p≈ôi p≈ôekryvu v√≠ce akc√≠)  
* Nastaven√≠ banneru (text, barva, zobrazen√≠)

---

## **10.3 Analytika kup√≥n≈Ø a akc√≠**

### **10.3.1 Dashboard statistiky**

**Um√≠stƒõn√≠:** Admin panel ‚Üí Marketing ‚Üí Analytika

**Metriky kup√≥n≈Ø:**

* Celkov√Ω poƒçet pou≈æit√≠  
* Celkov√° hodnota poskytnut√Ωch slev  
* Pr≈Ømƒõrn√° sleva na objedn√°vku  
* Konverzn√≠ rate (zobrazen√≠ ‚Üí pou≈æit√≠)  
* Nej√∫spƒõ≈°nƒõj≈°√≠ kup√≥ny  
* Revenue attribution (tr≈æby p≈ôipsan√© kup√≥n≈Øm)

**Graf vyu≈æit√≠ v ƒçase:**

* Denn√≠/t√Ωdenn√≠/mƒõs√≠ƒçn√≠ zobrazen√≠  
* Porovn√°n√≠ r≈Øzn√Ωch kup√≥n≈Ø  
* Korelace s tr≈æbami

### **10.3.2 Export dat**

**Form√°ty:** CSV, Excel, PDF report **Data:** Seznam v≈°ech pou≈æit√≠, souhrnn√© statistiky, ROI anal√Ωza

---

# **SEKCE 11: CHAT A KOMENT√Å≈òE K OBJEDN√ÅVK√ÅM**

## **11.1 Intern√≠ koment√°≈ôe (Admin only)**

### **11.1.1 √öƒçel a pou≈æit√≠**

Intern√≠ koment√°≈ôe slou≈æ√≠ pro komunikaci mezi ƒçleny t√Ωmu ohlednƒõ konkr√©tn√≠ objedn√°vky. Z√°kazn√≠k tyto koment√°≈ôe nevid√≠.

### **11.1.2 Datab√°zov√° struktura**

**Tabulka `order_comments`:**

sql

CREATE TABLE order\_comments (

    id UUID PRIMARY KEY,

    order\_id UUID REFERENCES orders(id) NOT NULL,

    user\_id UUID REFERENCES users(id) NOT NULL,

    comment\_type ENUM('internal', 'customer') NOT NULL,

    content TEXT NOT NULL,

    attachments JSONB DEFAULT '\[\]',

    is\_pinned BOOLEAN DEFAULT false,

    created\_at TIMESTAMP DEFAULT NOW(),

    updated\_at TIMESTAMP DEFAULT NOW(),

    deleted\_at TIMESTAMP

);

\`\`\`

\#\#\# 11.1.3 UI v admin detailu objedn√°vky

\*\*Um√≠stƒõn√≠:\*\* Detail objedn√°vky ‚Üí prav√Ω panel nebo spodn√≠ sekce

\*\*Zobrazen√≠ koment√°≈ô≈Ø:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ INTERN√ç POZN√ÅMKY                          \[\+ P≈ôidat\]‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ üìå \[Jan Nov√°k\] 15.01.2025 10:30                     ‚îÇ

‚îÇ Z√°kazn√≠k ≈æ√°d√° expresn√≠ dod√°n√≠ \- potvrzeno telefonicky‚îÇ

‚îÇ P≈ôisl√≠beno dod√°n√≠ do 17.01.                         ‚îÇ

‚îÇ                                    \[Odepnout\] \[¬∑¬∑¬∑\] ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ \[Marie Svobodov√°\] 14.01.2025 16:45                  ‚îÇ

‚îÇ Model m√° tenk√© stƒõny, doporuƒçuji konzultovat se     ‚îÇ

‚îÇ z√°kazn√≠kem p≈ôed tiskem.                             ‚îÇ

‚îÇ üìé screenshot\_walls.png                             ‚îÇ

‚îÇ                                       \[P≈ôipnout\] \[¬∑¬∑¬∑\]‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ Napi≈°te koment√°≈ô...                             ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ \[üìé P≈ô√≠loha\]                              \[Odeslat\] ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Funkce:**

* P≈ôid√°n√≠ nov√©ho koment√°≈ôe s form√°tov√°n√≠m  
* P≈ôipnut√≠ d≈Øle≈æit√©ho koment√°≈ôe (zobraz√≠ se naho≈ôe)  
* P≈ô√≠lohy (obr√°zky, dokumenty)  
* Editace vlastn√≠ch koment√°≈ô≈Ø  
* Smaz√°n√≠ (soft delete)  
* @zm√≠nky koleg≈Ø s notifikac√≠

### **11.1.4 Notifikace p≈ôi zm√≠nce**

Kdy≈æ u≈æivatel nap√≠≈°e `@jan.novak`, syst√©m:

1. Zv√Ωrazn√≠ zm√≠nku v koment√°≈ôi  
2. Ode≈°le notifikaci zm√≠nƒõn√©mu u≈æivateli  
3. Zobraz√≠ v notifikaƒçn√≠m centru  
4. Volitelnƒõ ode≈°le email

---

## **11.2 Chat se z√°kazn√≠kem**

### **11.2.1 Datab√°zov√° struktura**

**Tabulka `order_messages`:**

sql

CREATE TABLE order\_messages (

    id UUID PRIMARY KEY,

    order\_id UUID REFERENCES orders(id) NOT NULL,

    sender\_type ENUM('admin', 'customer') NOT NULL,

    sender\_id UUID,

    sender\_name VARCHAR(255),

    sender\_email VARCHAR(255),

    content TEXT NOT NULL,

    attachments JSONB DEFAULT '\[\]',

    is\_read BOOLEAN DEFAULT false,

    read\_at TIMESTAMP,

    created\_at TIMESTAMP DEFAULT NOW()

);

\`\`\`

\#\#\# 11.2.2 Admin rozhran√≠ chatu

\*\*Um√≠stƒõn√≠:\*\* Detail objedn√°vky ‚Üí z√°lo≈æka "Komunikace" nebo panel vedle

\*\*Chat interface v admin panelu:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ CHAT SE Z√ÅKAZN√çKEM                                  ‚îÇ

‚îÇ Jan Nov√°k (jan@example.cz)              ‚óè Online    ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ                                                     ‚îÇ

‚îÇ                      14.01.2025                     ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ

‚îÇ ‚îÇ Dobr√Ω den, chtƒõl bych se        ‚îÇ 09:15          ‚îÇ

‚îÇ ‚îÇ zeptat na term√≠n dod√°n√≠.        ‚îÇ                 ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ          09:22 ‚îÇ Dobr√Ω den, va≈°e objedn√°vka bude ‚îÇ ‚îÇ

‚îÇ                ‚îÇ odesl√°na z√≠tra. P≈ôedpokl√°dan√©   ‚îÇ ‚îÇ

‚îÇ                ‚îÇ doruƒçen√≠ je 17.01.              ‚îÇ ‚îÇ

‚îÇ                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ

‚îÇ ‚îÇ Dƒõkuji za informaci\!           ‚îÇ 09:25          ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ

‚îÇ                                                     ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ Napi≈°te zpr√°vu...                               ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ \[üìé\] \[üì∑\]  \[≈†ablony ‚ñº\]                   \[Odeslat\] ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*≈†ablony rychl√Ωch odpovƒõd√≠:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ ≈†ABLONY ODPOVƒöD√ç                    ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ ‚ñ∂ Potvrzen√≠ objedn√°vky              ‚îÇ

‚îÇ ‚ñ∂ Informace o odesl√°n√≠              ‚îÇ

‚îÇ ‚ñ∂ ≈Ω√°dost o up≈ôesnƒõn√≠                ‚îÇ

‚îÇ ‚ñ∂ Probl√©m s modelem                 ‚îÇ

‚îÇ ‚ñ∂ Dotaz na zmƒõnu materi√°lu          ‚îÇ

‚îÇ \+ Vytvo≈ôit novou ≈°ablonu            ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\#\#\# 11.2.3 Z√°kaznick√© rozhran√≠

\*\*P≈ô√≠stup pro z√°kazn√≠ka:\*\*

1\. Odkaz v emailu s objedn√°vkou: \`example.com/order/ABC123/chat?token\=xyz\`

2\. Nebo p≈ôes z√°kaznick√Ω port√°l (pokud je registrov√°n)

\*\*UI pro z√°kazn√≠ka:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ OBJEDN√ÅVKA *\#ABC123                                  ‚îÇ*

‚îÇ Komunikace s prodejcem                              ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ \[Chat messages \- stejn√© jako admin view\]            ‚îÇ

‚îÇ                                                     ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ Napi≈°te zpr√°vu...                               ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ \[üìé P≈ô√≠loha\]                              \[Odeslat\] ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚ÑπÔ∏è Obvykle odpov√≠d√°me do 2 hodin                    ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\#\#\# 11.2.4 Notifikace

\*\*Pro admina:\*\*

\- Real-time notifikace v admin panelu (WebSocket/polling)

\- Badge s poƒçtem nep≈ôeƒçten√Ωch zpr√°v

\- Email notifikace (konfigurovateln√© \- ihned/souhrn)

\- Push notifikace (voliteln√©)

\*\*Pro z√°kazn√≠ka:\*\*

\- Email p≈ôi nov√© zpr√°vƒõ od admina

\- Volitelnƒõ SMS notifikace

\#\#\# 11.2.5 Spr√°va ≈°ablon odpovƒõd√≠

\*\*Um√≠stƒõn√≠:\*\* Admin ‚Üí Nastaven√≠ ‚Üí ≈†ablony zpr√°v

\*\*Konfigurace ≈°ablony:\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ UPRAVIT ≈†ABLONU                                     ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ N√°zev: \[Informace o odesl√°n√≠\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\]       ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ Text ≈°ablony:                                       ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ Dobr√Ω den,                                      ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ

‚îÇ ‚îÇ va≈°e objedn√°vka *\#{order\_number} byla pr√°vƒõ     ‚îÇ ‚îÇ*

‚îÇ ‚îÇ odesl√°na.                                       ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ

‚îÇ ‚îÇ Sledovac√≠ ƒç√≠slo: {tracking\_number}             ‚îÇ ‚îÇ

‚îÇ ‚îÇ Dopravce: {carrier\_name}                       ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ

‚îÇ ‚îÇ S pozdravem,                                   ‚îÇ ‚îÇ

‚îÇ ‚îÇ {admin\_name}                                   ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ Dostupn√© promƒõnn√©:                                  ‚îÇ

‚îÇ {order\_number}, {customer\_name}, {tracking\_number}, ‚îÇ

‚îÇ {carrier\_name}, {admin\_name}, {company\_name}        ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ              \[Zru≈°it\]  \[Ulo≈æit ≈°ablonu\]             ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\---

\#\# 11.3 Historie komunikace

\#\#\# 11.3.1 Unified timeline

V detailu objedn√°vky zobrazit chronologickou ƒçasovou osu v≈°ech ud√°lost√≠:

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ HISTORIE OBJEDN√ÅVKY                    \[Filtr ‚ñº\]    ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ ‚óè 15.01. 14:30 \- Objedn√°vka odesl√°na               ‚îÇ

‚îÇ   Tracking: PPL123456789                            ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ üí¨ 15.01. 14:25 \- Zpr√°va z√°kazn√≠kovi               ‚îÇ

‚îÇ   "Va≈°e objedn√°vka byla pr√°vƒõ odesl√°na..."         ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ üìù 15.01. 10:30 \- Intern√≠ pozn√°mka (Jan Nov√°k)     ‚îÇ

‚îÇ   "Z√°kazn√≠k ≈æ√°d√° expresn√≠ dod√°n√≠..."               ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚óè 14.01. 16:00 \- Status zmƒõnƒõn: Tisk dokonƒçen     ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ üí¨ 14.01. 09:25 \- Zpr√°va od z√°kazn√≠ka              ‚îÇ

‚îÇ   "Dƒõkuji za informaci\!"                           ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ üí¨ 14.01. 09:22 \- Zpr√°va z√°kazn√≠kovi               ‚îÇ

‚îÇ   "Dobr√Ω den, va≈°e objedn√°vka bude..."             ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ üí¨ 14.01. 09:15 \- Zpr√°va od z√°kazn√≠ka              ‚îÇ

‚îÇ   "Dobr√Ω den, chtƒõl bych se zeptat..."             ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚óè 13.01. 18:00 \- Objedn√°vka vytvo≈ôena              ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Filtry:**

* V≈°e  
* Pouze zpr√°vy  
* Pouze intern√≠ pozn√°mky  
* Pouze zmƒõny stavu

---

# **SEKCE 12: Z√ÅKAZNICK√ù PORT√ÅL**

## **12.1 Registrace a p≈ôihl√°≈°en√≠**

### **12.1.1 Mo≈ænosti autentizace**

**Registrace emailem:**

* Email \+ heslo  
* Potvrzovac√≠ email  
* Volitelnƒõ: jm√©no, firma, telefon

**Social login (voliteln√©):**

* Google  
* Facebook  
* Apple ID

**Magic link:**

* P≈ôihl√°≈°en√≠ bez hesla  
* Email s jednor√°zov√Ωm odkazem

### **12.1.2 Datab√°zov√° struktura**

**Tabulka `customers`:**

sql

CREATE TABLE customers (

    id UUID PRIMARY KEY,

    email VARCHAR(255) UNIQUE NOT NULL,

    password\_hash VARCHAR(255),

    first\_name VARCHAR(100),

    last\_name VARCHAR(100),

    company\_name VARCHAR(255),

    phone VARCHAR(50),

    tax\_id VARCHAR(50),

    vat\_id VARCHAR(50),

    preferred\_language VARCHAR(5) DEFAULT 'cs',

    preferred\_currency VARCHAR(3) DEFAULT 'CZK',

    email\_verified BOOLEAN DEFAULT false,

    email\_verified\_at TIMESTAMP,

    last\_login\_at TIMESTAMP,

    login\_count INTEGER DEFAULT 0,

    created\_at TIMESTAMP DEFAULT NOW(),

    updated\_at TIMESTAMP DEFAULT NOW()

);

**Tabulka `customer_addresses`:**

sql

CREATE TABLE customer\_addresses (

    id UUID PRIMARY KEY,

    customer\_id UUID REFERENCES customers(id),

    address\_type ENUM('billing', 'shipping') NOT NULL,

    is\_default BOOLEAN DEFAULT false,

    company\_name VARCHAR(255),

    first\_name VARCHAR(100),

    last\_name VARCHAR(100),

    street VARCHAR(255) NOT NULL,

    city VARCHAR(100) NOT NULL,

    postal\_code VARCHAR(20) NOT NULL,

    country\_code VARCHAR(2) NOT NULL,

    phone VARCHAR(50),

    created\_at TIMESTAMP DEFAULT NOW()

);

\`\`\`

\#\#\# 12.1.3 Registraƒçn√≠ formul√°≈ô

\*\*Um√≠stƒõn√≠:\*\* Kalkulaƒçka nebo samostatn√° str√°nka \`/register\`

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ              VYTVO≈òTE SI √öƒåET                       ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ                                                     ‚îÇ

‚îÇ Email \*                                             ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ vas@email.cz                                    ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ Heslo \*                                             ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢                                      ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ ‚úì Min. 8 znak≈Ø  ‚úì ƒå√≠slo  ‚óã Velk√© p√≠smeno          ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ Potvrzen√≠ hesla \*                                   ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢                                      ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚òê Souhlas√≠m s obchodn√≠mi podm√≠nkami               ‚îÇ

‚îÇ ‚òê P≈ôihl√°sit k odbƒõru novinek (voliteln√©)          ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ          \[    REGISTROVAT    \]                      ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ nebo ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ \[G\] Pokraƒçovat s Google                             ‚îÇ

‚îÇ                                                     ‚îÇ

‚îÇ Ji≈æ m√°te √∫ƒçet? \[P≈ôihl√°sit se\]                       ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\---

\#\# 12.2 Dashboard z√°kazn√≠ka

\#\#\# 12.2.1 Hlavn√≠ p≈ôehled

\*\*URL:\*\* \`/account\` nebo \`/portal\`

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ Logo                          Ahoj, Jano\! ‚ñº  üîî  \[Odhl√°sit se\] ‚îÇ

‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§

‚îÇ                                                                  ‚îÇ

‚îÇ  P≈òEHLED                                                         ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ

‚îÇ  ‚îÇ      5       ‚îÇ ‚îÇ      2       ‚îÇ ‚îÇ   12 450 Kƒç  ‚îÇ             ‚îÇ

‚îÇ  ‚îÇ  Objedn√°vek  ‚îÇ ‚îÇ  Aktivn√≠ch   ‚îÇ ‚îÇ  Celkem      ‚îÇ             ‚îÇ

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ  AKTIVN√ç OBJEDN√ÅVKY                                              ‚îÇ

‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ

‚îÇ  ‚îÇ *\#ORD-2025-042  ‚îÇ Ve v√Ωrobƒõ   ‚îÇ 3 450 Kƒç ‚îÇ \[Detail\]         ‚îÇ‚îÇ*

‚îÇ  ‚îÇ *\#ORD-2025-041  ‚îÇ Odesl√°no    ‚îÇ 1 890 Kƒç ‚îÇ \[Sledovat\]       ‚îÇ‚îÇ*

‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ  RYCHL√â AKCE                                                     ‚îÇ

‚îÇ  \[üì¶ Nov√° objedn√°vka\]  \[üí¨ Kontaktovat podporu\]                 ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\#\#\# 12.2.2 Navigace port√°lu

\*\*Menu polo≈æky:\*\*

\- Dashboard (p≈ôehled)

\- Moje objedn√°vky

\- Moje modely (knihovna)

\- Adresy

\- Nastaven√≠ √∫ƒçtu

\- Faktury a dokumenty

\---

\#\# 12.3 Seznam objedn√°vek

\#\#\# 12.3.1 P≈ôehled objedn√°vek

\*\*URL:\*\* \`/account/orders\`

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ MOJE OBJEDN√ÅVKY                                                 ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ \[V≈°echny ‚ñº\] \[Obdob√≠ ‚ñº\]                      üîç Hledat...        ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ *\#ORD-2025-042                              15.01.2025       ‚îÇ ‚îÇ*

‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                     ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ üî≤ ‚îÇ  3√ó Model, PLA Basic                                ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  Status: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë Ve v√Ωrobƒõ (60%)                ‚îÇ ‚îÇ

‚îÇ ‚îÇ          Celkem: 3 450 Kƒç                                   ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                             ‚îÇ ‚îÇ

‚îÇ ‚îÇ          \[Zobrazit detail\] \[Chat s podporou\]                ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ *\#ORD-2025-041                              12.01.2025       ‚îÇ ‚îÇ*

‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                     ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ üî≤ ‚îÇ  1√ó Prototype, PETG                                 ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  Status: ‚úì Doruƒçeno                                ‚îÇ ‚îÇ

‚îÇ ‚îÇ          Celkem: 1 890 Kƒç                                   ‚îÇ ‚îÇ

‚îÇ ‚îÇ                                                             ‚îÇ ‚îÇ

‚îÇ ‚îÇ          \[Zobrazit detail\] \[Objednat znovu\]                 ‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ                        \[1\] \[2\] \[3\] ... \[Dal≈°√≠ ‚Üí\]               ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\#\#\# 12.3.2 Detail objedn√°vky

\*\*URL:\*\* \`/account/orders/{order\_id}\`

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ ‚Üê Zpƒõt na objedn√°vky                                            ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ OBJEDN√ÅVKA *\#ORD-2025-042                                        ‚îÇ*

‚îÇ Vytvo≈ôeno: 15.01.2025 14:30                                     ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ STAV OBJEDN√ÅVKY                                                  ‚îÇ

‚îÇ ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óã‚îÄ‚îÄ‚îÄ‚îÄ‚óã                                           ‚îÇ

‚îÇ P≈ôijato  V√Ωroba  QC   Odesl√°no  Doruƒçeno                        ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ POLO≈ΩKY                                                          ‚îÇ

‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ

‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê cube.stl                                            ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ     ‚îÇ PLA Basic \- Modr√°                                   ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ 3D  ‚îÇ Mno≈æstv√≠: 3                                         ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ     ‚îÇ V√Ωpl≈à: 20%, Vrstva: 0.2mm                           ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     3√ó 450 \= 1 350 Kƒç‚îÇ ‚îÇ

‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ

‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê holder.stl                                          ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ     ‚îÇ PETG \- ƒåern√°                                        ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ 3D  ‚îÇ Mno≈æstv√≠: 2                                         ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îÇ     ‚îÇ V√Ωpl≈à: 40%, Vrstva: 0.15mm                          ‚îÇ ‚îÇ

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     2√ó 780 \= 1 560 Kƒç‚îÇ ‚îÇ

‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ SOUHRN                                                           ‚îÇ

‚îÇ Mezisouƒçet:                                         2 910 Kƒç    ‚îÇ

‚îÇ Doprava (PPL):                                        149 Kƒç    ‚îÇ

‚îÇ Sleva (LETO2025):                                    \-150 Kƒç    ‚îÇ

‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ

‚îÇ Celkem s DPH:                                       2 909 Kƒç    ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ DORUƒåOVAC√ç ADRESA           FAKTURAƒåN√ç ADRESA                   ‚îÇ

‚îÇ Jan Nov√°k                   Jan Nov√°k                           ‚îÇ

‚îÇ Ulice 123                   Ulice 123                           ‚îÇ

‚îÇ 110 00 Praha                110 00 Praha                        ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ \[üìÑ St√°hnout fakturu\]  \[üí¨ Chat s podporou\]  \[üîÑ Objednat znovu\]‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

---

## **12.4 Knihovna model≈Ø**

### **12.4.1 Ulo≈æen√© modely**

**URL:** `/account/models`

Z√°kazn√≠k m≈Ø≈æe ukl√°dat sv√© modely pro pozdƒõj≈°√≠ opakovan√© objedn√°vky.

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ MOJE MODELY                                    \[+ Nahr√°t model\] ‚îÇ

‚îÇ                                                                  ‚îÇ

‚îÇ \[Grid view

## **SEKCE 14 ‚Äî Vizu√°ln√≠ pipeline objedn√°vek (Kanban)**

St√°vaj√≠c√≠ Admin \> Orders zobrazuje objedn√°vky v tabulce. P≈ôidat alternativn√≠ zobrazen√≠: Kanban board (p≈ôep√≠naƒç Table/Kanban view).

### **14.1 Kanban board v admin panelu**

**Um√≠stƒõn√≠:** Admin \> Orders ‚Äî p≈ôep√≠nac√≠ tlaƒç√≠tka naho≈ôe (Tabulka | Kanban). P≈ôidat toggle "Skr√Ωt dokonƒçen√©" pro skryt√≠ sloupc≈Ø Hotovo/Zru≈°eno.

**Struktura boardu:** Sloupce odpov√≠daj√≠c√≠ stav≈Øm objedn√°vky: Nov√° | Kontrola | Schv√°leno | Tiskne se | Postprocess | P≈ôipraveno | Odesl√°no | Hotovo. Stav "Zru≈°eno" jako speci√°ln√≠ sloupec ‚Äî karty sem p≈ôesunut√© zmiz√≠ po potvrzen√≠.

**Karta objedn√°vky:** Ka≈æd√° objedn√°vka jako karta ve sloupci zobrazuje: ƒç√≠slo objedn√°vky (prominentnƒõ naho≈ôe), jm√©no z√°kazn√≠ka, poƒçet model≈Ø a kus≈Ø, celkov√° cena, datum vytvo≈ôen√≠, barevn√Ω tag (materi√°l nebo priorita ‚Äî expresn√≠ objedn√°vky ƒçervenƒõ, standardn√≠ mod≈ôe), mal√° miniatura prvn√≠ho modelu (voliteln√©).

### **14.2 Drag-and-drop p≈ôesuny mezi stavy**

**Interakce:** U≈æivatel uchop√≠ kartu a p≈ôet√°hne ji do jin√©ho sloupce \= zmƒõna stavu objedn√°vky.

**P≈ôi p≈ôesunu se spust√≠:**

* Backend update stavu objedn√°vky v datab√°zi  
* Trigger emailov√© notifikace z√°kazn√≠kovi (napojen√≠ na Sekci 7\)  
* Trigger generov√°n√≠ dokument≈Ø pokud je nastaveno pro dan√Ω stav (napojen√≠ na Sekci 13\)  
* Z√°pis do audit logu

**Validace p≈ôesun≈Ø:** Nƒõkter√© p≈ôechody mohou b√Ωt omezen√© ‚Äî nap≈ô. nelze p≈ôesunout z "Hotovo" zpƒõt na "Nov√°" (volitelnƒõ konfigurovateln√© v adminu). P≈ôi pokusu o nevalidn√≠ p≈ôesun zobrazit toast s vysvƒõtlen√≠m.

**Konfirmace p≈ôi urƒçit√Ωch stavech:** P≈ôi p≈ôesunu do "Zru≈°eno" zobrazit modal s potvrzen√≠m a polem pro d≈Øvod zru≈°en√≠. P≈ôi p≈ôesunu do "Odesl√°no" zobrazit modal pro zad√°n√≠ tracking ƒç√≠sla.

### **14.3 Filtry a vyhled√°v√°n√≠ na boardu**

**Filtry nad boardem:**

* Dle materi√°lu (dropdown/multiselect)  
* Dle presetu  
* Dle z√°kazn√≠ka (search autocomplete)  
* Dle data (date range picker)  
* Dle priority/expresn√≠ √∫rovnƒõ

**Vyhled√°v√°n√≠:** Search box pro rychl√© hled√°n√≠ dle ƒç√≠sla objedn√°vky nebo jm√©na z√°kazn√≠ka ‚Äî filtruje karty v re√°ln√©m ƒçase.

**WIP limity (voliteln√©):** Mo≈ænost nastavit maxim√°ln√≠ poƒçet objedn√°vek v dan√©m stavu (Work In Progress limit). Pokud je limit p≈ôekroƒçen, sloupec se vizu√°lnƒõ zv√Ωrazn√≠ (ƒçerven√Ω border/pozad√≠) jako varov√°n√≠ o p≈ôet√≠≈æen√≠.

### **Technick√° implementace**

**Knihovny pro drag-and-drop:**

* @dnd-kit/core (React) ‚Äî doporuƒçeno, modern√≠, lehk√Ω, dob≈ôe podporovan√Ω  
* react-beautiful-dnd (Atlassian) ‚Äî star≈°√≠ ale osvƒõdƒçen√Ω  
* Pragmatic drag-and-drop (nov√Ω od Atlassian) ‚Äî nejnovƒõj≈°√≠, vysok√Ω v√Ωkon

**Datov√Ω model:** ≈Ω√°dn√© zmƒõny v datab√°zi ‚Äî vyu≈æ√≠v√° existuj√≠c√≠ pole `status` v tabulce orders. Staƒç√≠ frontend implementace \+ API endpoint pro update stavu.

**API endpoint:** PUT /api/orders/:id/status s body { status: "PRINTING" }. Endpoint provede validaci, update, a vr√°t√≠ aktualizovanou objedn√°vku.

**Real-time aktualizace (voliteln√©):** Pokud v√≠ce u≈æivatel≈Ø pracuje na boardu souƒçasnƒõ, WebSocket notifikace o zmƒõn√°ch ‚Äî kdy≈æ jeden u≈æivatel p≈ôesune kartu, ostatn√≠ vid√≠ zmƒõnu okam≈æitƒõ bez refreshe.

**Responzivita:** Na mal√Ωch obrazovk√°ch zobrazit sloupce jako horizont√°lnƒõ scrollovateln√Ω kontejner, nebo p≈ôepnout na kompaktn√≠ seznam m√≠sto pln√©ho kanban boardu.

**V√Ωkon:** P≈ôi velk√©m poƒçtu objedn√°vek implementovat virtualizaci (react-window) pro plynul√© scrollov√°n√≠. Lazy loading karet ‚Äî naƒç√≠tat jen viditeln√© karty \+ buffer.

## **SEKCE 15 ‚Äî Roz≈°√≠≈ôen√© metody cenotvorby**

Aktu√°lnƒõ ModelPricer poƒç√≠t√° cenu na z√°kladƒõ: hmotnosti materi√°lu (Kƒç/gram) \+ doby tisku (Kƒç/hodina). Layers.app nab√≠z√≠ alternativn√≠ metody: Bounding Box, Volume, Weight, Time. P≈ôidat volbu metody cenotvorby v admin panelu.

### **15.1 Cenotvorba dle Bounding Boxu**

**Princip:** Cena z√°vis√≠ na objemu bounding boxu modelu (X √ó Y √ó Z v cm¬≥). Vhodn√© pro firmy, kter√© √∫ƒçtuj√≠ podle zabran√©ho prostoru v tisk√°rnƒõ, ne podle skuteƒçn√© hmotnosti.

**Admin nastaven√≠:**

* Cena za cm¬≥ bounding boxu (nap≈ô. 0.50 Kƒç/cm¬≥)  
* Minim√°ln√≠ cena za model (aby mal√© modely nebyly p≈ô√≠li≈° levn√©)  
* Volitelnƒõ: cenov√© p√°sma dle velikosti bounding boxu (0-100 cm¬≥ \= X Kƒç/cm¬≥, 100-500 cm¬≥ \= Y Kƒç/cm¬≥, 500+ cm¬≥ \= Z Kƒç/cm¬≥)

**V√Ωpoƒçet:** Bounding box volume \= max\_x √ó max\_y √ó max\_z (rozmƒõry modelu). Cena \= bounding\_box\_volume √ó cena\_za\_cm¬≥.

**V√Ωhody:** Jednoduch√Ω v√Ωpoƒçet, nevy≈æaduje slicov√°n√≠, okam≈æit√Ω v√Ωsledek po uploadu modelu.

**Nev√Ωhody:** Neodr√°≈æ√≠ skuteƒçnou slo≈æitost tisku ‚Äî dut√Ω model m√° stejnou cenu jako pln√Ω model stejn√Ωch rozmƒõr≈Ø.

---

### **15.2 Cenotvorba dle objemu modelu**

**Princip:** Cena z√°vis√≠ na objemu samotn√©ho modelu (ne bounding box, ale skuteƒçn√Ω objem 3D tƒõlesa v cm¬≥). P≈ôesnƒõj≈°√≠ ne≈æ bounding box, proto≈æe odr√°≈æ√≠ skuteƒçn√© mno≈æstv√≠ materi√°lu.

**Admin nastaven√≠:**

* Cena za cm¬≥ objemu modelu (nap≈ô. 2.00 Kƒç/cm¬≥)  
* Minim√°ln√≠ cena za model  
* Volitelnƒõ: koeficient pro zohlednƒõn√≠ v√Ωplnƒõ (objem √ó infill\_percentage √ó koeficient)

**V√Ωpoƒçet:** Volume se extrahuje p≈ôi uploadu modelu (knihovny jako trimesh v Pythonu um√≠ spoƒç√≠tat objem mesh). Cena \= model\_volume √ó cena\_za\_cm¬≥.

**V√Ωhody:** P≈ôesnƒõj≈°√≠ ne≈æ bounding box, st√°le nevy≈æaduje pln√© slicov√°n√≠ (jen anal√Ωzu geometrie).

**Nev√Ωhody:** Neodr√°≈æ√≠ dobu tisku ‚Äî vysok√Ω tenk√Ω model trv√° d√©le ne≈æ n√≠zk√Ω ≈°irok√Ω model stejn√©ho objemu.

---

### **15.3 Admin v√Ωbƒõr metody per materi√°l/technologii**

**Um√≠stƒõn√≠:** Admin \> Pricing ‚Äî nov√° sekce "Metoda cenotvorby" nebo dropdown na st√°vaj√≠c√≠ str√°nce.

**Glob√°ln√≠ nastaven√≠:** Dropdown "V√Ωchoz√≠ metoda cenotvorby" s volbami:

* **Slicer-based** (st√°vaj√≠c√≠ ‚Äî hmotnost \+ ƒças z PrusaSliceru) ‚Äî nejp≈ôesnƒõj≈°√≠, ale vy≈æaduje slicov√°n√≠  
* **Bounding Box** ‚Äî nejrychlej≈°√≠, nejm√©nƒõ p≈ôesn√Ω  
* **Volume** ‚Äî kompromis mezi rychlost√≠ a p≈ôesnost√≠  
* **Weight-only** ‚Äî pouze hmotnost materi√°lu bez ƒçasu  
* **Time-only** ‚Äî pouze doba tisku bez materi√°lu

**Per-materi√°l nastaven√≠:** V Admin \> Pricing \> Materi√°ly ‚Äî u ka≈æd√©ho materi√°lu mo≈ænost override glob√°ln√≠ metody. P≈ô√≠klad: PLA pou≈æ√≠v√° slicer-based (p≈ôesn√©), ale speci√°ln√≠ materi√°ly (prysky≈ôice, kov) pou≈æ√≠vaj√≠ volume-based.

**Per-technologie nastaven√≠ (pro budoucnost ‚Äî Sekce 18):** R≈Øzn√© technologie mohou vy≈æadovat r≈Øzn√© metody:

* FDM: slicer-based nebo volume  
* SLA: volume-based (prysky≈ôice se poƒç√≠t√° dle objemu)  
* CNC: time-based (ƒças obr√°bƒõn√≠)

**Backend implementace:**

Refaktorovat pricing pipeline tak, aby metoda cenotvorby byla konfigurovateln√°:

// Abstraktn√≠ interface

interface PricingStrategy {

  calculatePrice(model: Model, config: PricingConfig): PriceBreakdown;

}

// Implementace

class SlicerBasedPricing implements PricingStrategy { ... }

class BoundingBoxPricing implements PricingStrategy { ... }

class VolumePricing implements PricingStrategy { ... }

// Factory

function getPricingStrategy(method: PricingMethod): PricingStrategy {

  switch(method) {

    case 'SLICER': return new SlicerBasedPricing();

    case 'BOUNDING\_BOX': return new BoundingBoxPricing();

    case 'VOLUME': return new VolumePricing();

  }

}

**V konfiguraci tenanta** ulo≈æit zvolenou metodu. P≈ôi v√Ωpoƒçtu ceny vybrat odpov√≠daj√≠c√≠ strategii.

**UI indikace:** V Developer re≈æimu v kalkulaƒçce zobrazit, kter√° metoda cenotvorby byla pou≈æita.

---

## **SEKCE 16 ‚Äî Multijazyƒçnost a multimƒõnovost**

### **16.1 Syst√©m p≈ôeklad≈Ø pro widget**

**Princip i18n (internacionalizace):** V≈°echny textov√© ≈ôetƒõzce ve widgetu/kalkulaƒçce nahradit kl√≠ƒçi p≈ôekladu. P≈ôeklady ulo≈æit v JSON souborech per jazyk.

**Struktura p≈ôekladov√Ωch soubor≈Ø:**

/locales

  /cs.json    // ƒåe≈°tina (v√Ωchoz√≠)

  /en.json    // Angliƒçtina

  /de.json    // Nƒõmƒçina

  /sk.json    // Sloven≈°tina

  /pl.json    // Pol≈°tina

**P≈ô√≠klad cs.json:**

json

{

  "upload": {

    "title": "Nahr√°n√≠ 3D modelu",

    "subtitle": "Nahrajte sv√© 3D modely a nakonfigurujte parametry tisku.",

    "dropzone": "P≈ôet√°hnƒõte soubory sem nebo kliknƒõte pro v√Ωbƒõr",

    "supportedFormats": "Podporovan√© form√°ty: .stl, .obj, .3mf, .step"

  },

  "configuration": {

    "material": "Materi√°l",

    "color": "Barva",

    "layerQuality": "Kvalita vrstvy",

    "infill": "V√Ωpl≈à",

    "supports": "Podpƒõry",

    "quantity": "Poƒçet kus≈Ø"

  },

  "pricing": {

    "total": "Celkem",

    "material": "Materi√°l",

    "printTime": "ƒåas tisku",

    "services": "Slu≈æby",

    "discount": "Sleva",

    "shipping": "Doprava",

    "calculate": "Spoƒç√≠tat cenu",

    "recalculate": "P≈ôepoƒç√≠tat"

  },

  "checkout": {

    "contactInfo": "Kontaktn√≠ √∫daje",

    "name": "Jm√©no a p≈ô√≠jmen√≠",

    "email": "E-mail",

    "phone": "Telefon",

    "address": "Adresa",

    "note": "Pozn√°mka k objedn√°vce",

    "submit": "Odeslat objedn√°vku",

    "gdprConsent": "Souhlas√≠m se zpracov√°n√≠m osobn√≠ch √∫daj≈Ø"

  },

  "confirmation": {

    "title": "Dƒõkujeme za Va≈°i objedn√°vku\!",

    "orderNumber": "ƒå√≠slo objedn√°vky",

    "nextSteps": "Objedn√°vku nyn√≠ zpracov√°v√°me. Na email v√°m p≈ôijde potvrzen√≠."

  }

}

**Knihovny pro React:**

* **next-intl** (pro Next.js projekty) ‚Äî doporuƒçeno  
* **react-intl** (Format.js) ‚Äî robustn√≠, ≈°iroce pou≈æ√≠van√Ω  
* **i18next** \+ react-i18next ‚Äî velmi flexibiln√≠, velk√° komunita

**Implementace:**

jsx

*// Pou≈æit√≠ v komponentƒõ*

import { useTranslations } from 'next-intl';

function UploadStep() {

  const t \= useTranslations('upload');


  return (

    \<div\>

      \<h1\>{t('title')}\</h1\>

      \<p\>{t('subtitle')}\</p\>

      \<Dropzone label\={t('dropzone')} /\>

    \</div\>

  );

}

\`\`\`

\---

\#\#\# 16.2 Admin spr√°va jazyk≈Ø

\*\*Um√≠stƒõn√≠:\*\* Admin \> Widget \> Jazyk (roz≈°√≠≈ôen√≠ st√°vaj√≠c√≠ho p≈ôep√≠naƒçe CZ/CS) nebo nov√° str√°nka Admin \> Lokalizace.

\*\*Nastaven√≠:\*\*

\- \*\*V√Ωchoz√≠ jazyk widgetu\*\* ‚Äî dropdown s dostupn√Ωmi jazyky

\- \*\*Povolen√© jazyky\*\* ‚Äî multiselect, kter√© jazyky z√°kazn√≠k m≈Ø≈æe vybrat

\- \*\*Zobrazit p≈ôep√≠naƒç jazyk≈Ø\*\* ‚Äî toggle (ano/ne) ‚Äî pokud ne, widget je jen ve v√Ωchoz√≠m jazyce

\- \*\*Pozice p≈ôep√≠naƒçe\*\* ‚Äî hlaviƒçka widgetu / patiƒçka / skryt√Ω (jen URL parametr)

\*\*Vlastn√≠ p≈ôeklady (override):\*\*

\- Tabulka s kl√≠ƒçi p≈ôekladu a hodnotami

\- Admin m≈Ø≈æe p≈ôepsat v√Ωchoz√≠ p≈ôeklady vlastn√≠mi texty

\- Nap≈ô. zmƒõnit "Odeslat objedn√°vku" na "Odeslat popt√°vku" nebo "Objednat"

\- Search/filter pro rychl√© hled√°n√≠ kl√≠ƒçe

\*\*P≈ôid√°n√≠ nov√©ho jazyka:\*\*

\- Tlaƒç√≠tko "P≈ôidat jazyk"

\- V√Ωbƒõr z p≈ôedp≈ôipraven√Ωch jazyk≈Ø (cs, en, de, sk, pl, fr, es, it...)

\- Nebo upload vlastn√≠ho JSON souboru s p≈ôeklady

\- Mo≈ænost exportovat st√°vaj√≠c√≠ p≈ôeklady jako JSON ≈°ablonu pro p≈ôeklad

\*\*Datab√°zov√Ω model:\*\*

\`\`\`

Tabulka: tenant\_translations

\- id

\- tenant\_id

\- locale (cs, en, de...)

\- translation\_key (nap≈ô. "upload.title")

\- translation\_value (p≈ôepsan√° hodnota)

\- created\_at, updated\_at

---

### **16.3 Podpora v√≠ce mƒõn s p≈ôepoƒçtem**

**Admin nastaven√≠ (Admin \> Pricing nebo Admin \> Lokalizace):**

**Hlavn√≠ mƒõna:**

* Dropdown: CZK, EUR, USD, GBP, PLN, CHF...  
* V≈°echny ceny v admin panelu se zad√°vaj√≠ v t√©to mƒõnƒõ  
* Symbol mƒõny a form√°t (1.234,56 Kƒç vs 1,234.56 ‚Ç¨)

**Dodateƒçn√© mƒõny pro widget:**

* Multiselect povolen√Ωch mƒõn pro z√°kazn√≠ka  
* U ka≈æd√© mƒõny: pevn√Ω kurz (admin zad√° manu√°lnƒõ) NEBO automatick√Ω kurz (z API)

**Zdroj kurz≈Ø (pro automatick√Ω p≈ôepoƒçet):**

* exchangeratesapi.io (free tier dostupn√Ω)  
* fixer.io  
* Open Exchange Rates  
* Nebo vlastn√≠ endpoint firmy

**Frekvence aktualizace kurz≈Ø:** Dennƒõ / p≈ôi ka≈æd√©m naƒçten√≠ / manu√°lnƒõ

**Zobrazen√≠ ve widgetu:**

**P≈ôep√≠naƒç mƒõny:**

* V hlaviƒçce widgetu vedle p≈ôep√≠naƒçe jazyk≈Ø  
* Dropdown nebo segmented control (CZK | EUR | USD)

**Form√°tov√°n√≠ cen:**

* Pou≈æ√≠t Intl.NumberFormat pro spr√°vn√© form√°tov√°n√≠ dle locale

javascript

const formatPrice \= (amount, currency, locale) \=\> {

  return new Intl.NumberFormat(locale, {

    style: 'currency',

    currency: currency

  }).format(amount);

};

formatPrice(1234.56, 'CZK', 'cs-CZ'); *// "1 234,56 Kƒç"*

formatPrice(1234.56, 'EUR', 'de-DE'); *// "1.234,56 ‚Ç¨"*

formatPrice(1234.56, 'USD', 'en-US'); *// "$1,234.56"*

\`\`\`

\*\*Zobrazen√≠ p≈ôepoƒçtu:\*\*

\- Prim√°rn√≠ cena ve vybran√© mƒõnƒõ (velk√©)

\- Volitelnƒõ: p≈Øvodn√≠ cena v hlavn√≠ mƒõnƒõ v z√°vorce (men≈°√≠ text)

\- Nap≈ô. "‚Ç¨45.50 (1 150 Kƒç)"

\*\*D≈Øle≈æit√©:\*\*

\- Objedn√°vka se v≈ædy ukl√°d√° v hlavn√≠ mƒõnƒõ tenanta (pro konzistenci √∫ƒçetnictv√≠)

\- Zobrazen√° mƒõna z√°kazn√≠ka je informativn√≠

\- Na faktu≈ôe/potvrzen√≠ uv√©st obƒõ mƒõny nebo jen hlavn√≠ mƒõnu (konfigurovateln√©)

\---

\#\# SEKCE 17 ‚Äî E-commerce pluginy a integrace

ModelPricer aktu√°lnƒõ nab√≠z√≠ iframe embed s auto-resize skriptem a domain whitelist. AutoQuote3D nab√≠z√≠ one-line install pro Shopify, WordPress, Webflow. Roz≈°√≠≈ôen√≠ o dedikovan√© pluginy.

\#\#\# 17.1 WordPress/WooCommerce plugin

\*\*Funkcionalita pluginu:\*\*

\- P≈ôid√° shortcode \`\[modelpricer\]\` pro vlo≈æen√≠ kalkulaƒçky do str√°nky/p≈ô√≠spƒõvku

\- P≈ôid√° Gutenberg block "ModelPricer Calculator" pro vizu√°ln√≠ editor

\- Automaticky vlo≈æ√≠ iframe s konfigurac√≠ (widget ID, API kl√≠ƒç)

\- Responsive ‚Äî p≈ôizp≈Øsob√≠ se ≈°√≠≈ôce kontejneru

\*\*Nastaven√≠ v WordPress admin:\*\*

\- Str√°nka Settings \> ModelPricer

\- Pole: API kl√≠ƒç (z ModelPricer admin panelu)

\- Pole: Widget ID (z ModelPricer admin panelu)

\- Pole: V√Ωchoz√≠ ≈°√≠≈ôka (px nebo %)

\- Pole: V√Ωchoz√≠ jazyk

\- Checkbox: Povolit z√°kazn√≠kovi mƒõnit jazyk/mƒõnu

\*\*Shortcode parametry:\*\*

\`\`\`

\[modelpricer\]

\[modelpricer width\="100%" lang\="cs"\]

\[modelpricer widget\_id\="xyz123" height\="800px"\]

**Gutenberg block:**

* Vizu√°ln√≠ n√°hled v editoru (placeholder nebo live preview)  
* Sidebar s nastaven√≠m: ≈°√≠≈ôka, v√Ω≈°ka, jazyk, t√©ma  
* Drag-and-drop um√≠stƒõn√≠ na str√°nce

**WooCommerce integrace (pokroƒçil√©):**

* Vytvo≈ôit WooCommerce produkt typu "3D Print Service"  
* Z√°kazn√≠k nakonfiguruje v kalkulaƒçce, p≈ôid√° do ko≈°√≠ku WooCommerce  
* Checkout p≈ôes WooCommerce (vyu≈æit√≠ st√°vaj√≠c√≠ch platebn√≠ch bran)  
* Objedn√°vka se synchronizuje zpƒõt do ModelPricer admin panelu  
* Toto vy≈æaduje API integraci (Sekce 20\)

**Technick√° implementace:**

php

\<?php

*/\**

Plugin Name: ModelPricer 3D Print Calculator

Description: Embed ModelPricer calculator in your WordPress site

Version: 1.0.0

*\*/*

*// Shortcode*

function modelpricer\_shortcode($atts) {

    $atts \= shortcode\_atts(array(

        'widget\_id' \=\> get\_option('modelpricer\_widget\_id'),

        'width' \=\> '100%',

        'height' \=\> '800px',

        'lang' \=\> 'cs'

    ), $atts);

    

    $iframe\_url \= 'https://app.modelpricer.com/widget/' . $atts\['widget\_id'\] . '?lang=' . $atts\['lang'\];

    

    return '\<iframe 

        src="' . esc\_url($iframe\_url) . '" 

        width="' . esc\_attr($atts\['width'\]) . '" 

        height="' . esc\_attr($atts\['height'\]) . '"

        frameborder="0"

        style="border: none;"

    \>\</iframe\>';

}

add\_shortcode('modelpricer', 'modelpricer\_shortcode');

*// Admin settings page*

function modelpricer\_admin\_menu() {

    add\_options\_page(

        'ModelPricer Settings',

        'ModelPricer',

        'manage\_options',

        'modelpricer',

        'modelpricer\_settings\_page'

    );

}

add\_action('admin\_menu', 'modelpricer\_admin\_menu');

**Distribuce:**

* WordPress.org plugin repository (free, ve≈ôejn√©)  
* Nebo sta≈æen√≠ ZIP z ModelPricer admin panelu / webu  
* Automatick√© aktualizace p≈ôes WordPress update syst√©m

---

### **17.2 Shopify plugin**

**Shopify App:**

* Registrace v Shopify Partner Dashboard  
* App typu "Embedded app" s App Bridge  
* Distribuce p≈ôes Shopify App Store (nebo unlisted pro vlastn√≠ z√°kazn√≠ky)

**Funkcionalita:**

* P≈ôid√° "App Block" do Shopify Online Store 2.0 theme editoru  
* Merchant p≈ôet√°hne block na str√°nku (product page, custom page...)  
* Block renderuje ModelPricer iframe

**Nastaven√≠ v Shopify admin:**

* App str√°nka s konfigurac√≠  
* Propojen√≠ s ModelPricer √∫ƒçtem (OAuth flow nebo API kl√≠ƒç)  
* V√Ωbƒõr widget instance  
* Nastaven√≠ vzhledu (≈°√≠≈ôka, v√Ω≈°ka, t√©ma)

**App Block (theme extension):**

liquid

{% comment %} *blocks/modelpricer-calculator.liquid* {% endcomment %}

{% schema %}

{

  "name": "3D Print Calculator",

  "target": "section",

  "settings": \[

    {

      "type": "text",

      "id": "widget\_id",

      "label": "Widget ID",

      "default": ""

    },

    {

      "type": "range",

      "id": "height",

      "label": "Height (px)",

      "min": 400,

      "max": 1200,

      "step": 50,

      "default": 800

    }

  \]

}

{% endschema %}

\<div class\="modelpricer-container" style\="width: 100%;"\>

  \<iframe 

    src\="https://app.modelpricer.com/widget/{{ block.settings.widget\_id }}"

    width\="100%"

    height\="{{ block.settings.height }}px"

    frameborder\="0"

    style\="border: none;"\>

  \</iframe\>

\</div\>

**Shopify Checkout integrace (pokroƒçil√©):**

* Podobnƒõ jako WooCommerce ‚Äî p≈ôidat produkt do Shopify ko≈°√≠ku  
* Vyu≈æ√≠t Shopify Cart API a Checkout API  
* Vy≈æaduje Shopify Plus pro plnou checkout customizaci (nebo draft orders API)

---

### **17.3 Dokumentace pro integraci**

**Ve≈ôejn√° dokumentaƒçn√≠ str√°nka:** /docs nebo /integrace nebo docs.modelpricer.com

**Struktura dokumentace:**

**Zaƒç√≠n√°me (Getting Started):**

* Co je ModelPricer  
* Vytvo≈ôen√≠ √∫ƒçtu  
* Z√°kladn√≠ nastaven√≠ admin panelu  
* Z√≠sk√°n√≠ Widget ID a API kl√≠ƒçe

**Iframe Embed (z√°kladn√≠):**

* K√≥d pro vlo≈æen√≠ iframe  
* Parametry URL (lang, theme, currency...)  
* Auto-resize skript  
* P≈ô√≠klady pro r≈Øzn√© platformy (HTML, React, Vue, Angular)

**WordPress plugin:**

* Instalace pluginu  
* Konfigurace  
* Pou≈æit√≠ shortcode  
* Pou≈æit√≠ Gutenberg blocku  
* Troubleshooting

**Shopify app:**

* Instalace z App Store  
* Propojen√≠ √∫ƒçtu  
* P≈ôid√°n√≠ na str√°nku  
* Nastaven√≠ vzhledu

**Webflow/Squarespace/Wix:**

* N√°vod pro iframe vkl√°d√°n√≠ na platform√°ch bez plugin≈Ø  
* Custom code embed  
* Responzivn√≠ nastaven√≠

**API dokumentace (Sekce 20):**

* Odkaz na API reference  
* Autentizace  
* P≈ô√≠klady pou≈æit√≠

**Webhooky:**

* Dostupn√© ud√°losti  
* Form√°t payload  
* Ovƒõ≈ôen√≠ podpisu  
* P≈ô√≠klady handler≈Ø

**K√≥dov√© p≈ô√≠klady:**

**HTML:**

html

\<iframe 

  src\="https://app.modelpricer.com/widget/YOUR\_WIDGET\_ID" 

  width\="100%" 

  height\="800" 

  frameborder\="0"\>

\</iframe\>

\<script src\="https://app.modelpricer.com/embed.js"\>\</script\>

**React:**

jsx

import { ModelPricerWidget } from '@modelpricer/react';

function App() {

  return (

    \<ModelPricerWidget 

      widgetId\="YOUR\_WIDGET\_ID"

      lang\="cs"

      theme\="light"

      onOrderSubmit\={(order) \=\> console.log('Order:', order)}

    /\>

  );

}

**Vue:**

vue

\<template\>

  \<ModelPricerWidget 

    widget-id="YOUR\_WIDGET\_ID"

    lang="cs"

    @order-submit="handleOrder"

  /\>

\</template\>

\<script\>

import { ModelPricerWidget } from '@modelpricer/vue';

export default {

  components: { ModelPricerWidget },

  methods: {

    handleOrder(order) {

      console.log('Order:', order);

    }

  }

}

\</script\>

**Technologie dokumentace:**

* Staticky generovan√© str√°nky (MDX \+ Next.js, Docusaurus, nebo VitePress)  
* Nebo integrace s platformou (Notion, GitBook, ReadMe.io)  
* Search functionality (Algolia DocSearch nebo built-in)  
* Verzov√°n√≠ dokumentace (v1, v2...)  
* Changelog / What's New sekce

## **SEKCE 18 ‚Äî Pokroƒçil√© funkce (V√≠ce technologi√≠, Verzov√°n√≠, Supply chain)**

Toto je nejn√°roƒçnƒõj≈°√≠ sekce ‚Äî obsahuje fundament√°ln√≠ roz≈°√≠≈ôen√≠ architektury platformy.

### **18.1 Podpora v√≠ce v√Ωrobn√≠ch technologi√≠ (SLA, SLS, CNC)**

**AKTU√ÅLN√ç STAV:** ModelPricer je zamƒõ≈ôen na FDM/FFF tisk s PrusaSlicer. Roz≈°√≠≈ôen√≠ o dal≈°√≠ technologie vy≈æaduje z√°sadn√≠ architektur√°ln√≠ zmƒõny.

**Abstrakce konceptu "technologie":**

Nov√° entita v syst√©mu ‚Äî **Technology** (nebo Manufacturing Method):

* FDM (Fused Deposition Modeling) ‚Äî st√°vaj√≠c√≠  
* SLA (Stereolithography) ‚Äî prysky≈ôicov√Ω tisk  
* SLS (Selective Laser Sintering) ‚Äî pr√°≈°kov√Ω tisk  
* CNC Machining ‚Äî obr√°bƒõn√≠  
* Laser Cutting ‚Äî laserov√© ≈ôez√°n√≠

**Ka≈æd√° technologie m√° vlastn√≠:**

**Parametry:**

* FDM: v√Ωpl≈à, v√Ω≈°ka vrstvy, podpƒõry, teplota, rychlost  
* SLA: expozice, v√Ω≈°ka vrstvy, orientace, podpƒõry, post-cure  
* SLS: orientace, hustota balen√≠, post-processing  
* CNC: hloubka ≈ôezu, n√°stroj, rychlost posuvu, chlazen√≠

**Materi√°ly:**

* FDM: PLA, ABS, PETG, TPU, Nylon, PC...  
* SLA: Standard resin, Tough resin, Flexible resin, Castable resin...  
* SLS: Nylon PA11, PA12, TPU, PEEK...  
* CNC: Hlin√≠k, Ocel, Mosaz, D≈ôevo, Plast...

**Metodu cenotvorby:**

* FDM: slicer-based (hmotnost \+ ƒças)  
* SLA: volume-based (objem modelu √ó cena prysky≈ôice)  
* SLS: volume-based \+ bounding box (prostor v komo≈ôe)  
* CNC: time-based (ƒças obr√°bƒõn√≠) \+ materi√°l

**Slicovac√≠/v√Ωpoƒçetn√≠ engine:**

* FDM: PrusaSlicer, Cura, Slic3r  
* SLA: Chitubox, Lychee, nebo vlastn√≠ v√Ωpoƒçet  
* SLS: vlastn√≠ v√Ωpoƒçet (nen√≠ standardn√≠ slicer)  
* CNC: CAM software nebo vlastn√≠ kalkulace

**Admin panel ‚Äî Admin \> Technologie:**

**Seznam technologi√≠:**

* P≈ôeddefinovan√© technologie (FDM, SLA, SLS, CNC, Laser)  
* Mo≈ænost aktivovat/deaktivovat pro dan√©ho tenanta  
* Mo≈ænost p≈ôidat vlastn√≠ technologii (custom n√°zev, parametry)

**Konfigurace per technologie:**

* N√°zev a popis  
* Ikona  
* Dostupn√© materi√°ly (propojen√≠ na Admin \> Pricing \> Materi√°ly)  
* Parametry zobrazen√© ve widgetu (kter√© parametry z√°kazn√≠k m≈Ø≈æe nastavit)  
* Metoda cenotvorby (Sekce 15\)  
* Slicovac√≠ engine (pokud aplikovateln√©)  
* V√Ωchoz√≠ nastaven√≠

**Widget ‚Äî v√Ωbƒõr technologie:**

**Um√≠stƒõn√≠:** Jako prvn√≠ krok p≈ôed uploadem modelu, nebo jako souƒç√°st konfigurace.

**UI:** Karty/dla≈ædice s ikonami technologi√≠:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ   üñ®Ô∏è FDM    ‚îÇ  ‚îÇ   üíß SLA    ‚îÇ  ‚îÇ   ‚öôÔ∏è CNC    ‚îÇ

‚îÇ  3D Tisk    ‚îÇ  ‚îÇ  Prysky≈ôice ‚îÇ  ‚îÇ  Obr√°bƒõn√≠   ‚îÇ

‚îÇ  od 50 Kƒç   ‚îÇ  ‚îÇ  od 150 Kƒç  ‚îÇ  ‚îÇ  od 500 Kƒç  ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

**Po v√Ωbƒõru technologie:**

* Zobraz√≠ se relevantn√≠ upload (form√°ty dle technologie)  
* Zobraz√≠ se relevantn√≠ parametry konfigurace  
* Zobraz√≠ se relevantn√≠ materi√°ly

**Datab√°zov√Ω model:**

sql

*\-- Tabulka technologi√≠*

CREATE TABLE technologies (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  name VARCHAR(100) NOT NULL,

  slug VARCHAR(50) NOT NULL,

  description TEXT,

  icon\_url VARCHAR(500),

  pricing\_method VARCHAR(50), *\-- SLICER, VOLUME, BOUNDING\_BOX, TIME*

  slicer\_engine VARCHAR(50), *\-- PRUSASLICER, CHITUBOX, NONE*

  is\_active BOOLEAN DEFAULT true,

  sort\_order INTEGER,

  config JSONB, *\-- Dal≈°√≠ konfigurace specifick√° pro technologii*

  created\_at TIMESTAMP DEFAULT NOW()

);

*\-- Propojen√≠ technologie s materi√°ly*

CREATE TABLE technology\_materials (

  technology\_id UUID REFERENCES technologies(id),

  material\_id UUID REFERENCES materials(id),

  PRIMARY KEY (technology\_id, material\_id)

);

*\-- Parametry technologie*

CREATE TABLE technology\_parameters (

  id UUID PRIMARY KEY,

  technology\_id UUID REFERENCES technologies(id),

  name VARCHAR(100),

  slug VARCHAR(50),

  type VARCHAR(50), *\-- SLIDER, DROPDOWN, CHECKBOX, NUMBER*

  default\_value VARCHAR(100),

  options JSONB, *\-- Pro dropdown: \[{value, label}\]*

  min\_value NUMERIC,

  max\_value NUMERIC,

  is\_visible\_in\_widget BOOLEAN DEFAULT true,

  sort\_order INTEGER

);

**D≈ÆLE≈ΩIT√â:** Toto je velk√° architektur√°ln√≠ zmƒõna. Doporuƒçen√≠:

1. Zaƒç√≠t s refaktorem backendu pro podporu abstrakce technologi√≠  
2. FDM z≈Østane v√Ωchoz√≠ a plnƒõ funkƒçn√≠  
3. P≈ôid√°vat dal≈°√≠ technologie postupnƒõ (SLA jako druh√°, pak SLS, pak CNC)  
4. Ka≈æd√° technologie m≈Ø≈æe b√Ωt v "beta" stavu ne≈æ bude plnƒõ otestovan√°

---

### **18.2 Verzov√°n√≠ model≈Ø**

**Princip:** Z√°kazn√≠k m≈Ø≈æe nahr√°t aktualizovan√Ω model a syst√©m zachov√° historii verz√≠. U≈æiteƒçn√© pro iterativn√≠ n√°vrh ‚Äî z√°kazn√≠k uprav√≠ model, nahraje novou verzi, porovn√° ceny.

**Datab√°zov√Ω model:**

sql

*\-- Roz≈°√≠≈ôen√≠ tabulky model≈Ø*

CREATE TABLE model\_versions (

  id UUID PRIMARY KEY,

  model\_id UUID REFERENCES models(id), *\-- Hlavn√≠ model*

  version INTEGER NOT NULL, *\-- 1, 2, 3...*

  file\_url VARCHAR(500) NOT NULL,

  file\_name VARCHAR(255),

  file\_size BIGINT,

  *\-- Metadata z anal√Ωzy*

  bounding\_box JSONB, *\-- {x, y, z}*

  volume NUMERIC,

  surface\_area NUMERIC,

  triangle\_count INTEGER,

  *\-- V√Ωsledky slicov√°n√≠ (pokud provedeno)*

  slicer\_result JSONB,

  *\-- Cena (pokud spoƒç√≠t√°na)*

  calculated\_price NUMERIC,

  price\_breakdown JSONB,

  *\-- Timestamps*

  uploaded\_at TIMESTAMP DEFAULT NOW(),

  uploaded\_by UUID REFERENCES users(id)

);

*\-- Index pro rychl√© hled√°n√≠ verz√≠ modelu*

CREATE INDEX idx\_model\_versions\_model\_id ON model\_versions(model\_id);

**Workflow v kalkulaƒçce:**

**Nahr√°n√≠ nov√© verze:**

* U existuj√≠c√≠ho modelu v panelu "Nahran√© modely" tlaƒç√≠tko "Nahr√°t novou verzi"  
* Nebo drag-and-drop na existuj√≠c√≠ model  
* Syst√©m detekuje, ≈æe jde o aktualizaci (stejn√Ω n√°zev souboru nebo explicitn√≠ akce)

**Zobrazen√≠ verz√≠:**

* U modelu ikona/badge "v3" indikuj√≠c√≠ aktu√°ln√≠ verzi  
* Kliknut√≠m rozbalit historii verz√≠  
* Ka≈æd√° verze zobrazuje: datum, rozmƒõry, cenu (pokud spoƒç√≠t√°na)

**Porovn√°n√≠ verz√≠:**

* Tlaƒç√≠tko "Porovnat s p≈ôedchoz√≠ verz√≠"  
* Side-by-side zobrazen√≠: 3D n√°hled obou verz√≠, rozd√≠ly v rozmƒõrech, rozd√≠l v cenƒõ  
* Vizu√°ln√≠ diff (pokud technicky mo≈æn√©) ‚Äî overlay zmƒõnƒõn√Ωch ƒç√°st√≠

**Admin panel:**

* V detailu objedn√°vky zobrazit historii verz√≠ modelu  
* Mo≈ænost st√°hnout kteroukoliv verzi  
* Audit log zmƒõn

**Z√°kaznick√Ω port√°l:**

* Z√°kazn√≠k vid√≠ historii verz√≠ sv√Ωch model≈Ø  
* M≈Ø≈æe se vr√°tit k p≈ôedchoz√≠ verzi  
* M≈Ø≈æe objednat star≈°√≠ verzi

---

### **18.3 Supply chain a spr√°va dodavatel≈Ø**

**Princip:** Pro firmy, kter√© outsourcuj√≠ tisk extern√≠m dodavatel≈Øm nebo maj√≠ s√≠≈• partnersk√Ωch tisk√°ren.

**Admin panel ‚Äî Admin \> Dodavatel√©:**

**Seznam dodavatel≈Ø:**

* N√°zev firmy  
* Kontaktn√≠ √∫daje (email, telefon, adresa)  
* Podporovan√© technologie (FDM, SLA, SLS...)  
* Podporovan√© materi√°ly  
* Kapacita (poƒçet tisk√°ren, max. objem/mƒõs√≠c)  
* Cen√≠k (mar≈æe nebo fixn√≠ ceny)  
* Dodac√≠ lh≈Øty  
* Kvalitativn√≠ hodnocen√≠ (intern√≠)  
* Aktivn√≠/neaktivn√≠

**P≈ôi≈ôazen√≠ objedn√°vky dodavateli:**

**Manu√°ln√≠ p≈ôi≈ôazen√≠:**

* V detailu objedn√°vky dropdown "P≈ôi≈ôadit dodavateli"  
* V√Ωbƒõr z aktivn√≠ch dodavatel≈Ø  
* Volitelnƒõ: automatick√© odesl√°n√≠ emailu dodavateli s detaily objedn√°vky

**Automatick√© p≈ôi≈ôazen√≠ (pokroƒçil√©):**

* Pravidla pro automatick√© routov√°n√≠ objedn√°vek  
* Nap≈ô. "Objedn√°vky SLA ‚Üí Dodavatel X", "Objedn√°vky nad 1000 Kƒç ‚Üí Dodavatel Y"  
* Load balancing ‚Äî rovnomƒõrn√© rozdƒõlen√≠ mezi dodavatele dle kapacity

**Sledov√°n√≠ stavu u dodavatele:**

* Dodavatel m≈Ø≈æe m√≠t p≈ô√≠stup do omezen√©ho port√°lu  
* Nebo integrace p≈ôes API/webhook  
* Stavy: P≈ôijato dodavatelem ‚Üí Ve v√Ωrobƒõ ‚Üí Odesl√°no ‚Üí Doruƒçeno zpƒõt

**Finanƒçn√≠ p≈ôehled:**

* N√°klady na dodavatele vs. cena pro z√°kazn√≠ka  
* Mar≈æe per objedn√°vka  
* Report n√°klad≈Ø per dodavatel za obdob√≠

**Datab√°zov√Ω model:**

sql

CREATE TABLE suppliers (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  name VARCHAR(255) NOT NULL,

  email VARCHAR(255),

  phone VARCHAR(50),

  address JSONB,

  supported\_technologies UUID\[\], *\-- Reference na technologies*

  supported\_materials UUID\[\], *\-- Reference na materials*

  capacity JSONB, *\-- {printers: 5, monthly\_volume: 1000}*

  pricing JSONB, *\-- Cen√≠k nebo mar≈æe*

  lead\_time\_days INTEGER,

  rating INTEGER, *\-- 1-5*

  notes TEXT,

  is\_active BOOLEAN DEFAULT true,

  created\_at TIMESTAMP DEFAULT NOW()

);

CREATE TABLE order\_supplier\_assignments (

  id UUID PRIMARY KEY,

  order\_id UUID REFERENCES orders(id),

  supplier\_id UUID REFERENCES suppliers(id),

  assigned\_at TIMESTAMP DEFAULT NOW(),

  assigned\_by UUID REFERENCES users(id),

  status VARCHAR(50), *\-- PENDING, ACCEPTED, IN\_PRODUCTION, SHIPPED, DELIVERED*

  supplier\_notes TEXT,

  cost NUMERIC, *\-- N√°klady od dodavatele*

  tracking\_number VARCHAR(100)

);

**D≈ÆLE≈ΩIT√â:** Toto je enterprise funkce. Implementovat a≈æ po stabilizaci z√°kladn√≠ch funkc√≠. Vƒõt≈°ina men≈°√≠ch tisk√°ren toto nepot≈ôebuje.

---

## **SEKCE 19 ‚Äî CRM, Marketing a Analytika**

### **19.1 Roz≈°√≠≈ôen√° z√°kaznick√° datab√°ze a segmentace**

**Admin panel ‚Äî Admin \> Z√°kazn√≠ci:**

**Seznam z√°kazn√≠k≈Ø:**

* Tabulka v≈°ech z√°kazn√≠k≈Ø (z objedn√°vek a registrac√≠ v z√°kaznick√©m port√°lu)  
* Sloupce: Jm√©no, Email, Telefon, Poƒçet objedn√°vek, Celkov√° √∫trata, Posledn√≠ aktivita, Tagy  
* Filtry: dle tag≈Ø, √∫traty, frekvence, data registrace  
* Vyhled√°v√°n√≠: dle jm√©na, emailu, telefonu  
* Export: CSV, Excel

**Detail z√°kazn√≠ka:**

* Kontaktn√≠ √∫daje (editovateln√©)  
* Historie objedn√°vek (tabulka s odkazy na detail objedn√°vky)  
* Statistiky:  
  * Celkov√° √∫trata (lifetime value)  
  * Poƒçet objedn√°vek  
  * Pr≈Ømƒõrn√° hodnota objedn√°vky  
  * Nejƒçastƒõj≈°√≠ materi√°ly  
  * Posledn√≠ objedn√°vka (datum)  
  * Prvn√≠ objedn√°vka (datum)  
* Komunikace (pokud implementov√°n chat ‚Äî Sekce 11\)  
* Pozn√°mky (intern√≠ pozn√°mky t√Ωmu o z√°kazn√≠kovi)  
* Tagy/≈°t√≠tky

**Segmentace ‚Äî Tagy:**

* P≈ôeddefinovan√© tagy: VIP, B2B, Nov√Ω, Opakovan√Ω, Probl√©mov√Ω, Neaktivn√≠  
* Vlastn√≠ tagy (admin vytv√°≈ô√≠)  
* Automatick√© tagov√°n√≠ dle pravidel:  
  * "VIP" pokud celkov√° √∫trata \> 10 000 Kƒç  
  * "Opakovan√Ω" pokud poƒçet objedn√°vek \> 3  
  * "Neaktivn√≠" pokud posledn√≠ objedn√°vka \> 180 dn√≠

**Segmenty (ulo≈æen√© filtry):**

* Admin m≈Ø≈æe vytvo≈ôit pojmenovan√Ω segment s filtry  
* Nap≈ô. "VIP z√°kazn√≠ci v Praze" \= tag:VIP AND mƒõsto:Praha  
* Segmenty se pou≈æ√≠vaj√≠ pro c√≠len√© kampanƒõ (bod 19.3)

**Datab√°zov√Ω model:**

sql

CREATE TABLE customers (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  email VARCHAR(255) NOT NULL,

  name VARCHAR(255),

  phone VARCHAR(50),

  company VARCHAR(255),

  ico VARCHAR(20),

  dic VARCHAR(20),

  address JSONB,

  *\-- Statistiky (denormalizovan√© pro rychlost)*

  total\_spent NUMERIC DEFAULT 0,

  order\_count INTEGER DEFAULT 0,

  average\_order\_value NUMERIC DEFAULT 0,

  first\_order\_at TIMESTAMP,

  last\_order\_at TIMESTAMP,

  *\-- Metadata*

  source VARCHAR(50), *\-- WIDGET, IMPORT, MANUAL*

  notes TEXT,

  created\_at TIMESTAMP DEFAULT NOW(),

  updated\_at TIMESTAMP DEFAULT NOW()

);

CREATE TABLE customer\_tags (

  customer\_id UUID REFERENCES customers(id),

  tag\_id UUID REFERENCES tags(id),

  assigned\_at TIMESTAMP DEFAULT NOW(),

  assigned\_by UUID REFERENCES users(id),

  PRIMARY KEY (customer\_id, tag\_id)

);

CREATE TABLE tags (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  name VARCHAR(100) NOT NULL,

  color VARCHAR(7), *\-- Hex color*

  is\_auto BOOLEAN DEFAULT false, *\-- Automaticky p≈ôi≈ôazovan√Ω*

  auto\_rules JSONB *\-- Pravidla pro automatick√© p≈ôi≈ôazen√≠*

);

CREATE TABLE customer\_segments (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  name VARCHAR(100) NOT NULL,

  filters JSONB NOT NULL, *\-- {tags: \[...\], min\_spent: 1000, ...}*

  customer\_count INTEGER, *\-- Cache poƒçtu z√°kazn√≠k≈Ø*

  created\_at TIMESTAMP DEFAULT NOW()

);

\`\`\`

\---

\#\#\# 19.2 Abandoned cart tracking

\*\*Princip:\*\* Sledov√°n√≠ kalkulac√≠, kter√© nebyly dokonƒçeny jako objedn√°vka. Cenn√° data pro pochopen√≠ konverzn√≠ho trycht√Ω≈ôe a mo≈ænost follow-up.

\*\*Co se sleduje:\*\*

\- Z√°kazn√≠k nahraje model ‚úì

\- Z√°kazn√≠k nakonfiguruje parametry ‚úì

\- Z√°kazn√≠k spoƒç√≠t√° cenu ‚úì

\- Z√°kazn√≠k zad√° kontaktn√≠ √∫daje (ƒç√°steƒçnƒõ nebo √∫plnƒõ)

\- Z√°kazn√≠k NEODE≈†LE objedn√°vku ‚úó

\*\*Ulo≈æen√° data pro abandoned cart:\*\*

\- Session ID / fingerprint

\- Timestamp zaƒç√°tku a posledn√≠ aktivity

\- Nahran√© modely (URL soubor≈Ø)

\- Konfigurace (materi√°l, preset, mno≈æstv√≠...)

\- Spoƒç√≠tan√° cena

\- Kontaktn√≠ √∫daje (pokud zad√°ny ‚Äî zejm√©na email)

\- Zdroj n√°v≈°tƒõvy (referrer, UTM parametry)

\- Za≈ô√≠zen√≠ (desktop/mobile, prohl√≠≈æeƒç)

\*\*Admin panel ‚Äî Admin \> Analytics \> Ztracen√© kalkulace:\*\*

Z√°lo≈æka ji≈æ existuje ‚Äî roz≈°√≠≈ôit o:

\*\*P≈ôehledov√Ω dashboard:\*\*

\- Poƒçet abandoned carts za obdob√≠

\- Celkov√° hodnota abandoned carts

\- Konverzn√≠ pomƒõr (dokonƒçen√© / zapoƒçat√©)

\- Graf trendu v ƒçase

\*\*Seznam abandoned carts:\*\*

\- Tabulka: Datum, Email (pokud zn√°m), Modely, Cena, Posledn√≠ krok, Akce

\- Filtry: obdob√≠, cenov√© rozmez√≠, s emailem / bez emailu

\- Detail: kompletn√≠ informace o session, mo≈ænost vidƒõt 3D n√°hledy model≈Ø

\*\*Akce:\*\*

\- "Odeslat follow-up email" (manu√°ln√≠) ‚Äî pokud m√°me email

\- "Vytvo≈ôit objedn√°vku" ‚Äî admin m≈Ø≈æe ruƒçnƒõ dokonƒçit objedn√°vku za z√°kazn√≠ka (po telefonick√© dohodƒõ)

\- "Smazat" ‚Äî GDPR compliance, smaz√°n√≠ dat

\*\*Automatick√Ω follow-up email (voliteln√©):\*\*

\*\*Konfigurace v Admin \> Notifikace nebo Admin \> Marketing:\*\*

\- Zapnout/vypnout automatick√Ω follow-up

\- ƒåasov√Ω delay (nap≈ô. 24 hodin po opu≈°tƒõn√≠)

\- Maxim√°ln√≠ poƒçet follow-up≈Ø (nap≈ô. max 2\)

\- Emailov√° ≈°ablona

\*\*≈†ablona emailu:\*\*

\`\`\`

P≈ôedmƒõt: Zapomnƒõli jste na svou objedn√°vku?

Dobr√Ω den,

v≈°imli jsme si, ≈æe jste nedokonƒçili svou objedn√°vku 3D tisku.

Va≈°e cenov√° nab√≠dka:

\- Model: \[n√°zev souboru\]

\- Materi√°l: \[materi√°l\]

\- Cena: \[cena\] Kƒç

\[Tlaƒç√≠tko: Dokonƒçit objedn√°vku\]

Odkaz v√°s vr√°t√≠ p≈ô√≠mo k va≈°√≠ rozpracovan√© objedn√°vce.

M√°te dotazy? Odpovƒõzte na tento email.

**Technick√° implementace:**

* P≈ôi ka≈æd√© v√Ωznamn√© akci v kalkulaƒçce ukl√°dat stav do abandoned\_carts tabulky  
* Cron job / scheduled task kontroluje abandoned carts star≈°√≠ ne≈æ X hodin  
* Pokud je email a nebyl odesl√°n follow-up, odeslat  
* Sledovat otev≈ôen√≠ emailu a kliknut√≠ (tracking pixel, UTM parametry)

**Datab√°zov√Ω model:**

sql

CREATE TABLE abandoned\_carts (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  session\_id VARCHAR(100),

  *\-- Kontakt*

  email VARCHAR(255),

  name VARCHAR(255),

  phone VARCHAR(50),

  *\-- Obsah ko≈°√≠ku*

  models JSONB, *\-- \[{file\_url, file\_name, config, price}\]*

  total\_price NUMERIC,

  *\-- Metadata*

  last\_step VARCHAR(50), *\-- UPLOAD, CONFIG, PRICING, CONTACT*

  source\_url VARCHAR(500),

  utm\_params JSONB,

  device\_info JSONB,

  *\-- Timestamps*

  started\_at TIMESTAMP DEFAULT NOW(),

  last\_activity\_at TIMESTAMP DEFAULT NOW(),

  *\-- Follow-up tracking*

  followup\_count INTEGER DEFAULT 0,

  last\_followup\_at TIMESTAMP,

  recovered\_at TIMESTAMP, *\-- Pokud se vr√°til a dokonƒçil*

  order\_id UUID REFERENCES orders(id) *\-- Pokud konvertoval*

);

CREATE INDEX idx\_abandoned\_carts\_email ON abandoned\_carts(email);

CREATE INDEX idx\_abandoned\_carts\_tenant\_last\_activity 

  ON abandoned\_carts(tenant\_id, last\_activity\_at);

\`\`\`

\---

\#\#\# 19.3 Emailov√© kampanƒõ a marketingov√° automatizace

\*\*Admin panel ‚Äî Admin \> Marketing:\*\*

\*\*Dashboard:\*\*

\- P≈ôehled aktivn√≠ch kampan√≠

\- Statistiky: odesl√°no, otev≈ôeno, prokliknuto, konvertov√°no

\- Rychl√© akce: Nov√° kampa≈à, Nov√° automatizace

\*\*Kampanƒõ (jednor√°zov√© emaily):\*\*

\*\*Vytvo≈ôen√≠ kampanƒõ:\*\*

1\. N√°zev kampanƒõ

2\. V√Ωbƒõr p≈ô√≠jemc≈Ø:

   \- V≈°ichni z√°kazn√≠ci

   \- Segment (z bodu 19.1)

   \- Manu√°ln√≠ v√Ωbƒõr

   \- Import seznamu email≈Ø

3\. Obsah emailu:

   \- P≈ôedmƒõt

   \- WYSIWYG editor nebo HTML editor

   \- Personalizace: {{name}}, {{last\_order\_date}}, {{total\_spent}}

   \- N√°hled (desktop/mobile)

4\. Pl√°nov√°n√≠:

   \- Odeslat ihned

   \- Napl√°novat na datum/ƒças

5\. Odesl√°n√≠ / ulo≈æen√≠ jako draft

\*\*Statistiky kampanƒõ:\*\*

\- Odesl√°no: X

\- Doruƒçeno: X (X%)

\- Otev≈ôeno: X (X%) ‚Äî tracking pixel

\- Prokliknuto: X (X%) ‚Äî UTM tracking

\- Odhl√°≈°eno: X

\- Konvertov√°no (objedn√°vka): X

\*\*Automatizace (triggered emaily):\*\*

\*\*Typy automatizac√≠:\*\*

\- \*\*Welcome email\*\* ‚Äî p≈ôi registraci z√°kazn√≠ka

\- \*\*Abandoned cart\*\* ‚Äî po opu≈°tƒõn√≠ ko≈°√≠ku (bod 19.2)

\- \*\*Post-purchase\*\* ‚Äî X dn√≠ po dokonƒçen√≠ objedn√°vky (≈æ√°dost o recenzi)

\- \*\*Win-back\*\* ‚Äî z√°kazn√≠k neobjednal X dn√≠

\- \*\*Birthday\*\* ‚Äî narozeniny (pokud m√°me datum)

\- \*\*Milestone\*\* ‚Äî X-t√° objedn√°vka, utraceno X Kƒç

\*\*Konfigurace automatizace:\*\*

\- Trigger (ud√°lost)

\- Delay (ihned / za X hodin/dn√≠)

\- Podm√≠nky (jen pro segment, jen pokud...)

\- Emailov√° ≈°ablona

\- Aktivn√≠/neaktivn√≠

\*\*≈†ablony email≈Ø:\*\*

\- Knihovna p≈ôeddefinovan√Ωch ≈°ablon

\- Drag-and-drop email builder (nebo integrace s existuj√≠c√≠m)

\- Responzivn√≠ design

\- Ulo≈æen√≠ vlastn√≠ch ≈°ablon

\*\*Alternativa ‚Äî integrace s existuj√≠c√≠ platformou:\*\*

M√≠sto budov√°n√≠ vlastn√≠ho email marketingu integrovat s:

\- \*\*Mailchimp\*\* ‚Äî nejroz≈°√≠≈ôenƒõj≈°√≠, robustn√≠ API

\- \*\*Brevo (ex Sendinblue)\*\* ‚Äî dobr√° cena, EU hosting

\- \*\*Klaviyo\*\* ‚Äî specializovan√Ω na e-commerce

\- \*\*Customer.io\*\* ‚Äî flexibiln√≠ automatizace

\*\*Integrace by zahrnovala:\*\*

\- Synchronizace z√°kazn√≠k≈Ø (customers ‚Üí email list)

\- Synchronizace tag≈Ø/segment≈Ø

\- Webhook pro eventy (objedn√°vka, abandoned cart)

\- Admin UI pro propojen√≠ √∫ƒçt≈Ø a z√°kladn√≠ nastaven√≠

\*\*Doporuƒçen√≠:\*\* Pro MVP integrovat s Mailchimp/Brevo. Vlastn√≠ email marketing budovat jen pokud je to core feature.

\---

\#\# SEKCE 20 ‚Äî Ve≈ôejn√© API a Developer port√°l

\#\#\# 20.1 REST API design a endpointy

\*\*Base URL:\*\* \`https:*//api.modelpricer.com/v1\`*

\*\*Autentizace:\*\* Bearer token v hlaviƒçce

\`\`\`

Authorization: Bearer mp\_live\_xxxxxxxxxxxx

**Form√°t odpovƒõd√≠:** JSON

json

{

  "success": true,

  "data": { ... },

  "meta": {

    "request\_id": "req\_abc123",

    "timestamp": "2024-01-15T10:30:00Z"

  }

}

**Chybov√© odpovƒõdi:**

json

{

  "success": false,

  "error": {

    "code": "VALIDATION\_ERROR",

    "message": "Invalid file format",

    "details": {

      "field": "file",

      "allowed": \[".stl", ".obj", ".3mf"\]

    }

  }

}

\`\`\`

\*\*Endpointy:\*\*

\*\*Models (Modely):\*\*

\`\`\`

POST   /models/upload          Nahr√°n√≠ modelu

GET    /models/{id}            Detail modelu

DELETE /models/{id}            Smaz√°n√≠ modelu

GET    /models/{id}/analysis   Anal√Ωza modelu (rozmƒõry, objem...)

\`\`\`

\*\*Quotes (Cenov√© nab√≠dky):\*\*

\`\`\`

POST   /quotes                 Vytvo≈ôen√≠ cenov√© nab√≠dky

GET    /quotes/{id}            Detail nab√≠dky

GET    /quotes                 Seznam nab√≠dek (s filtrac√≠)

\`\`\`

\*\*Orders (Objedn√°vky):\*\*

\`\`\`

POST   /orders                 Vytvo≈ôen√≠ objedn√°vky

GET    /orders/{id}            Detail objedn√°vky

GET    /orders                 Seznam objedn√°vek (s filtrac√≠)

PATCH  /orders/{id}            Aktualizace objedn√°vky (status, pozn√°mky)

\`\`\`

\*\*Materials (Materi√°ly):\*\*

\`\`\`

GET    /materials              Seznam dostupn√Ωch materi√°l≈Ø

GET    /materials/{id}         Detail materi√°lu

\`\`\`

\*\*Presets:\*\*

\`\`\`

GET    /presets                Seznam dostupn√Ωch preset≈Ø

GET    /presets/{id}           Detail presetu

\`\`\`

\*\*Shipping (Doprava):\*\*

\`\`\`

GET    /shipping-methods       Seznam dopravn√≠ch metod

POST   /shipping/calculate     Kalkulace ceny dopravy

\`\`\`

\*\*Customers (Z√°kazn√≠ci):\*\*

\`\`\`

GET    /customers              Seznam z√°kazn√≠k≈Ø

GET    /customers/{id}         Detail z√°kazn√≠ka

POST   /customers              Vytvo≈ôen√≠ z√°kazn√≠ka

PATCH  /customers/{id}         Aktualizace z√°kazn√≠ka

\`\`\`

\*\*Webhooks:\*\*

\`\`\`

GET    /webhooks               Seznam webhook≈Ø

POST   /webhooks               Vytvo≈ôen√≠ webhooku

DELETE /webhooks/{id}          Smaz√°n√≠ webhooku

**P≈ô√≠klady request≈Ø:**

**Upload modelu:**

bash

curl \-X POST https://api.modelpricer.com/v1/models/upload \\\\

  \-H "Authorization: Bearer mp\_live\_xxx" \\\\

  \-F "file=@model.stl" \\\\

  \-F "name=My Model"

Response:

json

{

  "success": true,

  "data": {

    "id": "mod\_abc123",

    "name": "My Model",

    "file\_name": "model.stl",

    "file\_size": 1234567,

    "status": "processing",

    "analysis": null,

    "created\_at": "2024-01-15T10:30:00Z"

  }

}

**Vytvo≈ôen√≠ cenov√© nab√≠dky:**

bash

curl \-X POST https://api.modelpricer.com/v1/quotes \\\\

  \-H "Authorization: Bearer mp\_live\_xxx" \\\\

  \-H "Content-Type: application/json" \\\\

  \-d '{

    "models": \[

      {

        "model\_id": "mod\_abc123",

        "material\_id": "mat\_pla",

        "preset\_id": "pre\_standard",

        "quantity": 5,

        "color": "red",

        "infill": 20

      }

    \]

  }'

Response:

json

{

  "success": true,

  "data": {

    "id": "quo\_xyz789",

    "status": "calculated",

    "models": \[

      {

        "model\_id": "mod\_abc123",

        "name": "My Model",

        "quantity": 5,

        "unit\_price": 150.00,

        "total\_price": 750.00,

        "breakdown": {

          "material": 45.00,

          "time": 95.00,

          "fees": 10.00

        }

      }

    \],

    "subtotal": 750.00,

    "discount": 0,

    "shipping": null,

    "total": 750.00,

    "currency": "CZK",

    "valid\_until": "2024-01-22T10:30:00Z"

  }

}

**Vytvo≈ôen√≠ objedn√°vky:**

bash

curl \-X POST https://api.modelpricer.com/v1/orders \\\\

  \-H "Authorization: Bearer mp\_live\_xxx" \\\\

  \-H "Content-Type: application/json" \\\\

  \-d '{

    "quote\_id": "quo\_xyz789",

    "customer": {

      "name": "Jan Nov√°k",

      "email": "jan@example.com",

      "phone": "+420123456789"

    },

    "shipping\_address": {

      "street": "Hlavn√≠ 123",

      "city": "Praha",

      "postal\_code": "11000",

      "country": "CZ"

    },

    "shipping\_method\_id": "shp\_ceska\_posta",

    "note": "Pros√≠m zabalit jednotlivƒõ"

  }'

\`\`\`

\---

*\#\#\# 20.2 API kl√≠ƒçe a autentizace*

\*\*Admin panel ‚Äî Admin \> API:\*\*

\*\*Spr√°va API kl√≠ƒç≈Ø:\*\*

\- Seznam existuj√≠c√≠ch kl√≠ƒç≈Ø

\- Vytvo≈ôen√≠ nov√©ho kl√≠ƒçe

\- Smaz√°n√≠/revokace kl√≠ƒçe

\- Regenerace kl√≠ƒçe

\*\*Vytvo≈ôen√≠ API kl√≠ƒçe:\*\*

\- N√°zev (pro identifikaci, nap≈ô. "E-shop integrace", "Mobiln√≠ app")

\- Typ: Live (produkƒçn√≠) / Test (sandbox)

\- Opr√°vnƒõn√≠ (scopes):

  \- \`models:read\`, \`models:write\`

  \- \`quotes:read\`, \`quotes:write\`

  \- \`orders:read\`, \`orders:write\`

  \- \`customers:read\`, \`customers:write\`

  \- \`webhooks:manage\`

\- IP whitelist (voliteln√© ‚Äî omezen√≠ na konkr√©tn√≠ IP adresy)

\- Expiraƒçn√≠ datum (voliteln√©)

\*\*Form√°t kl√≠ƒç≈Ø:\*\*

\- Live: \`mp\_live\_xxxxxxxxxxxxxxxxxxxxxxxx\`

\- Test: \`mp\_test\_xxxxxxxxxxxxxxxxxxxxxxxx\`

\*\*Zobrazen√≠ kl√≠ƒçe:\*\*

\- Kl√≠ƒç se zobraz√≠ pouze jednou p≈ôi vytvo≈ôen√≠

\- Pot√© je ulo≈æen hashovan√Ω (nelze znovu zobrazit)

\- Mo≈ænost regenerovat (star√Ω p≈ôestane fungovat)

\*\*Rate limiting:\*\*

\- V√Ωchoz√≠: 100 request≈Ø/minuta

\- Vy≈°≈°√≠ limity pro vy≈°≈°√≠ tarify

\- Hlaviƒçky v response:

\`\`\`

  X-RateLimit-Limit: 100

  X-RateLimit-Remaining: 95

  X-RateLimit-Reset: 1705312260

* P≈ôi p≈ôekroƒçen√≠: HTTP 429 Too Many Requests

**Logov√°n√≠ API vol√°n√≠:**

sql

CREATE TABLE api\_logs (

  id UUID PRIMARY KEY,

  api\_key\_id UUID REFERENCES api\_keys(id),

  tenant\_id UUID REFERENCES tenants(id),

  endpoint VARCHAR(255),

  method VARCHAR(10),

  request\_body JSONB,

  response\_status INTEGER,

  response\_time\_ms INTEGER,

  ip\_address INET,

  user\_agent VARCHAR(500),

  created\_at TIMESTAMP DEFAULT NOW()

);

CREATE INDEX idx\_api\_logs\_key\_created ON api\_logs(api\_key\_id, created\_at);

**Statistiky v admin panelu:**

* Poƒçet API vol√°n√≠ za obdob√≠  
* Graf vol√°n√≠ v ƒçase  
* Nejpou≈æ√≠vanƒõj≈°√≠ endpointy  
* Chybovost (4xx, 5xx responses)  
* Pr≈Ømƒõrn√° response time

---

### **20.3 Developer dokumentace a port√°l**

**URL:** `developers.modelpricer.com` nebo `modelpricer.com/developers`

**Struktura dokumentace:**

**1\. √övod (Getting Started):**

* Co je ModelPricer API  
* Registrace a z√≠sk√°n√≠ API kl√≠ƒçe  
* Autentizace  
* Prvn√≠ API vol√°n√≠ (quick start)  
* Sandbox vs. Production

**2\. API Reference:**

* Interaktivn√≠ dokumentace (Swagger/OpenAPI)  
* Ka≈æd√Ω endpoint:  
  * Popis  
  * HTTP metoda a URL  
  * Parametry (path, query, body)  
  * Request p≈ô√≠klad  
  * Response p≈ô√≠klad  
  * Mo≈æn√© chyby  
* "Try it out" ‚Äî mo≈ænost testovat p≈ô√≠mo z dokumentace

**3\. Guides (N√°vody):**

* Kompletn√≠ integrace krok za krokem  
* Headless widget implementace  
* Webhook handling  
* Error handling best practices  
* Pagination a filtrov√°n√≠  
* Optimalizace v√Ωkonu

**4\. Webhooky:**

* Dostupn√© ud√°losti:  
  * `order.created`  
  * `order.updated`  
  * `order.completed`  
  * `order.cancelled`  
  * `quote.created`  
  * `quote.expired`  
* Form√°t payload  
* Ovƒõ≈ôen√≠ podpisu (HMAC)  
* Retry policy  
* P≈ô√≠klady handler≈Ø (Node.js, Python, PHP)

**5\. SDKs a knihovny:**

* JavaScript/TypeScript: `@modelpricer/js`  
* Python: `modelpricer-python`  
* PHP: `modelpricer/modelpricer-php`  
* (Nebo community maintained)

**6\. Changelog:**

* Historie zmƒõn API  
* Breaking changes  
* Nov√© features  
* Deprecation notices

**7\. Status page:**

* Aktu√°ln√≠ stav slu≈æby  
* Pl√°novan√° √∫dr≈æba  
* Historie incident≈Ø

**Technick√° implementace dokumentace:**

**OpenAPI specifikace:**

yaml

openapi: 3.0.3

info:

  title: ModelPricer API

  version: 1.0.0

  description: API for 3D printing price calculation and order management

servers:

  \- url: https://api.modelpricer.com/v1

    description: Production

  \- url: https://api.sandbox.modelpricer.com/v1

    description: Sandbox

security:

  \- bearerAuth: \[\]

paths:

  /models/upload:

    post:

      summary: Upload a 3D model

      tags: \[Models\]

      requestBody:

        content:

          multipart/form-data:

            schema:

              type: object

              properties:

                file:

                  type: string

                  format: binary

                name:

                  type: string

      responses:

        '201':

          description: Model uploaded successfully

          content:

            application/json:

              schema:

                $ref: '\#/components/schemas/Model'

        '400':

          description: Invalid file

        '401':

          description: Unauthorized

components:

  securitySchemes:

    bearerAuth:

      type: http

      scheme: bearer

  schemas:

    Model:

      type: object

      properties:

        id:

          type: string

        name:

          type: string

        file\_name:

          type: string

        status:

          type: string

          enum: \[processing, ready, error\]

        created\_at:

          type: string

          format: date-time

**N√°stroje pro dokumentaci:**

* **Swagger UI** ‚Äî interaktivn√≠ dokumentace z OpenAPI spec  
* **Redoc** ‚Äî alternativn√≠ renderer, hezƒç√≠ design  
* **Stoplight** ‚Äî komplexn√≠ platforma pro API design a dokumentaci  
* **ReadMe.io** ‚Äî hosted dokumentace s analytics

**SDK p≈ô√≠klad (JavaScript):**

javascript

*// @modelpricer/js*

import { ModelPricer } from '@modelpricer/js';

const client \= new ModelPricer({

  apiKey: 'mp\_live\_xxx',

  *// sandbox: true // Pro testov√°n√≠*

});

*// Upload modelu*

const model \= await client.models.upload({

  file: fs.createReadStream('model.stl'),

  name: 'My Model'

});

*// Vytvo≈ôen√≠ cenov√© nab√≠dky*

const quote \= await client.quotes.create({

  models: \[{

    modelId: model.id,

    materialId: 'mat\_pla',

    quantity: 5

  }\]

});

*// Vytvo≈ôen√≠ objedn√°vky*

const order \= await client.orders.create({

  quoteId: quote.id,

  customer: {

    name: 'Jan Nov√°k',

    email: 'jan@example.com'

  }

});

*// Webhook handling*

client.webhooks.on('order.created', (event) \=\> {

  console.log('New order:', event.data.order);

});

## **SEKCE 21 ‚Äî Bezpeƒçnost, Danƒõ a Enterprise**

### **21.1 Da≈àov√Ω management (DPH/VAT)**

**Admin panel ‚Äî Admin \> Nastaven√≠ \> Danƒõ (nebo Admin \> Pricing \> Danƒõ):**

**Z√°kladn√≠ nastaven√≠ DPH:**

* **Hlavn√≠ sazba DPH:** dropdown s bƒõ≈æn√Ωmi sazbami (21% CZ, 19% DE, 20% SK, 23% PL, 20% AT...) nebo vlastn√≠ hodnota  
* **Ceny v admin panelu jsou:** radio button ‚Äî "S DPH" / "Bez DPH"  
* **Zobrazen√≠ ve widgetu:** checkbox volby:  
  * Zobrazit cenu bez DPH  
  * Zobrazit cenu s DPH  
  * Zobrazit obƒõ (nap≈ô. "1 000 Kƒç bez DPH / 1 210 Kƒç s DPH")

**V√≠cero da≈àov√Ωch sazeb:**

* Nƒõkter√© slu≈æby mohou m√≠t jinou sazbu (nap≈ô. doprava 21%, ale speci√°ln√≠ slu≈æby 15%)  
* Tabulka sazeb: N√°zev, Sazba (%), V√Ωchoz√≠ (ano/ne), Pou≈æ√≠t pro (Produkty/Slu≈æby/Doprava)  
* U ka≈æd√©ho materi√°lu/fee mo≈ænost vybrat da≈àovou sazbu

**Fakturaƒçn√≠ √∫daje firmy:**

* N√°zev firmy  
* IƒåO  
* DIƒå (pro pl√°tce DPH)  
* Adresa s√≠dla  
* Bankovn√≠ √∫ƒçet (ƒç√≠slo √∫ƒçtu, IBAN, SWIFT)  
* Tyto √∫daje se pou≈æij√≠ na faktur√°ch (Sekce 13\) a v patiƒçce email≈Ø

**B2B ‚Äî Reverse charge (p≈ôenesen√° da≈àov√° povinnost):**

**Princip:** P≈ôi prodeji do EU firm√°m s platn√Ωm DIƒå se DPH ne√∫ƒçtuje (reverse charge mechanismus).

**Implementace:**

* V kontaktn√≠m formul√°≈ôi (Sekce 2\) pole "DIƒå" pro B2B z√°kazn√≠ky  
* P≈ôi zad√°n√≠ DIƒå automatick√° validace p≈ôes **VIES API** (EU slu≈æba pro ovƒõ≈ôen√≠ DIƒå)  
* Pokud je DIƒå platn√© a z√°kazn√≠k je z jin√© EU zemƒõ:  
  * Cena se zobraz√≠ bez DPH  
  * Na faktu≈ôe text "Reverse charge ‚Äî da≈à odvede odbƒõratel"  
* Pokud DIƒå neplatn√© nebo stejn√° zemƒõ: standardn√≠ DPH

**VIES API integrace:**

javascript

*// P≈ô√≠klad vol√°n√≠ VIES API*

async function validateVAT(countryCode, vatNumber) {

  const response \= await fetch('https://ec.europa.eu/taxation\_customs/vies/rest-api/ms/' \+ countryCode \+ '/vat/' \+ vatNumber);

  const data \= await response.json();

  return {

    valid: data.isValid,

    name: data.name,

    address: data.address

  };

}

**Zobrazen√≠ v kalkulaƒçce:**

* Pokud z√°kazn√≠k zad√° platn√© EU DIƒå: "Cena bez DPH (reverse charge): XXX ‚Ç¨"  
* Badge/info box vysvƒõtluj√≠c√≠ reverse charge

**Datab√°zov√Ω model:**

sql

CREATE TABLE tax\_rates (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  name VARCHAR(100) NOT NULL, *\-- "Z√°kladn√≠ sazba", "Sn√≠≈æen√° sazba"*

  rate NUMERIC(5,2) NOT NULL, *\-- 21.00, 15.00, 10.00*

  is\_default BOOLEAN DEFAULT false,

  applies\_to VARCHAR(50)\[\], *\-- \['PRODUCTS', 'SERVICES', 'SHIPPING'\]*

  is\_active BOOLEAN DEFAULT true

);

CREATE TABLE tenant\_tax\_settings (

  tenant\_id UUID PRIMARY KEY REFERENCES tenants(id),

  prices\_include\_tax BOOLEAN DEFAULT true,

  display\_price\_with\_tax BOOLEAN DEFAULT true,

  display\_price\_without\_tax BOOLEAN DEFAULT false,

  enable\_reverse\_charge BOOLEAN DEFAULT true,

  company\_name VARCHAR(255),

  company\_ico VARCHAR(20),

  company\_dic VARCHAR(20),

  company\_address JSONB,

  bank\_account VARCHAR(50),

  iban VARCHAR(50),

  swift VARCHAR(20)

);

\`\`\`

\---

\#\#\# 21.2 Kreditov√Ω syst√©m pro z√°kazn√≠ky

\*\*Princip:\*\* Z√°kazn√≠ci si mohou p≈ôedplatit kredit (dob√≠t √∫ƒçet) a pot√© objedn√°vat z kreditn√≠ho z≈Østatku. V√Ωhodn√© pro opakovan√© z√°kazn√≠ky a B2B klienty.

\*\*Admin nastaven√≠ ‚Äî Admin \> Nastaven√≠ \> Kredity:\*\*

\- \*\*Povolit kreditov√Ω syst√©m:\*\* toggle (ano/ne)

\- \*\*Minim√°ln√≠ dobit√≠:\*\* ƒç√°stka (nap≈ô. 500 Kƒç)

\- \*\*Bonusov√© kredity:\*\* volitelnƒõ ‚Äî "P≈ôi dobit√≠ 1000 Kƒç bonus 50 Kƒç" (tabulka p√°sem)

\- \*\*Expirace kredit≈Ø:\*\* poƒçet dn√≠ nebo "nikdy" (POZOR: √∫ƒçetn√≠/pr√°vn√≠ implikace)

\*\*Z√°kaznick√Ω port√°l ‚Äî sekce "M≈Øj kredit":\*\*

\*\*P≈ôehled:\*\*

\- Aktu√°ln√≠ z≈Østatek (prominentnƒõ)

\- Tlaƒç√≠tko "Dob√≠t kredit"

\- Historie transakc√≠

\*\*Dobit√≠ kreditu:\*\*

\- V√Ωbƒõr ƒç√°stky (p≈ôeddefinovan√©: 500 / 1000 / 2000 Kƒç nebo vlastn√≠)

\- Zobrazen√≠ bonusu (pokud nastaven)

\- P≈ôesmƒõrov√°n√≠ na platebn√≠ br√°nu (napojen√≠ na Stripe/PayPal ‚Äî implementov√°no samostatnƒõ dle u≈æivatele)

\- Po √∫spƒõ≈°n√© platbƒõ: p≈ôips√°n√≠ kreditu, email s potvrzen√≠m

\*\*Historie transakc√≠:\*\*

\- Tabulka: Datum, Typ, ƒå√°stka, Z≈Østatek po transakci, Popis

\- Typy: DOBIT√ç, PLATBA\_OBJEDN√ÅVKY, REFUND, MANU√ÅLN√ç\_√öPRAVA, EXPIRACE

\- Export CSV

\*\*Platba kreditem v kalkulaƒçce:\*\*

\*\*Na kroku checkout:\*\*

\- Pokud m√° z√°kazn√≠k kredit \> 0, zobrazit:

\`\`\`

  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

  ‚îÇ üí≥ V√°≈° kreditov√Ω z≈Østatek: 1 500 Kƒç    ‚îÇ

  ‚îÇ                                         ‚îÇ

  ‚îÇ ‚óã Zaplatit kreditem (zbyde 800 Kƒç)     ‚îÇ

  ‚îÇ ‚óã Zaplatit jinak                        ‚îÇ

  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

* Pokud kredit nestaƒç√≠ na celou objedn√°vku:  
  * Mo≈ænost A: "Kredit nestaƒç√≠. Dobijte si kredit nebo zvolte jinou platbu."  
  * Mo≈ænost B: Kombinovan√° platba ‚Äî ƒç√°st kreditem, zbytek kartou (slo≈æitƒõj≈°√≠ implementace)

**Admin panel ‚Äî spr√°va kredit≈Ø z√°kazn√≠k≈Ø:**

**V detailu z√°kazn√≠ka (Admin \> Z√°kazn√≠ci \> Detail):**

* Aktu√°ln√≠ z≈Østatek  
* Historie transakc√≠  
* Tlaƒç√≠tko "P≈ôidat/Odebrat kredit" (manu√°ln√≠ √∫prava):  
  * ƒå√°stka (+/-)  
  * D≈Øvod (pozn√°mka do logu)  
  * Notifikovat z√°kazn√≠ka emailem (checkbox)

**P≈ôehled v Admin \> Z√°kazn√≠ci:**

* Sloupec "Kredit" v tabulce  
* Filtr "Z√°kazn√≠ci s kreditem \> 0"  
* Celkov√Ω objem nevyƒçerpan√Ωch kredit≈Ø (√∫ƒçetn√≠ p≈ôehled)

**Datab√°zov√Ω model:**

sql

CREATE TABLE customer\_credit\_balances (

  customer\_id UUID PRIMARY KEY REFERENCES customers(id),

  balance NUMERIC(12,2) NOT NULL DEFAULT 0,

  updated\_at TIMESTAMP DEFAULT NOW()

);

CREATE TABLE credit\_transactions (

  id UUID PRIMARY KEY,

  customer\_id UUID REFERENCES customers(id),

  type VARCHAR(50) NOT NULL, *\-- TOPUP, CHARGE, REFUND, MANUAL, EXPIRATION, BONUS*

  amount NUMERIC(12,2) NOT NULL, *\-- Kladn√© \= p≈ôips√°n√≠, z√°porn√© \= odeps√°n√≠*

  balance\_after NUMERIC(12,2) NOT NULL,

  *\-- Reference*

  order\_id UUID REFERENCES orders(id), *\-- Pro CHARGE a REFUND*

  payment\_id VARCHAR(100), *\-- ID platby z platebn√≠ br√°ny pro TOPUP*

  *\-- Metadata*

  description TEXT,

  created\_by UUID REFERENCES users(id), *\-- Pro MANUAL*

  created\_at TIMESTAMP DEFAULT NOW()

);

CREATE INDEX idx\_credit\_transactions\_customer ON credit\_transactions(customer\_id, created\_at);

\`\`\`

\---

\#\#\# 21.3 Custom dom√©ny pro widget

\*\*Princip:\*\* Z√°kazn√≠k ModelPriceru m≈Ø≈æe nastavit vlastn√≠ subdom√©nu (nap≈ô. \`kalkulacka.mojefirma.cz\`) m√≠sto pou≈æ√≠v√°n√≠ iframe embedu. Widget pak bƒõ≈æ√≠ p≈ô√≠mo na dom√©nƒõ z√°kazn√≠ka.

\*\*Admin panel ‚Äî Admin \> Widget \> Custom Domain:\*\*

\*\*Nastaven√≠:\*\*

1\. \*\*Zad√°n√≠ dom√©ny:\*\* input pole pro dom√©nu (nap≈ô. \`kalkulacka.mojefirma.cz\` nebo \`cenova\-nabidka.firma.com\`)

2\. \*\*DNS instrukce:\*\* zobrazit z√°kazn√≠kovi co mus√≠ nastavit:

\`\`\`

   Pro aktivaci custom dom√©ny p≈ôidejte tento DNS z√°znam:

   

   Typ: CNAME

   N√°zev: kalkulacka (nebo va≈°e subdom√©na)

   Hodnota: custom.modelpricer.com

   TTL: 3600

3. **Ovƒõ≈ôen√≠:** tlaƒç√≠tko "Ovƒõ≈ôit DNS" ‚Äî syst√©m zkontroluje CNAME z√°znam  
4. **SSL certifik√°t:** po ovƒõ≈ôen√≠ DNS automatick√© vystaven√≠ Let's Encrypt certifik√°tu  
5. **Status:** Pending DNS / DNS ovƒõ≈ôeno / SSL aktivn√≠ / Aktivn√≠

**Stavy dom√©ny:**

* **Pending DNS:** ƒçek√° na nastaven√≠ CNAME z√°kazn√≠kem  
* **DNS ovƒõ≈ôeno:** CNAME spr√°vnƒõ, generuje se SSL  
* **SSL aktivn√≠:** certifik√°t vystaven, dom√©na funguje  
* **Chyba:** probl√©m s DNS nebo SSL (zobrazit detail)

**Technick√° implementace:**

**Reverse proxy (nginx/Caddy):**

nginx

*\# Nginx konfigurace pro custom dom√©ny*

server {

    listen 443 ssl http2;

    server\_name \~^(?\<subdomain\>.+)\\\\.modelpricer\\\\.com$ \~^(?\<custom\_domain\>.+)$;

    

    *\# Dynamick√Ω SSL certifik√°t (Let's Encrypt)*

    ssl\_certificate /etc/letsencrypt/live/$host/fullchain.pem;

    ssl\_certificate\_key /etc/letsencrypt/live/$host/privkey.pem;

    

    location / {

        proxy\_pass http://widget-app:3000;

        proxy\_set\_header Host $host;

        proxy\_set\_header X-Custom-Domain $host;

    }

}

\`\`\`

\*\*Nebo Caddy (jednodu≈°≈°√≠ automatick√Ω SSL):\*\*

\`\`\`

{

    on\_demand\_tls {

        ask http://api:8000/verify-domain

    }

}

:443 {

    tls {

        on\_demand

    }

    reverse\_proxy widget-app:3000

}

**Backend logika:**

* P≈ôi requestu na custom dom√©nu: lookup v datab√°zi kter√° tenant/widget instance pat≈ô√≠ k dom√©nƒõ  
* Vr√°tit odpov√≠daj√≠c√≠ widget konfiguraci (branding, materi√°ly, presety...)  
* Endpoint `/verify-domain` pro Caddy ‚Äî ovƒõ≈ô√≠ ≈æe dom√©na je v DB a aktivn√≠

**Datab√°zov√Ω model:**

sql

CREATE TABLE custom\_domains (

  id UUID PRIMARY KEY,

  tenant\_id UUID REFERENCES tenants(id),

  widget\_id UUID REFERENCES widgets(id),

  domain VARCHAR(255) NOT NULL UNIQUE,

  status VARCHAR(50) DEFAULT 'pending\_dns', *\-- pending\_dns, dns\_verified, ssl\_active, active, error*

  dns\_verified\_at TIMESTAMP,

  ssl\_issued\_at TIMESTAMP,

  ssl\_expires\_at TIMESTAMP,

  error\_message TEXT,

  created\_at TIMESTAMP DEFAULT NOW(),

  updated\_at TIMESTAMP DEFAULT NOW()

);

CREATE INDEX idx\_custom\_domains\_domain ON custom\_domains(domain);

\`\`\`

\*\*Omezen√≠ dle tarifu:\*\*

\- Free/Starter: ≈æ√°dn√° custom dom√©na

\- Professional: 1 custom dom√©na

\- Enterprise: neomezeno

\---

\#\#\# 21.4 Bezpeƒçnostn√≠ standardy a SLA

\*\*Aktu√°ln√≠ bezpeƒçnostn√≠ opat≈ôen√≠ (ji≈æ implementovan√° nebo standardn√≠):\*\*

\*\*≈†ifrov√°n√≠:\*\*

\- HTTPS/TLS 1.3 pro ve≈°kerou komunikaci

\- Certifik√°ty: Let's Encrypt s automatickou obnovou

\- HSTS hlaviƒçka pro vynucen√≠ HTTPS

\*\*Autentizace a autorizace:\*\*

\- Hesla hashovan√° pomoc√≠ bcrypt (cost factor 12+)

\- JWT tokeny pro session management

\- Refresh tokeny s rotac√≠

\- Rate limiting na login endpoint (ochrana proti brute-force)

\- Account lockout po X ne√∫spƒõ≈°n√Ωch pokusech

\*\*Ochrana aplikace:\*\*

\- CSRF tokeny pro v≈°echny formul√°≈ôe

\- XSS ochrana ‚Äî sanitizace vstup≈Ø, Content-Security-Policy hlaviƒçka

\- SQL injection prevence ‚Äî parameterizovan√© dotazy (ORM)

\- File upload validace ‚Äî kontrola MIME typu, velikosti, roz≈°√≠≈ôen√≠

\*\*Infrastruktura:\*\*

\- Firewall pravidla

\- DDoS ochrana (Cloudflare nebo podobn√©)

\- Oddƒõlen√© datab√°zov√© servery

\- Pravideln√© bezpeƒçnostn√≠ aktualizace

\*\*GDPR compliance:\*\*

\*\*Pr√°va subjekt≈Ø √∫daj≈Ø:\*\*

\- \*\*Pr√°vo na p≈ô√≠stup:\*\* z√°kazn√≠k m≈Ø≈æe v port√°lu vidƒõt v≈°echna sv√° data

\- \*\*Pr√°vo na v√Ωmaz:\*\* tlaƒç√≠tko "Smazat m≈Øj √∫ƒçet" ‚Äî sma≈æe osobn√≠ √∫daje, anonymizuje objedn√°vky

\- \*\*Pr√°vo na p≈ôenositelnost:\*\* export dat ve strojovƒõ ƒçiteln√©m form√°tu (JSON/CSV)

\- \*\*Pr√°vo na opravu:\*\* z√°kazn√≠k m≈Ø≈æe editovat sv√© √∫daje

\*\*Admin n√°stroje pro GDPR:\*\*

\- Admin \> Z√°kazn√≠ci \> Detail \> "Exportovat data z√°kazn√≠ka"

\- Admin \> Z√°kazn√≠ci \> Detail \> "Smazat z√°kazn√≠ka" (s potvrzen√≠m a logem)

\- Automatick√© maz√°n√≠ neaktivn√≠ch √∫ƒçt≈Ø po X letech (konfigurovateln√©)

\*\*Dokumentace:\*\*

\- Z√°sady ochrany osobn√≠ch √∫daj≈Ø (Privacy Policy) ‚Äî ≈°ablona \+ mo≈ænost √∫pravy

\- Cookie policy

\- Souhlas se zpracov√°n√≠m (checkbox v kontaktn√≠m formul√°≈ôi)

\*\*Z√°lohy a disaster recovery:\*\*

\*\*Z√°lohy datab√°ze:\*\*

\- Automatick√© denn√≠ z√°lohy

\- Point-in-time recovery (posledn√≠ 7-30 dn√≠)

\- Z√°lohy ulo≈æen√© v jin√© geografick√© lokaci

\- Testov√°n√≠ obnovy ze z√°lohy (mƒõs√≠ƒçnƒõ)

\*\*Z√°lohy soubor≈Ø:\*\*

\- 3D modely ulo≈æen√© na redundantn√≠m storage (S3 s cross-region replication)

\- Verzov√°n√≠ soubor≈Ø

\*\*Disaster recovery pl√°n:\*\*

\- RTO (Recovery Time Objective): max 4 hodiny

\- RPO (Recovery Point Objective): max 1 hodina

\- Dokumentovan√Ω postup obnovy

\- Pravideln√© DR testy

\*\*SLA (Service Level Agreement):\*\*

\*\*Pro Enterprise z√°kazn√≠ky:\*\*

\- \*\*Dostupnost:\*\* 99.9% uptime (max \~8.7 hodin v√Ωpadku/rok)

\- \*\*Response time:\*\* 95% request≈Ø pod 500ms

\- \*\*Support response:\*\* 

  \- Critical issues: 1 hodina

  \- High priority: 4 hodiny

  \- Normal: 24 hodin

\- \*\*Planned maintenance:\*\* ozn√°men√≠ 72 hodin p≈ôedem, mimo ≈°piƒçku

\- \*\*Kompenzace:\*\* kredity za nedodr≈æen√≠ SLA (nap≈ô. 10% mƒõs√≠ƒçn√≠ho poplatku za ka≈æd√Ωch 0.1% pod SLA)

\*\*Monitoring a alerting:\*\*

\- Uptime monitoring (Pingdom, UptimeRobot, nebo vlastn√≠)

\- APM (Application Performance Monitoring) ‚Äî Sentry, DataDog, New Relic

\- Alerting na Slack/email p≈ôi v√Ωpadku nebo degradaci

\- Status page (status.modelpricer.com) s histori√≠ incident≈Ø

\*\*Budouc√≠ bezpeƒçnostn√≠ certifikace (Enterprise roadmap):\*\*

\- \*\*SOC 2 Type II:\*\* audit bezpeƒçnostn√≠ch kontrol

\- \*\*ISO 27001:\*\* certifikace syst√©mu ≈ô√≠zen√≠ bezpeƒçnosti informac√≠

\- \*\*ITAR compliance:\*\* pro z√°kazn√≠ky z defense sektoru (US)

\---

\#\# SEKCE 22 ‚Äî Onboarding a Tutori√°ly

\#\#\# 22.1 Video tutori√°ly pro admin panel

\*\*Princip:\*\* S√©rie kr√°tk√Ωch, zamƒõ≈ôen√Ωch video tutori√°l≈Ø pokr√Ωvaj√≠c√≠ch v≈°echny aspekty admin panelu. AutoQuote3D m√° 7 vide√≠ ‚Äî ModelPricer by mƒõl m√≠t minim√°lnƒõ stejnƒõ.

\*\*Seznam video tutori√°l≈Ø:\*\*

\*\*1. √övod do ModelPricer (3-5 min)\*\*

\- Co je ModelPricer a jak funguje

\- P≈ôehled admin panelu ‚Äî navigace, sekce

\- Workflow: nastaven√≠ ‚Üí widget ‚Üí objedn√°vky

\*\*2. Nastaven√≠ cenotvorby (5-7 min)\*\*

\- Admin \> Pricing ‚Äî p≈ôehled str√°nky

\- Nastaven√≠ ceny za materi√°l (Kƒç/gram)

\- Nastaven√≠ ceny za ƒças tisku (Kƒç/hodina)

\- Minim√°ln√≠ ceny a zaokrouhlov√°n√≠

\- Testovac√≠ kalkulaƒçka ‚Äî jak ovƒõ≈ôit nastaven√≠

\*\*3. Spr√°va materi√°l≈Ø a barev (4-6 min)\*\*

\- P≈ôid√°n√≠ nov√©ho materi√°lu

\- Nastaven√≠ barev pro materi√°l

\- Aktivace/deaktivace materi√°l≈Ø

\- Zobrazen√≠ ve widgetu

\*\*4. Presety a parametry tisku (5-7 min)\*\*

\- Co jsou presety a proƒç jsou d≈Øle≈æit√©

\- Nahr√°n√≠ .ini souboru z PrusaSliceru

\- Konfigurace viditelnosti preset≈Ø

\- Nastaven√≠ v√Ωchoz√≠ho presetu

\- Parametry tisku ‚Äî viditelnost ve widgetu

\*\*5. P≈ô√≠platky a slu≈æby (4-6 min)\*\*

\- Admin \> Fees ‚Äî p≈ôehled

\- Vytvo≈ôen√≠ p≈ô√≠platku (express, post-processing...)

\- Typy p≈ô√≠platk≈Ø (dle hmotnosti, ƒçasu, procenta)

\- Podm√≠nky pro aplikaci p≈ô√≠platku

\- Zobrazen√≠ ve widgetu

\*\*6. Vlo≈æen√≠ kalkulaƒçky na web (3-5 min)\*\*

\- Admin \> Widget ‚Äî konfigurace

\- Z√≠sk√°n√≠ embed k√≥du

\- Vlo≈æen√≠ na WordPress/Shopify/HTML str√°nku

\- Nastaven√≠ dom√©n (whitelist)

\- Testov√°n√≠ embedu

\*\*7. Spr√°va objedn√°vek (5-7 min)\*\*

\- Admin \> Orders ‚Äî p≈ôehled

\- Filtry a vyhled√°v√°n√≠

\- Detail objedn√°vky

\- Zmƒõna stavu objedn√°vky

\- Export objedn√°vek

\*\*8. Branding a vzhled (3-5 min)\*\*

\- Admin \> Branding

\- Nahr√°n√≠ loga

\- Nastaven√≠ barev

\- V√Ωbƒõr fontu

\- N√°hled zmƒõn

\*\*Produkce vide√≠:\*\*

\*\*Form√°t:\*\*

\- Screencast s voice-over

\- Rozli≈°en√≠: 1080p

\- D√©lka: 3-7 minut (krat≈°√≠ \= lep≈°√≠)

\- Jasn√° struktura: √∫vod ‚Üí kroky ‚Üí shrnut√≠

\*\*N√°stroje:\*\*

\- Nahr√°v√°n√≠: Loom, OBS Studio, Camtasia, ScreenFlow

\- Editace: DaVinci Resolve (free), Premiere Pro, Final Cut

\- Hosting: YouTube (embed), Vimeo, nebo vlastn√≠ (Cloudflare Stream, Mux)

\*\*Um√≠stƒõn√≠ vide√≠:\*\*

\- Str√°nka \`/podpora\` nebo \`/tutorials\` na webu ModelPricer

\- Embed v admin panelu ‚Äî ikona "?" vedle ka≈æd√© sekce s odkazem na relevantn√≠ video

\- YouTube playlist pro SEO a discoverability

\*\*Lokalizace:\*\*

\- Prim√°rnƒõ ƒçe≈°tina

\- Anglick√© titulky (pro mezin√°rodn√≠ z√°kazn√≠ky)

\- V budoucnu: anglick√° verze voice-over

\---

\#\#\# 22.2 Interaktivn√≠ onboarding pr≈Øvodce

\*\*Princip:\*\* P≈ôi prvn√≠m p≈ôihl√°≈°en√≠ nov√©ho admina zobrazit step-by-step pr≈Øvodce, kter√Ω ho provede z√°kladn√≠m nastaven√≠m. Sni≈æuje "time to value" a redukuje support dotazy.

\*\*Trigger:\*\* Pr≈Øvodce se zobraz√≠ automaticky p≈ôi:

\- Prvn√≠m p≈ôihl√°≈°en√≠ po registraci

\- Nebo pokud tenant nem√° dokonƒçen√Ω z√°kladn√≠ setup (≈æ√°dn√Ω materi√°l, ≈æ√°dn√Ω preset)

\*\*Struktura pr≈Øvodce:\*\*

\*\*√övodn√≠ obrazovka (modal):\*\*

\`\`\`

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

‚îÇ                                                 ‚îÇ

‚îÇ         üéâ V√≠tejte v ModelPricer\!              ‚îÇ

‚îÇ                                                 ‚îÇ

‚îÇ   Provedeme v√°s z√°kladn√≠m nastaven√≠m za        ‚îÇ

‚îÇ   5 minut. Pot√© budete p≈ôipraveni p≈ôij√≠mat     ‚îÇ

‚îÇ   objedn√°vky.                                   ‚îÇ

‚îÇ                                                 ‚îÇ

‚îÇ   \[ Zaƒç√≠t nastaven√≠ \]     \[ P≈ôeskoƒçit \]        ‚îÇ

‚îÇ                                                 ‚îÇ

‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*Krok 1: Branding\*\*

\`\`\`

Krok 1 z 5: Va≈°e znaƒçka

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óè‚óã‚óã‚óã‚óã

Nahrajte logo va≈°√≠ firmy a nastavte z√°kladn√≠ barvy.

Toto se zobraz√≠ z√°kazn√≠k≈Øm v kalkulaƒçce.

\[Nahr√°t logo\]

Prim√°rn√≠ barva: \[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\] üé®

\[ ‚Üê Zpƒõt \]              \[ Dal≈°√≠ ‚Üí \]

\`\`\`

\*\*Krok 2: Cenotvorba\*\*

\`\`\`

Krok 2 z 5: Nastaven√≠ cen

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óè‚óè‚óã‚óã‚óã

Nastavte z√°kladn√≠ ceny pro v√Ωpoƒçet.

Cena materi√°lu:    \[ 0.50 \] Kƒç/gram

Cena ƒçasu tisku:   \[ 1.00 \] Kƒç/minuta

Minim√°ln√≠ cena:    \[ 50   \] Kƒç

üí° Tip: Tyto hodnoty m≈Ø≈æete kdykoliv upravit v Admin \> Pricing.

\[ ‚Üê Zpƒõt \]              \[ Dal≈°√≠ ‚Üí \]

\`\`\`

\*\*Krok 3: Materi√°ly\*\*

\`\`\`

Krok 3 z 5: Materi√°ly

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óè‚óè‚óè‚óã‚óã

Vyberte materi√°ly, kter√© nab√≠z√≠te:

‚òëÔ∏è PLA (nejbƒõ≈ænƒõj≈°√≠)

‚òëÔ∏è PETG

‚òê ABS

‚òê TPU (flexibiln√≠)

‚òê Nylon

Nebo p≈ôidejte vlastn√≠: \[ \+ P≈ôidat materi√°l \]

\[ ‚Üê Zpƒõt \]              \[ Dal≈°√≠ ‚Üí \]

\`\`\`

\*\*Krok 4: Preset\*\*

\`\`\`

Krok 4 z 5: Tiskov√° kvalita

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óè‚óè‚óè‚óè‚óã

Nahrajte konfiguraƒçn√≠ soubor z va≈°eho sliceru

nebo pou≈æijte v√Ωchoz√≠ nastaven√≠.

\[ Nahr√°t .ini soubor z PrusaSliceru \]

nebo

\[ Pou≈æ√≠t v√Ωchoz√≠ nastaven√≠ \]

üí° Tip: M≈Ø≈æete p≈ôidat v√≠ce preset≈Ø pro r≈Øzn√© kvality tisku.

\[ ‚Üê Zpƒõt \]              \[ Dal≈°√≠ ‚Üí \]

\`\`\`

\*\*Krok 5: Vyzkou≈°en√≠\*\*

\`\`\`

Krok 5 z 5: Vyzkou≈°ejte to\!

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚óè‚óè‚óè‚óè‚óè

Skvƒõl√©\! Z√°kladn√≠ nastaven√≠ je hotov√©.

\[ üß™ Otev≈ô√≠t testovac√≠ kalkulaƒçku \]

Vyzkou≈°ejte nahr√°t model a spoƒç√≠tat cenu.

A≈æ budete spokojeni, vlo≈æte kalkulaƒçku na v√°≈° web.

\[ üìã Z√≠skat embed k√≥d \]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

\[ Dokonƒçit a p≈ôej√≠t do admin panelu \]

**Technick√° implementace:**

**State management:**

javascript

*// Ulo≈æen√≠ stavu onboardingu*

const onboardingState \= {

  userId: 'user\_123',

  startedAt: '2024-01-15T10:00:00Z',

  currentStep: 3,

  completedSteps: \['branding', 'pricing'\],

  skipped: false,

  completedAt: null

};

**Datab√°zov√Ω model:**

sql

CREATE TABLE user\_onboarding (

  user\_id UUID PRIMARY KEY REFERENCES users(id),

  current\_step INTEGER DEFAULT 1,

  completed\_steps VARCHAR(50)\[\] DEFAULT '{}',

  started\_at TIMESTAMP DEFAULT NOW(),

  completed\_at TIMESTAMP,

  skipped\_at TIMESTAMP,

  data JSONB *\-- Doƒçasn√° data z pr≈Øvodce p≈ôed ulo≈æen√≠m*

);

**UI komponenta:**

* Modal/overlay p≈ôes celou str√°nku  
* Progress bar naho≈ôe  
* Navigaƒçn√≠ tlaƒç√≠tka (Zpƒõt, Dal≈°√≠, P≈ôeskoƒçit)  
* Mo≈ænost zav≈ô√≠t a vr√°tit se pozdƒõji  
* Responsive design (funguje i na tabletu)

**Knihovny:**

* **react-joyride** ‚Äî tooltipov√Ω pr≈Øvodce p≈ô√≠mo v UI (alternativa k modalu)  
* **shepherd.js** ‚Äî podobn√©, framework-agnostic  
* **intro.js** ‚Äî lehk√Ω, jednoduch√Ω  
* Nebo vlastn√≠ implementace s modaly

**Gamifikace (voliteln√©):**

* Progress bar s procenty  
* Checkmarky u dokonƒçen√Ωch krok≈Ø  
* Konfety/animace po dokonƒçen√≠  
* Badge "Setup Complete" v profilu

---

### **22.3 N√°povƒõdn√© tooltipy a dokumentace**

**Kontextov√° n√°povƒõda v admin panelu:**

**Ikony n√°povƒõdy (?):**

* U ka≈æd√© sekce/pole p≈ôidat ikonu otazn√≠ku  
* P≈ôi hoveru: tooltip s kr√°tk√Ωm vysvƒõtlen√≠m  
* P≈ôi kliknut√≠: otev≈ôe se sidebar nebo modal s detailnƒõj≈°√≠m popisem \+ odkaz na dokumentaci/video

**P≈ô√≠klad implementace:**

jsx

\<FormField\>

  \<Label\>

    Cena za gram materi√°lu

    \<HelpIcon tooltip\="Z√°kladn√≠ cena za 1 gram spot≈ôebovan√©ho materi√°lu. Doporuƒçujeme 0.30-0.80 Kƒç pro PLA."\>

      \<Link href\="/docs/pricing/material-cost"\>V√≠ce info\</Link\>

    \</HelpIcon\>

  \</Label\>

  \<Input type\="number" ... /\>

\</FormField\>

\`\`\`

\*\*Tooltip obsah ‚Äî kr√°tk√Ω a u≈æiteƒçn√Ω:\*\*

\- Max 2-3 vƒõty

\- Konkr√©tn√≠ doporuƒçen√≠ nebo p≈ô√≠klad

\- Odkaz na detailn√≠ dokumentaci

\*\*Inline tipy:\*\*

\- Pod nƒõkter√Ωmi formul√°≈ôi zobrazit "üí° Tip: ..." box

\- Kontextu√°ln√≠ rady dle aktu√°ln√≠ho stavu

\- Nap≈ô. pokud nem√° nastaven√Ω ≈æ√°dn√Ω preset: "üí° Tip: Nahrajte alespo≈à jeden preset pro p≈ôesnƒõj≈°√≠ kalkulaci cen."

\*\*Empty states s n√°povƒõdou:\*\*

\- Kdy≈æ je seznam pr√°zdn√Ω (≈æ√°dn√© objedn√°vky, materi√°ly...), zobrazit:

\`\`\`

  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê

  ‚îÇ                                         ‚îÇ

  ‚îÇ     üì¶ Zat√≠m nem√°te ≈æ√°dn√© objedn√°vky   ‚îÇ

  ‚îÇ                                         ‚îÇ

  ‚îÇ   Objedn√°vky se zde zobraz√≠, jakmile   ‚îÇ

  ‚îÇ   z√°kazn√≠ci zaƒçnou pou≈æ√≠vat va≈°i       ‚îÇ

  ‚îÇ   kalkulaƒçku.                          ‚îÇ

  ‚îÇ                                         ‚îÇ

  ‚îÇ   \[ Jak z√≠skat prvn√≠ objedn√°vky? \]     ‚îÇ

  ‚îÇ                                         ‚îÇ

  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

\`\`\`

\*\*Knowledge base / Help center:\*\*

\*\*Struktura:\*\*

\`\`\`

/docs

‚îú‚îÄ‚îÄ getting\-started/

‚îÇ   ‚îú‚îÄ‚îÄ introduction.md

‚îÇ   ‚îú‚îÄ‚îÄ quick\-setup.md

‚îÇ   ‚îî‚îÄ‚îÄ first\-order.md

‚îú‚îÄ‚îÄ admin\-panel/

‚îÇ   ‚îú‚îÄ‚îÄ dashboard.md

‚îÇ   ‚îú‚îÄ‚îÄ pricing.md

‚îÇ   ‚îú‚îÄ‚îÄ materials.md

‚îÇ   ‚îú‚îÄ‚îÄ presets.md

‚îÇ   ‚îú‚îÄ‚îÄ fees.md

‚îÇ   ‚îú‚îÄ‚îÄ orders.md

‚îÇ   ‚îú‚îÄ‚îÄ branding.md

‚îÇ   ‚îî‚îÄ‚îÄ widget.md

‚îú‚îÄ‚îÄ widget/

‚îÇ   ‚îú‚îÄ‚îÄ embedding.md

‚îÇ   ‚îú‚îÄ‚îÄ customization.md

‚îÇ   ‚îî‚îÄ‚îÄ troubleshooting.md

‚îú‚îÄ‚îÄ integrations/

‚îÇ   ‚îú‚îÄ‚îÄ wordpress.md

‚îÇ   ‚îú‚îÄ‚îÄ shopify.md

‚îÇ   ‚îî‚îÄ‚îÄ api.md

‚îî‚îÄ‚îÄ faq.md

**Ka≈æd√Ω ƒçl√°nek obsahuje:**

* Jasn√Ω n√°zev a popis  
* Krok za krokem instrukce s obr√°zky/GIFy  
* P≈ô√≠klady a best practices  
* Odkazy na souvisej√≠c√≠ ƒçl√°nky  
* "Bylo to u≈æiteƒçn√©?" feedback tlaƒç√≠tka

**Vyhled√°v√°n√≠:**

* Full-text search p≈ôes v≈°echny ƒçl√°nky  
* Autocomplete s n√°vrhy  
* Zv√Ωraznƒõn√≠ hledan√©ho textu ve v√Ωsledc√≠ch

**Technologie:**

* **Docusaurus** (React, MDX, dobr√Ω search)  
* **VitePress** (Vue, rychl√Ω, minimalistick√Ω)  
* **GitBook** (hosted, WYSIWYG editor)  
* **Notion** (jednoduch√Ω, ale omezen√° customizace)  
* **ReadMe.io** (placen√Ω, ale profi look)

**In-app help widget:**

* Plovouc√≠ tlaƒç√≠tko "?" v prav√©m doln√≠m rohu admin panelu  
* Po kliknut√≠: search box \+ popul√°rn√≠ ƒçl√°nky \+ kontakt na support  
* Integrace s Intercom, Crisp, nebo vlastn√≠ ≈ôe≈°en√≠

**Feedback loop:**

* Na konci ka≈æd√©ho ƒçl√°nku: "Pomohl v√°m tento ƒçl√°nek? üëç üëé"  
* Mo≈ænost napsat koment√°≈ô/dotaz  
* Data se sb√≠raj√≠ pro zlep≈°ov√°n√≠ dokumentace

**Lokalizace dokumentace:**

* Prim√°rnƒõ ƒçe≈°tina  
* Anglick√° verze pro mezin√°rodn√≠ expanzi  
* Struktura: `/docs/cs/...` a `/docs/en/...`  
* P≈ôep√≠naƒç jazyk≈Ø v headeru dokumentace

